function refreshOGFB(){$.post("https://graph.facebook.com/?id="+encodeURIComponent(document.location.href)+"&scrape=true").done(function(e){console.log(e)})}function trackEvent(e,t,n,o){o||(o=1),n||(n=""),t||(t=""),ga("send","event",e,t,n,o)}function handleStageImageLoad(e){var t=(e.width+"_"+e.height,{h:$(e).parent().height(),w:$(e).parent().width()}),n=t.w/t.h,o=e.width/e.height;n>o?$(e).css("width","100%"):$(e).css("height","100%"),$(e).removeClass("hidden")}function getQueryStringValue(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function checkAndRenderComponent(e,t,n,o){if(gJsxRenderedParents[n]=e,AppLogger.log("Retrying to render "+e+" .."),"undefined"==typeof window[e])return void setTimeout(function(){gJsxRenderedParents[n]==e&&checkAndRender(e,t,n,o)},500);var i=React.render(React.createElement(window[e],t),document.getElementById(n));o&&o(i)}function jiyoFromNow(e){var t=new Date(1e3*e),n=new Date(1e3*moment().format("X")),o=Math.floor((n-t)/1e3),i=Math.floor(o/60),r=Math.floor(i/60),a=Math.floor(r/24);return dateStr=moment(1e3*e).format("MMM DD, YYYY"),1>=o?"1 second ago":60>o?o+" seconds ago":1==i?i+" minute ago":60>i?i+" minutes ago":1==r?r+" hour ago":24>r?r+" hours ago":1==a?a+" day ago":7>a?a+" days ago":a>=7?moment(1e3*e).format("MMM DD, YYYY"):dateStr}var HandleAssetLoadMixin={handleImageLoad:function(){this.props.onTileLoad(this)},handleImageError:function(){this.props.onTileLoad(this)}};$.fn.serializeToObject=function(){var e=$(this).serializeArray(),t={};return _.reduce(e,function(e,t){return e[t.name]=t.value,e},t),t},"undefined"==typeof window.console&&(window.console={log:function(){}}),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},$.ajaxPrefilter(function(e){e.beforeSend||(e.beforeSend=function(e){e.setRequestHeader("JIYO-DEVICE-WIDTH",window.screen.width),"undefined"!=typeof gAuth&&e.setRequestHeader("JIYO-ACCESS-TOKEN",gAuth.token)})});var Api={makeRequest:function(e,t){$("#top_error_panel").addClass("hidden"),$.ajax(e).done(function(e){t&&t(e),$("#topErrorMessageArea").addClass("hidden")}).fail(function(e){$("#top_error_panel").html("An Unexpected error occured").removeClass("hidden")}).error(function(e){401==e.status&&(document.location.href="/home"),0==e.status&&0==e.readyState&&$("#topErrorMessageArea").text("Unable to reach server, Please check your network connection ..").removeClass("hidden")})},postData:function(e,t,n){"function"==typeof t&&(n=t,t={}),t._token=gAppConfig.CSRFToken,this.makeRequest({url:e,type:"POST",data:t},n)},postJSON:function(e,t,n){this.makeRequest({url:e,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)},n)},deleteData:function(e,t,n){t._token=gCSRFToken,this.makeRequest({url:e,type:"DELETE",data:t},n)},getData:function(e,t,n){"function"==typeof t&&(n=t,t={}),this.makeRequest({url:e,type:"GET",data:t},n)}},JiyoEvent={subscribers:{},unsubscribe:function(e,t){"undefined"==typeof this.subscribers[e]},haveSubscribers:function(e){return"undefined"==typeof this.subscribers[e]?!1:this.subscribers[e].length>0},removeSubscribers:function(e){"undefined"!=typeof this.subscribers[e]&&(this.subscribers[e]=[])},subscribe:function(e,t){"undefined"==typeof this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e].push(t)},fire:function(e,t){var n=this.subscribers[e];if(n)for(var o=0;o<n.length;o++)n[o]&&n[o](t)}},Strings={programSelect:{},facetProgress:{title:"Facet Information"}},ServerPostMixin={stopEvent:function(e){return e.preventDefault(),e.stopPropagation(),!1},postData:function(e,t,n){var o=this,i=o.state;for(var r in i.errorMessages)i.errorMessages[r]=null;Api.postData(e,t,function(e){if(i.response=e,e.success)return void(n&&n(i));var t=e.data;for(var o in t){var r=t[o];i.errorMessages[o]=r}n&&(i.response=e,n(i))})}},gJsxRenderedParents={},AppLogger={log:function(){gAppConfig.debugEnabled&&console.log.apply(console,arguments)}},UserViewsManager={viewedObjects:{},hasViewed:function(e){return 1==this.viewedObjects[e]},init:function(){var e=this;JiyoEvent.subscribe("app_init",function(t){Api.getData("/content/user-article-views",{},function(t){e.viewedObjects=t.data})})}},UserStoryViewsManager={viewedStoryObjects:{},hasViewedStory:function(e){return 1==this.viewedStoryObjects[e]},init:function(){var e=this;JiyoEvent.subscribe("app_init",function(t){Api.getData("/content/user-story-views",{},function(t){e.viewedStoryObjects=t.data})})}};UserViewsManager.init(),UserStoryViewsManager.init();var UserLikesManager={likedObjects:[],like:function(e,t){var n=this;Api.getData("/content/like/"+e,{},function(t){1==t.data.meLiked&&(n.likedObjects.push(e),t.data.uuid=e,JiyoEvent.fire("object_like",t.data))})},unlike:function(e){var t=this;Api.getData("/content/unlike/"+e,{},function(n){0==n.data.meLiked&&(t.likedObjects=_.without(t.likedObjects,e),n.data.uuid=e,JiyoEvent.fire("object_unlike",n.data))})},init:function(){var e=this;JiyoEvent.subscribe("app_init",function(t){Api.getData("/content/user-likes",{},function(t){e.likedObjects=t.data,e.likedObjects.forEach(function(e){JiyoEvent.fire("object_like",{uuid:e})})})})},hasLiked:function(e){for(var t=0;t<this.likedObjects.length;t++)if(this.likedObjects[t]==e)return!0;return!1}};UserLikesManager.init(),$(function(){for(;gInitializerList.length;){var e=gInitializerList.pop();e()}}),$(document).ready(function(){for($(".facebookBtn").click(function(){ga("send","event","button","facebook_connect","click")}),$(".googleplusBtn").click(function(){ga("send","event","button","google_connect","click")}),$(".ga_logout").click(function(){ga("send","event","button","logout","click")});gComponentsToRender.length;){var e=gComponentsToRender.pop();checkAndRenderComponent(e.viewController,e.params,e.container,e.cb)}0!=$("#imageCropForm").length&&($("#imageCropForm").submit(function(e){var t=$("#imageCropForm").serializeToObject();return console.log(t),Api.postData("/user/profile-image",t,function(e){$("#user_profile_image").attr("src",e.data.cdn_url),$("#profileImageCropModal").modal("hide"),JiyoEvent.fire("update_activity"),$("#profileImagePreview").cropper("destroy")}),e.preventDefault(),e.stopPropagation(),!1}),$("form#imageCropForm .modal-header .close").on("click",function(){return $("#profileImageCropModal").modal("hide"),$("#profileImagePreview").cropper("destroy"),!1}),$("#profileImagePreview").on("load",function(){-1==$(this).attr("src").indexOf("loading.gif")&&($("#profileImageBusyState").addClass("hidden"),$("#profileImageCropModal").modal("show"),$("#profileImagePreview").cropper({aspectRatio:1,height:200,done:function(e){$("#crop_media_x").val(e.x),$("#crop_media_y").val(e.y),$("#crop_media_width").val(e.width),$("#crop_media_height").val(e.height)}}))}),$("#profileimage_upload").fileupload({url:"/user/upload?_token={{ csrf_token() }}",dataType:"json",done:function(e,t){var n=t.response();return 0==n.result.success?($("#profileImageBusyState").addClass("hidden"),alert(n.result.message),!1):($("#crop_media_id").val(n.result.data.id),void $("#profileImagePreview").attr("src",n.result.data.cdn_url))},start:function(){$("#profileImageBusyState").removeClass("hidden")},add:function(e,t){var n=t.files[0].name.split(".").pop(),o="jpeg,jpg,png,gif";return n=n.toLowerCase(),o.indexOf(n)<0?(alert("Are you sure this is an image file?"),!1):void t.submit()}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"),$("#coverimage_upload").fileupload({url:"/user/upload?_token={{ csrf_token() }}",dataType:"json",done:function(e,t){var n=t.response();return 0==n.result.success?($("#coverImageBusyState").addClass("hidden"),alert(n.result.message),!1):($("#coverImageBusyState").addClass("hidden"),$(".profile-picture").css("background-image","url('"+n.result.data.cdn_url+"')"),void JiyoEvent.fire("update_activity"))},start:function(){$("#coverImageBusyState").removeClass("hidden")},add:function(e,t){var n=t.files[0].name.split(".").pop(),o="jpeg,jpg,png,gif";return n=n.toLowerCase(),o.indexOf(n)<0?(alert("Are you sure this is an image file?"),!1):void t.submit()}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"))});
var TextEllipsis=React.createClass({displayName:"TextEllipsis",render:function(){var e=this.props.maxlimit,t=this.props.text;return t.length>e&&t.length>2&&(t=t.substring(0,e-2)+"..."),React.createElement("div",null,t)}}),LoadingIcon=React.createClass({displayName:"LoadingIcon",render:function(){return React.createElement("img",{src:"/assets/img/loading.gif",className:"loading_gif"})}}),LoadingIndicator=React.createClass({displayName:"LoadingIndicator",render:function(){return React.createElement("div",{className:"text-center",style:{padding:"20px"}},React.createElement(LoadingIcon,null))}}),ValPropSetMixin={handleProps:function(e){$(this.refs.inputElement.getDOMNode()).val(e.val)},componentDidMount:function(){this.handleProps(this.props)},componentWillReceiveProps:function(e){this.handleProps(e)}},HtmlFormErrorMessage=React.createClass({displayName:"HtmlFormErrorMessage",render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e.errorMsg}})}}),HtmlFormGroupText=React.createClass({displayName:"HtmlFormGroupText",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="";var r=e.label;return e.placeholder&&(r=e.placeholder),React.createElement("div",{className:"form-group "+e.name},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{className:"form-control",id:e.name,ref:"inputElement",autocomplete:"off",placeholder:r,type:"text",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormColor=React.createClass({displayName:"HtmlFormColor",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{ref:"inputElement",className:"form-control",autocomplete:"off",id:e.name,type:"color",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormGroupPassword=React.createClass({displayName:"HtmlFormGroupPassword",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="";var r=e.label;return e.placeholder&&(r=e.placeholder),React.createElement("div",{className:"form-group "+e.name},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{ref:"inputElement",className:"form-control",autocomplete:"off",id:e.name,placeholder:r,type:"password",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormGroupTextArea=React.createClass({displayName:"HtmlFormGroupTextArea",mixins:[ValPropSetMixin],render:function(){var e=this.props,e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("textarea",{ref:"inputElement",rows:"5",className:"form-control",name:e.name,id:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlH1=React.createClass({displayName:"HtmlH1",render:function(){return React.createElement("h1",null,this.props.text)}}),HtmlH2Msg=React.createClass({displayName:"HtmlH2Msg",render:function(){return React.createElement("h2",{className:"text-center"},this.props.text)}}),HtmlFormSelect=React.createClass({displayName:"HtmlFormSelect",mixins:[ValPropSetMixin],render:function(){var e=this.props;return React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("select",{ref:"inputElement",name:e.name,id:e.name,className:"form-control"},e.items))}}),HtmlFormSelectOption=React.createClass({displayName:"HtmlFormSelectOption",render:function(){var e=this.props;return React.createElement("option",{value:e.value},e.label)}}),ButtonSelectionMap=React.createClass({displayName:"ButtonSelectionMap",render:function(){var e=[],t=this.props.buttonMap;for(var r in t){var a=t[r];e.push(r==this.props.selected?React.createElement("button",{onClick:this.props.handleClick.bind(null,r),className:"btn btn-xs btn-success"},a):React.createElement("button",{onClick:this.props.handleClick.bind(null,r),className:"btn btn-xs btn-primary"},a))}return React.createElement("div",{className:"btn-group"},e)}});
var UserNoticationUpdater=React.createClass({displayName:"UserNoticationUpdater",getInitialState:function(){return{count:0,notification_popup:!1,notifications:null,filterType:"all",activeClass:""}},fetchNotificationCount:function(){var e=this;Api.getData("/community/notification-count",{},function(t){e.setState({count:t.data})})},updateNotifications:function(){var e=this;Api.getData("/community/notifications",{},function(t){e.setState({notifications:t.data}),JiyoEvent.fire("update_notification",t.data.length)})},acceptFriendRequest:function(e){Api.postData("/community/accept-connect-request",{user_id:e},function(){JiyoEvent.fire("user_2_user_connection")})},rejectFriendRequest:function(e){Api.postData("/community/reject-connect-request",{user_id:e},function(){JiyoEvent.fire("user_2_user_connection")})},handleNotificationClick:function(e){var t=!this.state.notification_popup;this.setState({notification_popup:t}),e.stopPropagation(),$("#notificationPopup").hasClass("open")&&$(".notificationDiv").addClass("active"),$("body").click(function(){$(".notificationDiv").find(".active")&&$(".notificationDiv").removeClass("active")})},componentDidMount:function(){this.updateNotifications();var e=this;setInterval(function(){e.fetchNotificationCount()},3e4),e.fetchNotificationCount(),JiyoEvent.subscribe("update_notification",function(t){t?e.setState({count:t}):e.fetchNotificationCount()}),JiyoEvent.subscribe("user_2_user_connection",function(){e.fetchNotificationCount(),e.updateNotifications()}),JiyoEvent.subscribe("notification_click",function(){})},renderFriendRequest:function(e){var t=moment.utc(e.tm_utc,"X").toDate();return t=moment(t).format("HH:mm"),React.createElement("div",{className:"media friendRequest"},React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"#"},React.createElement("img",{className:"media-object media-middle img-circle",src:e.user_image,alt:e.user_name}))),React.createElement("div",{className:"pull-right acceptRejectBtn"},React.createElement("button",{title:"Accept",className:"btn btn-primary accept-button",onClick:this.acceptFriendRequest.bind(null,e.user_id)}),React.createElement("button",{title:"Reject",className:"btn btn-primary reject-button",onClick:this.rejectFriendRequest.bind(null,e.user_id)})),React.createElement("div",{className:"media-heading"},React.createElement("p",null,React.createElement("span",null,React.createElement("a",{href:"#",className:"fontstyle13px userName"},e.user_name," ")),React.createElement("br",null))))},renderTaskNotification:function(e){var t=moment.utc(e.task_utc,"X").toDate();return t=moment(t).format("HH:mm"),React.createElement("div",{className:"media taskRequest"},React.createElement("div",{className:"pull-right"},React.createElement("span",{className:"time-info"},t)),React.createElement("div",{className:"pull-left "},React.createElement("div",{className:"text-center task-number"},React.createElement("span",null,"Task"),React.createElement("br",null),React.createElement("span",null,e.task_number))),React.createElement("div",{className:"media-heading fontStyle15 tasktext-heading"},React.createElement("a",{href:"/user/profile#"+e.task_id},e.title)),React.createElement("div",{className:"media-body fontStyle22 taskText-body"},e.brief))},renderArticle:function(e){return React.createElement("div",{className:"media articleRequest"},React.createElement("div",{className:"pull-right"},React.createElement("span",{className:"time-info"},e.user_time)),React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"/user/profile/"+e.author_id},React.createElement("img",{className:"media-object img-circle media-middle",alt:e.author_image,src:e.author_image,width:"48",height:"48"}))),React.createElement("div",{className:"media-heading fontStyle15"}," ",React.createElement("a",{href:e.url},e.title)," "),React.createElement("div",{className:"media-body fontStyle16"},"By:",React.createElement("span",null,e.author_name)))},filterNotifications:function(e){this.setState({filterType:e})},render:function(){var e="",t=this;if(null==t.state.notifications)return React.createElement("img",{src:""});for(var a=t.state.notifications,i=[],n=[],c=[],s=[],r=0,l=0,o=0,u=0;u<a.length;u++){var m=a[u],d=null,p=c,f=this.state.filterType;"all"==f&&(f=m.type),"article_publish"==m.type?(d=this.renderArticle(m),o++):"friend_request"==m.type?(d=this.renderFriendRequest(m),p=n,r++):"task_notification"==m.type&&(d=this.renderTaskNotification(m),p=s,l++),m.type===f&&(p.length<3&&p.push(React.createElement("li",{className:"list-group-item"},d)),i.push(React.createElement("li",{className:"list-group-item col-md-6"},d)))}(0!=r||0!=l)&&$("title").html("("+(r+l)+") Jiyo");var R={all:"All Notifications ("+a.length+")",friend_request:"Friend Requests ("+r+")"},h=[],t=this;for(var E in R){var N=R[E],v="";this.state.filterType==E&&(v="active"),h.push(React.createElement("button",{className:"btn btn-link custom-notification "+v,onClick:this.filterNotifications.bind(null,E)},N))}var _="",b="",y="",g="";0==c.length&&(y="hidden"),0==s.length&&(b="hidden");var q="";return 0!=n.length&&(q=React.createElement("div",{className:"viewAllDiv text-center"},React.createElement("a",{href:"/user/profile/#friendRequest",className:"text-center"},"View All"))),0==n.length&&(g="popUpEmptyMsg",_="",n.push(React.createElement("li",null,"No friend requests"))),0==t.state.count?React.createElement("div",{className:"notificationDiv",title:"Friend Request"}):(e=t.state.count>0?React.createElement("div",null,React.createElement("li",{id:"notificationPopup",className:"dropdown"},React.createElement("a",{"data-toggle":"dropdown",title:"Friend Request",className:"dropdown-toggle",onClick:t.handleNotificationClick,href:"#","aria-expanded":"true"},React.createElement("div",{className:"notificationDiv",onClick:t.handleNotificationClick}),React.createElement("p",{className:"speech"},r)),React.createElement("ul",{className:"dropdown-menu notification_popup"},React.createElement("li",null,React.createElement("div",{className:"topArrow"}),React.createElement("div",{className:"notification-popup-header text-center"},React.createElement("span",{className:"notification_popupHeader icon20"}),"  Friend Requests")),React.createElement("li",null,React.createElement("ul",{className:"sub-notification-content"},React.createElement("li",{className:_},React.createElement("ul",{className:"notification-list "+g},n),q)))))):"",React.createElement("span",null,e))}}),UserTeaserBlock=React.createClass({displayName:"UserTeaserBlock",mixins:[ServerPostMixin],unFriendRequest:function(e){var t=this,a=t.props.user.display_name;1==confirm("Are you sure you want to say goodbye to "+a+" ?")&&Api.postData("/community/disconnect-with-user",{user_id:e},function(){JiyoEvent.fire("user_2_user_connection")})},render:function(){var e=("/user/profile/"+this.props.user.id,this.props.user.public_status),t="";null==e&&(t="");var a="";return paramObj.me.id!=paramObj.user.id&&(a="hidden"),React.createElement("div",null,React.createElement("div",{className:"col-lg-4"},React.createElement("div",{className:"media user-connection-teaser"},React.createElement("div",{className:"user-info-teaser clearfix"},React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"/user/profile/"+this.props.user.id},React.createElement("img",{className:"media-object media-middle img-circle",src:this.props.user.profile_image_url,alt:this.props.user.profile_image_url,width:"35",height:"35"}))),React.createElement("div",{className:"pull-right"},React.createElement("button",{title:"Remove",className:"btn unfriend-button "+a,onClick:this.unFriendRequest.bind(null,this.props.user.id)})),React.createElement("div",{className:"media-heading"},React.createElement("p",null,React.createElement("span",null,React.createElement("a",{href:"/user/profile/"+this.props.user.id,className:"fontstyle13px"},this.props.user.display_name)),React.createElement("br",null)))))))}}),Friendrequest=React.createClass({displayName:"Friendrequest",getInitialState:function(){return{count:0,notifications:null,filterType:"all",activeClass:""}},updateNotifications:function(){var e=this;Api.getData("/community/notifications/friend_request",{},function(t){e.setState({notifications:t.data})})},acceptFriendRequest:function(e){Api.postData("/community/accept-connect-request",{user_id:e},function(){JiyoEvent.fire("user_2_user_connection")})},rejectFriendRequest:function(e){Api.postData("/community/reject-connect-request",{user_id:e},function(){JiyoEvent.fire("user_2_user_connection")})},componentDidMount:function(){this.updateNotifications();var e=this;JiyoEvent.subscribe("user_2_user_connection",function(){e.updateNotifications()})},render:function(){var e=this.props.user,t=moment.utc(e.tm_utc,"X").toDate();return t=moment(t).format("HH:mm"),React.createElement("div",{className:"friendRequestTab"},React.createElement("div",{className:"col-lg-4"},React.createElement("div",{className:"friendRequestTeaser"},React.createElement("div",{className:"media"},React.createElement("div",{className:"pull-right acceptRejectBtn"},React.createElement("button",{title:"Accept",className:"btn btn-primary accept-button",onClick:this.acceptFriendRequest.bind(null,e.user_id)}),React.createElement("button",{title:"Reject",className:"btn btn-primary reject-button",onClick:this.rejectFriendRequest.bind(null,e.user_id)})),React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"/user/profile/"+this.props.user.user_id},React.createElement("img",{className:"media-object media-middle img-circle",src:e.user_image,alt:e.user_name,width:"35",height:"35"}))),React.createElement("div",{className:"media-heading"},React.createElement("p",null,React.createElement("span",null,React.createElement("a",{href:"#",className:"fontstyle13px userName"},e.user_name," "))))))))}});
var ContentAbuseReporter=React.createClass({displayName:"ContentAbuseReporter",mixins:[ServerPostMixin],submitReportComment:function(e){$("#report_abuse_response").removeClass().addClass("hidden");var t=$("#report_abuse_form").serializeToObject();return $("#report-abuse-button").attr("disabled","disabled"),Api.postData("/content/report-comment",t,function(e){e.success?($("#report_abuse_response").html(e.message),$("#report_abuse_response").removeClass().addClass("alert alert-success form-alert-message"),setTimeout(function(){$("#report_abuse_modal").modal("hide"),$("#report_type").val(""),$("#report_text").val(""),JiyoEvent.fire("report_popup_close")},2e3)):($("#report_type").val(""),$("#report_text").val(""),$("#report_abuse_response").html(e.message),$("#report_abuse_response").removeClass().addClass("alert alert-warning form-alert-message")),$("#report-abuse-button").removeAttr("disabled")}),this.stopEvent(e)},render:function(){var e={hate_speech:"Hate speech, violent or crude content",harrassment:"Harassment",sexist:"Sexist Comment",spam:"Spam, phishing, or malware",legal:"Legal"},t={};for(var a in e)t[a]=React.createElement(HtmlFormSelectOption,{label:e[a],value:a});return React.createElement("div",{className:"modal fade",id:"report_abuse_modal"},React.createElement("div",{className:"modal-dialog"},React.createElement("form",{className:"modal-content",id:"report_abuse_form",onSubmit:this.submitReportComment},React.createElement("div",{className:"modal-header"},React.createElement("h4",{className:"modal-title"},"Report Comment As Abusive"),React.createElement("div",{className:"triangle-top"})),React.createElement("div",{className:"modal-body"},React.createElement("div",{id:"report_abuse_response"}),React.createElement("input",{type:"hidden",id:"comment_report_id",name:"comment_id"}),React.createElement(HtmlFormSelect,{name:"report_type",items:t,label:"Reason"}),React.createElement(HtmlFormGroupTextArea,{name:"report_text",label:"Description"})),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Cancel"),React.createElement("button",{className:"btn btn-primary",id:"report-abuse-button"},"Report ")))))}});
var ContentCommentCard=React.createClass({displayName:"ContentCommentCard",mixins:[ServerPostMixin],getInitialState:function(){return{viewClass:"",editClass:"hidden"}},reportComment:function(e){JiyoEvent.fire("report_popup_open"),$("#report_abuse_response").removeClass().addClass("hidden"),$("#comment_report_id").val(e),setTimeout(function(){$("#report_abuse_modal").modal("show")},100)},editCommentSubmit:function(e){var t=this,a=$(e.target).serializeToObject();return console.log(a),this.stopEvent(e),$("#article-edit-comment").attr("disabled","disabled"),Api.postData("/content/update-comment",a,function(e){e.success?($("#cmntsCharCount").text(500),$("#commentTextArea").val(""),t.props.comment=e.data,t.setState({viewClass:"",editClass:"hidden"})):t.setState({errorMessage:e.message}),$("#article-edit-comment").removeAttr("disabled")}),this.stopEvent(e)},editComment:function(e){this.setState({viewClass:"hidden",editClass:""})},render:function(){var e=this.props.comment,t=null,a=null,n=null;return paramObj.me.id==e.author_id?t=React.createElement("button",{className:this.state.viewClass+" comment-delete-btn btn btn-link btn-xs deleteBtn",type:"button",onClick:this.props.deleteComment.bind(null,e.id)},"×"):a=React.createElement("button",{className:"comment-report-btn btn btn-link btn-xs",type:"button",onClick:this.reportComment.bind(null,e.id)},"report abuse"),paramObj.me.id==e.author_id&&(n=React.createElement("span",{onClick:this.editComment.bind(null,e.id,e),className:this.state.viewClass+" editCommentButton"})),React.createElement("div",{className:"article-comment  media"},React.createElement("a",{className:"media-left",href:"/user/profile/"+e.author_id},React.createElement("img",{className:"comment-img",src:e.user_image,alt:e.user_name})),React.createElement("div",{className:"media-body"},t,n,a,React.createElement("div",{className:"comment-blue-text"},e.user_name,React.createElement("span",{style:{"font-size":"14px","margin-left":"10px"},className:"comment-date articlesDetailsTime"},jiyoFromNow(e.utc))),React.createElement("div",{className:"widthheight20"}),React.createElement("div",{style:{color:"#000000"},className:this.state.viewClass+" comment-text"},e.text),React.createElement("form",{className:this.state.editClass,onSubmit:this.editCommentSubmit},React.createElement("textarea",{className:"form-control textareaFormControl",name:"comment"},e.text),React.createElement("input",{name:"comment_id",type:"hidden",value:e.id}),React.createElement("div",{className:"height10 clearfix"}),React.createElement("button",{className:"btn btn-primary pull-right orangeBtn"},"Save"))))}});
var ContentCommentWidget=React.createClass({displayName:"ContentCommentWidget",mixins:[ServerPostMixin],getInitialState:function(){return{comments:null,errorMessage:null,showCommentCount:3}},componentDidMount:function(){var e=this;Api.getData("/content/comments",{object_uuid:this.props.obj.uuid},function(t){e.setState({comments:t.data.comments})}),$("[data-dismiss=modal]").on("click",function(e){var t=$(this),n=t[0].href||t.data("target")||t.parents(".modal")||[];$(n).find("input,textarea,select").val("").end().find("input[type=checkbox], input[type=radio]").prop("checked","").end()})},handleCommentSubmit:function(e){var t=this,n=$("#commentSubmitForm").serializeToObject();return t.setState({errorMessage:null}),$("#article-post-comment").attr("disabled","disabled"),Api.postData("/content/comment",n,function(e){e.success?($("#cmntsCharCount").text(500),$("#commentTextArea").val(""),t.setState({comments:e.data.comments}),JiyoEvent.fire("comment_count_change",{count:e.data.count,uuid:e.data.object_uuid})):t.setState({errorMessage:e.message}),$("#article-post-comment").removeAttr("disabled")}),this.stopEvent(e)},updateCommentCharactersCount:function(e){var t=e.target.value.length;t>500?e.target.value=e.target.value.substring(0,500):$("#cmntsCharCount").text(500-t),13==e.keyCode&&this.handleCommentSubmit(e)},deleteComment:function(e){var t=this;return confirm("Are you sure you want to delete this comment?")&&Api.postData("/content/remove-comment",{comment_id:e},function(e){e.success?(t.setState({comments:e.data.comments}),JiyoEvent.fire("comment_count_change",{count:e.data.count,uuid:e.data.object_uuid})):t.setState({errorMessage:e.message})}),!1},showMoreComments:function(){this.setState({showCommentCount:this.state.showCommentCount+15})},render:function(){var e=this,t=null;if(null==this.state.comments)t=React.createElement("div",{className:"text-center"},React.createElement("span",{className:"throbber"}));else{t=[];var n=0;this.state.comments.forEach(function(a){n++<e.state.showCommentCount&&t.push(React.createElement(ContentCommentCard,{deleteComment:e.deleteComment,comment:a}))}),this.props.obj.comment_count=t.length}var a=null;n>e.state.showCommentCount&&(a=React.createElement("button",{className:"btn btn-link btn-xs viewMoreBtn",onClick:this.showMoreComments},"View More"));var m=null;return this.state.errorMessage&&(m=React.createElement("div",{className:"text-danger"},this.state.errorMessage)),React.createElement("div",{id:"article-comments-holder"},React.createElement("div",{className:"clearfix commentHolderDiv"},React.createElement("h4",null,"Say something"),React.createElement("div",{className:"list-group article-comments"},React.createElement("div",{className:"comment-add-form"},React.createElement("form",{id:"commentSubmitForm",onSubmit:e.handleCommentSubmit},React.createElement("input",{type:"hidden",name:"object_uuid",value:this.props.obj.uuid}),React.createElement("textarea",{onKeyUp:e.updateCommentCharactersCount,rows:"5",id:"commentTextArea",className:"text-area form-control textareaFormControl",placeholder:"Tell us what you're thinking",name:"comment"}),React.createElement("div",null,React.createElement("h6",null,"Characters Remaining: ",React.createElement("span",{id:"cmntsCharCount"},"500"))),React.createElement("div",null,m),React.createElement("div",{className:"clearfix"},React.createElement("button",{id:"article-post-comment",className:"btn btn-primary pull-right btn-sm orangeBtn"},"Post Comment")))),React.createElement("div",null,t),React.createElement("div",{className:"text-center"},a),React.createElement("div",{className:"height20 clearfix"}))))}});
var ContentLikeUnlike=React.createClass({displayName:"ContentLikeUnlike",getInitialState:function(){return{likeInfo:{meLiked:!1,count:null},errorMessage:null}},componentDidMount:function(){var e=this;JiyoEvent.subscribe("object_like",function(t){t.uuid==e.props.obj.uuid&&(t.count&&(e.props.obj.like_count=t.count),e.forceUpdate())}),JiyoEvent.subscribe("object_unlike",function(t){t.uuid==e.props.obj.uuid&&(e.props.obj.like_count=t.count,e.forceUpdate())})},likeObject:function(){UserLikesManager.like(this.props.obj.uuid)},unlikeObject:function(){UserLikesManager.unlike(this.props.obj.uuid)},render:function(){var e=this,t=null;this.state.errorMessage&&(t=React.createElement("div",{className:"text-danger"},this.state.errorMessage));var n=React.createElement("a",{onClick:this.likeObject},React.createElement("span",{className:"likeGrey icon16",title:"Unlike"}));return UserLikesManager.hasLiked(e.props.obj.uuid)&&(n=React.createElement("a",{onClick:this.unlikeObject},React.createElement("span",{className:"likeRed icon16",title:"like"}))),React.createElement("div",null,React.createElement("div",null,n,React.createElement("span",{className:"likeCountSpan"},this.props.obj.like_count)),React.createElement("div",null,t))}});
var ArticleCard=React.createClass({displayName:"ArticleCard",handleImageLoad:function(){this.props.onArticleLoad(this)},handleImageError:function(){this.props.onArticleLoad(this)},handleArticleClick:function(){document.location.href=this.props.article.url},html_entity_decode:function(e){var a=Math.floor(1e5*Math.random()+1);$("body").append('<div id="random'+a+'"></div>'),$("#random"+a).html(e);var t=$("#random"+a).html();return $("#random"+a).remove(),t},render:function(){var e=this.props.article,a="";a="video"==e.content_type?React.createElement("span",{className:"articleVideo icon20"}):"audio"==e.content_type?React.createElement("span",{className:"articleAudio icon20"}):"image"==e.content_type?React.createElement("span",{className:"articleImage icon20"}):React.createElement("span",{className:"articleImage icon20"});var t="";return t=UserViewsManager.hasViewed(e.uuid)?React.createElement("span",{className:"articlesSocialMediaIconsSpace5 articleViewGreen icon16",title:"Views"}):React.createElement("span",{className:"articlesSocialMediaIconsSpace5 articleViewGrey icon16",title:"Views"}),e.title=this.html_entity_decode(e.title),React.createElement("div",{className:"article-discover-teaser invisible"},React.createElement("div",{className:"showTypeImg hidden "+e.content_type}),React.createElement("div",{className:"content animate-panel custom-panel"},React.createElement("div",{className:"artilce-teaser-panel"},React.createElement("div",{className:"panel-heading"},React.createElement("div",{className:"media clearfix"},React.createElement("a",{className:"pull-left",href:e.url},React.createElement("img",{src:e.author_image,alt:e.author_name})),React.createElement("div",{className:"media-body"},React.createElement("a",{className:"articlesTextCus",title:e.title,href:e.url},React.createElement(TextEllipsis,{text:e.title,maxlimit:"40"})),React.createElement("span",{className:"fontstyleNormal12"},React.createElement("a",{href:"/search?search_param=article&q="+e.author_name},e.author_name))))),React.createElement("div",{className:"panel-image midImage",style:{backgroundColor:e.teaser_color}},React.createElement("img",{src:e.image,onClick:this.handleArticleClick,alt:e.title,onLoad:this.handleImageLoad,onError:this.handleImageError,className:"img-responsive pointer"}),React.createElement("div",{className:"articlePlayIcon"},a,React.createElement("br",null),React.createElement("small",null,React.createElement("span",null,e.content_duration))),React.createElement("div",{className:"title"},React.createElement("a",{href:e.url}))),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"articlesSocialMediaIcons"},React.createElement("span",{className:"articlesSocialMediaIconsSpace20 icon16",title:"Views"},t,React.createElement("span",{className:"articleViewCount"},e.view_count)),React.createElement("span",{className:"articlesSocialMediaIconsSpace20 pointer",style:{display:"inline-table"},title:"Likes"},React.createElement(ContentLikeUnlike,{obj:e})),React.createElement("span",{title:"Comments pointer"},React.createElement("a",{href:e.url+"#comments"},React.createElement("span",{className:"articlesSocialMediaIconsSpace5 commentImg icon16",title:"Comments"})),React.createElement("span",{className:"fontstyleNormal13",style:{verticalAlign:"middle"}},e.comment_count)))))))}});
var DiscoverContentLoader=React.createClass({displayName:"DiscoverContentLoader",getInitialState:function(){return{container:null,page:0,gotItRendered:!1,loadingClass:"hidden",noMoreData:!1,articleList:[],loadedArticleCount:0,recentList:[],nodes:[]}},getDefaultProps:function(){return{search:"",containerName:"jiyoDiscoverContent",article_type:"article"}},articleLoaded:function(e){var t=e.getDOMNode(),a=this;this.state.loadedArticleCount++,this.state.recentList.push(t),this.state.nodes.push(t),this.state.loadedArticleCount<this.state.articleList.length||($("#"+a.props.containerName).masonry("addItems",this.state.recentList),$("#"+a.props.containerName).masonry({isFitWidth:!0}),this.setState({loadingClass:"hidden"}))},resetArticles:function(){var e=this;$("#"+e.props.containerName).masonry("remove",this.state.nodes),this.setState({recentList:[],articleList:[],noMoreData:!1,loadingClass:"hidden",gotItRendered:!1,page:0,nodes:[],loadedArticleCount:0}),this.loadMoreArticles()},loadMoreArticles:function(){var e=this,t=e.state.page;if(e.state.noMoreData)return void $("#throbber_container").addClass("hidden");if(""!=e.state.loadingClass&&!(e.state.recentList.length>0)){AppLogger.log("Page changes: "+t),e.setState({loadingClass:""});{$("#articleSort").val()}$("#header_search_bar").val(this.props.search),Api.getData("/content/article-list/"+t,{q:this.props.search,type:this.props.srch_param},function(a){0==e.state.articleList.length&&""==e.props.search&&e.state.articleList.push(React.createElement(DiscoverSpecialCard,{me:e.props.me,onTileLoad:e.articleLoaded}));for(var s=0;s<a.data.length;s++){var i=a.data[s];e.state.articleList.push(React.createElement(ArticleCard,{article:i,onArticleLoad:e.articleLoaded})),30==e.state.articleList.length&&e.state.articleList.push(React.createElement(RecommendUsersList,{onTileLoad:e.articleLoaded}))}0==a.data.length&&(e.state.noMoreData=!0,e.state.loadingClass="hidden"),e.state.gotItRendered=!1,JiyoEvent.subscribe("discover_content_uireload",function(t){t||(t=e.props.containerName),t==e.props.containerName&&$("#"+e.props.containerName).masonry({isFitWidth:!0})}),setTimeout(function(){e.state.gotItRendered||$("#"+e.props.containerName+" .discover-article-teaser").removeClass("invisible").addClass("animated fadeIn")},1e4),e.setState({page:t+1})})}},componentDidMount:function(){var e=this;$("#"+e.props.containerName).masonry({isFitWidth:!0}),$("#"+e.props.containerName).masonry("on","layoutComplete",function(){e.state.gotItRendered=!0,e.state.recentList.forEach(function(e){$(e).removeClass("invisible").addClass("fadeIn")}),e.state.recentList=[]}),e.loadMoreArticles(),$(window).scroll(function(){$(window).scrollTop();$(window).scrollTop()+$(window).height()+500>=$(document).height()&&e.loadMoreArticles()})},render:function(){return React.createElement("div",null,React.createElement("div",{className:"clearfix jiyoLife",id:this.props.containerName,style:{margin:"10px auto"}},this.state.articleList),React.createElement("div",{id:"throbber_container",className:this.state.loadingClass+" text-center",style:{paddingTop:"10px"}},React.createElement("span",{className:"throbber"})))}});
var HtmlDoshaResult=React.createClass({displayName:"HtmlDoshaResult",render:function(){var e=this.props.data.result,t=[];e.items.forEach(function(e){t.push(React.createElement("tr",null,React.createElement("td",null,e.name),React.createElement("td",null,e.score)))});var a=[],s=[];return e.dosha.forEach(function(e){a=[],e.characteristics.forEach(function(e){a.push(React.createElement("tr",null,React.createElement("td",null,e.name),React.createElement("td",null,e.info)))}),s.push(React.createElement("div",null,React.createElement("h3",null,e.name),React.createElement("p",null,e.description),React.createElement("table",{className:"table table-striped"},a)))}),React.createElement("div",null,React.createElement("img",{src:e.image,style:{width:"100%"}}),React.createElement("h2",null,"Your body Type is "+e.name),React.createElement("h3",null,"Your Score "),React.createElement("table",{className:"table table-striped"},t),s)}}),HtmlQuestionObject=React.createClass({displayName:"HtmlQuestionObject",getInitialState:function(){return{processing:!1}},handleAnswerSelect:function(e){this.props.parent.handleAnswer(e,this),this.setState({processing:!0})},updateQuestion:function(e,t){this.props.question=e,this.props.attempt=t,this.setState({processing:!1})},render:function(){var e=this.props.question,t=[],a=this;e.answers.forEach(function(e){var s="answer_"+e.id;t.push(React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:s},React.createElement("input",{type:"radio",id:s,onClick:a.handleAnswerSelect.bind(null,e.id),className:"input-control"})," ",e.text)))});var s=null;this.state.processing?s=React.createElement(LoadingIcon,null):(t.push(React.createElement("a",{className:"btn btn-default",href:"#home"},"Later")),s=React.createElement("div",null,React.createElement("h4",null,e.text),React.createElement("div",{className:"btn-group-vertical col-xs-12",role:"group"},t)));var n=this.props.attempt;return React.createElement("div",{className:"question-block clearfix"},React.createElement("div",{className:"progress"},React.createElement("div",{className:"progress-bar  progress-bar-success",role:"progressbar","aria-valuenow":n.progress,"aria-valuemin":"0","aria-valuemax":"100",style:{width:n.progress+"%"}},React.createElement("span",{className:"sr-only"},n.progress,"% Complete"))),s)}}),AssessmentListGroup=React.createClass({displayName:"AssessmentListGroup",render:function(){var e=[],t=this;return this.props.items.forEach(function(a){var s=t.props.baseUrl+a.id;e.push(React.createElement("a",{href:s,className:"list-group-item"},React.createElement("h4",{className:"list-group-item-heading"},a.title),React.createElement("p",{className:"list-group-item-text"},a.description)))}),React.createElement("div",{className:"list-group"},e)}}),AssessmentQuestionObject=React.createClass({displayName:"AssessmentQuestionObject",getInitialState:function(){return{processing:!1}},handleMultipleAnswer:function(e){for(var t=this,a={},s="",n="",r="",l="",c=[],i=1;e>=i;i++)l=document.getElementById("answer_"+i),l.checked&&(s=l.getAttribute("data-item"),n=l.getAttribute("data-answer"),r=l.getAttribute("data-attempt"),a={question_id:s,answer_id:n},c.push(a));t.props.parent.handleAssessmentAnswer(r,c,this)},handleAssessmentAnswer:function(e,t,a){for(var s=this,n=[],r=e,l=0;l<t.length;l++)responseVal={q:t[l].question_id,a:t[l].answer_id},n.push(responseVal);Api.postJSON("/qna/bulk-assessment-response",{attempt_id:r,response:n},function(t){1==t.success?s.navigate("#/quiz-result/"+e):$("#errorContainer").html(t.message)})},updateQuestion:function(e,t){this.props.question=e,this.props.attempt=t,this.setState({processing:!1})},handleAnswerSubmit:function(e){var t=$("#qna_submit_form").serializeToObject(),a=[];for(var s in t){var n=s.replace("q_",""),r=t[s];a.push({q:n,a:r})}var l={attempt_id:this.props.attempt.id,response:a};console.log(t,l),e.preventDefault(),e.stopPropagation();var c=this;return Api.postJSON("/qna/bulk-assessment-response",l,function(e){1==e.success?document.location.href="/#quiz-result/"+c.props.attempt.id:$("#errorContainer").html(e.message)}),!1},render:function(){var e=this.props.question,t=this.props.attempt,a=[],s="",n="",r=t.id,l=0;e.forEach(function(e){s=e.text,itemId=e.id,l++,a.push(React.createElement("div",{className:"col-lg-12 fontstyle16pxNormal",style:{"padding-left":"0"}},l,")  ",s)),e.answers.forEach(function(t){var s="answer_"+t.id;n=t.id,a.push(React.createElement("div",{className:"col-lg-3 radioBlock"},React.createElement("label",{htmlFor:s,className:"radio-inline"},React.createElement("input",{type:"radio",id:s,name:"q_"+e.id,value:n,className:"input-control question","data-item":itemId,"data-answer":n,"data-attempt":r})," ",t.text)))})});var c=null;return c=this.state.processing?React.createElement(LoadingIcon,null):React.createElement("div",null,React.createElement("fieldset",null,React.createElement("div",{className:"form-group"},a)),React.createElement("div",{className:"height10 clearfix"}),React.createElement("button",{style:{display:"table",margin:"20px auto"},className:"btn text-center orangeBtn"},"Save"),React.createElement("div",{id:"errorContainer"}),React.createElement("div",{className:"height10 clearfix"})),React.createElement("div",{className:"question-block clearfix"},React.createElement("div",{className:"headingDescription"},React.createElement("p",{style:{margin:"10px 0 10px"}},React.createElement("span",{id:"questionnaireSvg"}),React.createElement("h3",null,"Discover your Dosha Type")),React.createElement("p",null,"This part of the quiz gathers information about your basic nature—the way you were as a child or the basic patterns that have been true most of your life. If you developed an illness in childhood or as an adult, think of how things were for you before that illness. If more than one quality is applicable in each characteristic, choose the one the applies the most."),React.createElement("p",null,React.createElement("strong",null,"For fairly objective physical traits, your choice will usually be obvious. For mental traits and behavior, which are more subjective, you should answer according to how you have felt and acted most of your life, or at least in the past few years."))),React.createElement("p",null,React.createElement("b",null,"The Dosha Quiz")),React.createElement("form",{id:"qna_submit_form",onSubmit:this.handleAnswerSubmit},c))}}),AssessmentDoshaResult=React.createClass({displayName:"AssessmentDoshaResult",reTakeQuiz:function(){document.location.href="#quiz/1"},render:function(){$("html, body").animate({scrollTop:0},"slow");var e=this.props.data.result,t=[];e.items.forEach(function(e){t.push(React.createElement("tr",null,React.createElement("td",null,React.createElement("b",null,e.name,":")),React.createElement("td",null,e.score)))});var a=[],s=[];return e.dosha.forEach(function(e){a=[],e.characteristics.forEach(function(e){a.push(React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,e.name,":")),React.createElement("div",{className:"text-mute",style:{color:"#929497"}},e.info),React.createElement("br",null)))}),s.push(React.createElement("div",null,React.createElement("p",null,e.description),React.createElement("p",null,React.createElement("strong",null,e.name," Characteristics")),a))}),React.createElement("div",{className:"questionnaireDiv"},React.createElement("p",null,React.createElement("span",{id:"questionnaireSvg"}),React.createElement("h3",{style:{position:"relative",top:"-10px"}},"Dosha Quiz Results")),React.createElement("div",{className:"text-center"},React.createElement("div",{className:"fontstyle24pxBold"},"Your basic nature is"),React.createElement("img",{className:"DetailsDiv",src:e.image})),React.createElement("div",null,React.createElement("table",{border:"1",className:"table table-bordered",style:{width:"19%",margin:"0 auto"}},React.createElement("tr",null,React.createElement("th",{className:"colspan"},"Score"),React.createElement("th",{className:"emptyth"})),t),s),React.createElement("button",{style:{display:"table",margin:"20px auto"},className:"btn text-center orangeBtn",onClick:this.reTakeQuiz},"Retake the Quiz"))}}),QustionnaireCard=React.createClass({displayName:"QustionnaireCard",mixins:[ServerPostMixin],getInitialState:function(){return{}},componentDidMount:function(){Api.getData("/qna/assessment-list",{},function(e){console.log(e);for(var t=0;t<e.data.length;t++)"dosha_result"==e.data[t].result_rule_id&&$("#qna_start_link").attr("href","/#quiz/"+e.data[t].id)})},render:function(){return React.createElement("div",{className:"QustionnaireLoader pointer custom-panel"},React.createElement("a",{id:"qna_start_link",href:"#"},React.createElement("div",{className:"panel-heading"},React.createElement("span",{id:"questionnaireSvg"}),React.createElement("span",{className:"fontstyle16pxNormal",style:{position:"relative",top:"6px"}},"Discover your Dosha Type")),React.createElement("hr",null),React.createElement("div",{className:"panel-image midImage"},React.createElement("img",{src:"/assets/img/jiyo/qna/Cover-Image-Vata-Pitta-Kapha.png",className:"img-responsive pointer"})),React.createElement("div",{className:"panel-body"})))}});
var SimilarArticlesLoader=React.createClass({displayName:"SimilarArticlesLoader",getInitialState:function(){return{articleList:[]}},onLoad:function(t){$(".article-discover-teaser").removeClass("invisible")},componentDidMount:function(){var t=this;Api.getData("/content/similar-articles/"+this.props.article.id+"/"+this.props.article.genre,{},function(e){for(var a=0;a<e.data.length;a++){var i=e.data[a],r=React.createElement(ArticleCard,{onArticleLoad:t.onLoad,article:i});t.state.articleList.push(r)}t.setState({articleList:t.state.articleList})})},render:function(){var t=this,e="";return 0!=t.state.articleList.length&&(e=React.createElement("div",{className:"text-left colorBlack"},React.createElement("h4",null,"I am thinking you'll be interested in this."))),React.createElement("div",{className:"textCenter"},e,React.createElement("div",{className:"similar-container"},t.state.articleList))}});
var SocialFollow=React.createClass({displayName:"SocialFollow",render:function(){return React.createElement("div",null,React.createElement("div",{className:"InviteFriendsPanel InvitePanelForConnection custom-panel"},React.createElement("div",{className:"content"},React.createElement("div",{className:"artilce-teaser-panel",style:{padding:"10px",marginTop:"10px"}},React.createElement("div",{style:{padding:"0 0 5px 0"}},React.createElement("h4",{className:"text-center",style:{"margin-bottom":"18px"}},"Follow us on"),React.createElement("hr",{style:{margin:"0"}})),React.createElement("div",{className:"panel-body",style:{"text-align":"center"}},React.createElement("a",{title:"Facebook",href:"https://www.facebook.com/JiyoYourBetterHalf?fref=ts",target:"_blank",className:"btn btn-social-icon btn-facebook"},React.createElement("i",{className:"fa fa-facebook"})),React.createElement("a",{title:"Twitter",href:"https://twitter.com/jiyo4life",target:"_blank",className:"btn btn-social-icon btn-twitter",style:{margin:"0 10px 0 10px"}},React.createElement("i",{className:"fa fa-twitter"})),React.createElement("a",{title:"Instagram",href:"https://instagram.com/jiyo4life",target:"_blank",className:"btn btn-social-icon btn-instagram"},React.createElement("i",{className:"fa fa-instagram"})),React.createElement("a",{title:"Pinterest",href:"https://www.pinterest.com/jiyo4life/",target:"_blank",className:"btn btn-social-icon btn-pinterest",style:{margin:"0 0 0 10px"}},React.createElement("i",{className:"fa fa-pinterest"})))))))}});
var DiscoverSpecialCard=React.createClass({displayName:"DiscoverSpecialCard",getdefaultPops:function(){return{onTileLoad:null}},componentDidMount:function(){var e=this;e.props.onTileLoad&&e.props.onTileLoad(this)},childLoaded:function(e){$(e.getDOMNode()).removeClass("invisible")},render:function(){var e=this,a=React.createElement("div",null,React.createElement(QustionnaireCard,{onTileLoad:e.childLoaded})),i=React.createElement("div",null,React.createElement(SocialFollow,{onTileLoad:e.childLoaded}));return React.createElement("div",{className:"clearfix invisible userRecommendationTile"},i,React.createElement(InviteFriends,{me:e.props.me,onTileLoad:e.childLoaded}),React.createElement(RecommendUsers,{onTileLoad:e.childLoaded}),a)}});
var UserSearch=React.createClass({displayName:"UserSearch",mixins:[ServerPostMixin],getInitialState:function(){return{peopleList:null}},renderPeopleSearch:function(e){var t=e.public_status,a="";return null==t&&(a=""),React.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 col-lg-3"},React.createElement("div",{className:"user-info-teaser clearfix"},React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"/user/profile/"+e.id},React.createElement("img",{className:"media-object media-middle img-circle",src:e.profile_image_url,alt:e.profile_image_url,width:"32",height:"32"}))),React.createElement("div",{className:"media-heading"},React.createElement("span",null,React.createElement("span",null,React.createElement("a",{href:"/user/profile/"+e.id,className:"fontstyle16pxNormal"},React.createElement(TextEllipsis,{text:e.display_name,maxlimit:"20"})))),React.createElement("div",{className:"height20"}))))},componentDidMount:function(){var e=this;Api.getData("community/user-search",{q:this.props.search},function(t){e.state.peopleList=[];for(var a=0;a<t.data.length;a++){var l=t.data[a];item=e.renderPeopleSearch(l),e.state.peopleList.push(item)}e.forceUpdate()})},render:function(){return null==this.state.peopleList?React.createElement(LoadingIcon,null):0==this.state.peopleList.length?React.createElement("div",null,React.createElement("div",{className:"height10"}),React.createElement("div",{className:"panel panel-default emptypanel"},React.createElement("div",{className:"panel-body text-center"},"We don't have anyone by that name as yet.")),React.createElement("div",{className:"height10"})):React.createElement("div",{className:"media user-connection-teaser"},this.state.peopleList)}});
var JiyoPlusChannelCard=React.createClass({displayName:"JiyoPlusChannelCard",channelVideoClick:function(e){JiyoEvent.fire("showVideoModal",this.props.channel)},render:function(){var e=this.props.channel,a="col-xs-12 col-sm-12 col-md-12 col-lg-12 paddingLeftRight0",t=a,l=null;null!=e.video_url&&(l=React.createElement("span",{className:"play-live",onClick:this.channelVideoClick.bind(null,e)}));var c=React.createElement("div",{className:"minHeight650"},React.createElement("div",{className:"imageCus custom1",style:{position:"relative"}},React.createElement("img",{src:e.banner_url,className:"img-responsive imgAuto",alt:e.name}),React.createElement("span",{className:"Comingsoon-icon"}),React.createElement("span",null,l)),React.createElement("div",{className:"clearfix"}),React.createElement("hr",{style:{margin:"5px"}}),React.createElement("div",{className:"clearfix"}),React.createElement("div",{style:{padding:"0px 20px 20px 20px"}},React.createElement("div",{style:{fontSize:"20px",color:"#000000"}},e.name),React.createElement("div",{className:"clearfix"}),React.createElement("div",{style:{fontSize:"14px"}},React.createElement("a",{href:"#"},e.author_name)),React.createElement("div",{className:"height5"}),React.createElement("div",{style:{fontSize:"14px",color:"#666666"}},React.createElement("p",null,e.description)))),n=null;return null==e.broadcast?a="col-xs-12 col-sm-12 col-md-6 col-lg-6 paddingLeftRight0":(t="col-xs-12 col-sm-12 col-md-6 col-lg-6 paddingLeftRight0",n=React.createElement("div",{className:"col-md-6 col-lg-6 col-sm-12 col-xs-12 minHeight650",style:{backgroundColor:"#ffffff",padding:"20px"}},React.createElement("div",{className:"channel-image-container"},React.createElement("img",{src:e.broadcast.banner,className:"img-responsive imgAuto",alt:e.name}),React.createElement("div",{className:"channelCaption-Live"},"Live"),React.createElement("div",{className:"channelCaption hidden"},React.createElement("div",{style:{fontSize:"20px"}},e.name),React.createElement("div",null,e.author))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"height10"}),React.createElement("div",{style:{"text-align":"center"}},React.createElement("a",{href:"/broadcast",style:{backgroundColor:"#29b473",border:"none",color:"#ffffff",margin:"10px"},className:"btn btn-primary  btn-sm"},"Join Live Broadcast")),React.createElement("div",{className:"height10"}),React.createElement("div",{className:"clearfix"}))),t+=" plus-content-panel",React.createElement("div",{className:a,style:{"margin-bottom":"30px;"}},React.createElement("div",{className:t,style:{backgroundColor:"#ffffff",padding:"0px"}},c),React.createElement("div",null,n))}});
var JiyoPlusChannelLoader=React.createClass({displayName:"JiyoPlusChannelLoader",getInitialState:function(){return{channelList:[],noMoreData:!1}},loadChannelsList:function(){var e=this;Api.getData("/content/channels/",{},function(t){for(var n=0;n<t.data.length;n++){var a=t.data[n],l=React.createElement(JiyoPlusChannelCard,{channel:a});e.state.channelList.push(l)}e.setState({channelsList:e.state.channelsList}),0==t.data.length&&(e.state.noMoreData=!0)})},componentDidMount:function(){var e=this;e.loadChannelsList()},render:function(){var e=this;return 0==e.state.channelList.length?React.createElement(LoadingIndicator,null):React.createElement("div",null,React.createElement("div",{id:"jiyoplusChannelContainer"},e.state.channelList),React.createElement(JiyoPlusChannelPopup,null))}});
var JiyoPlusChannelPopup=React.createClass({displayName:"JiyoPlusChannelPopup",getInitialState:function(){return{channel:{name:"nothing",video_url:""}}},componentWillUnmount:function(){JiyoEvent.removeSubscribers("showVideoModal")},componentDidMount:function(){var e=this;JiyoEvent.subscribe("showVideoModal",function(a){e.setState({channel:a},function(){$("#channelsVideoModal").modal("show"),setTimeout(function(){var e=$(".videoWrapper").width(),a=9*e/16;$("#feat-video").css({width:e,height:a})},500)})}),$("#channelsVideoModal").on("hidden.bs.modal",function(a){e.setState({channel:{name:"",video_url:"/assets/img/loading.gif"}})})},render:function(){var e=this.state.channel,a="";return a=null!=e.video_url?React.createElement("div",{className:"videoWrapper"},React.createElement("iframe",{id:"feat-video",style:{border:"none"},src:e.video_url,frameborder:"0",allowfullscreen:!0})):React.createElement("div",null,React.createElement("img",{src:e.banner_url,className:"img-responsive imgAuto",alt:e.name})),React.createElement("div",{className:"modal fade JiyoDefaultModalWindow",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"false",id:"channelsVideoModal"},React.createElement("div",{className:"modal-dialog modal-lg-channel"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close btn btn-link",style:{outline:"0px"},"data-dismiss":"modal","aria-label":"Close"},React.createElement("i",{className:"ion-ios-close-empty",style:{"":"none",fontSize:"42px","line-height":"42px"}})),React.createElement("span",{className:"modal-title"},React.createElement("div",{className:"taskHeader"},e.name))),React.createElement("div",{className:"modal-body"},a))))}});
var ProfileActivityCard=React.createClass({displayName:"ProfileActivityCard",tileLoadHandler:function(){this.props.onTileLoad(this)},render:function(){var t=null,e=this,a=e.props.activity.card_type;switch(a){case"assessment":e.props.activity.task=e.props.activity.assessment,t=React.createElement(ProfileActivityTaskCard,{onTileLoad:e.tileLoadHandler,activity:e.props.activity});break;case"task":t=React.createElement(ProfileActivityTaskCard,{onTileLoad:e.tileLoadHandler,activity:e.props.activity});break;default:t=React.createElement("div",null,"Unknown Activity"+a)}return React.createElement("div",{id:e.props.activity.id,className:"clearfix activityTile invisible"},React.createElement("div",{className:"activity-body "+a},t))}});
var ProfileActivityFeed=React.createClass({displayName:"ProfileActivityFeed",getInitialState:function(){return{loadingClass:"hidden",activityMap:null,activityLoadCount:0,contentLoading:!1,loadedMap:{},recentList:[],dataFetchUrl:"",dirty:!0}},resetActivities:function(){var t=this;t.activityMap.length>0&&$("#"+t.props.contentType).masonry({isFitWidth:!0}),t.setState({recentList:[],activityMap:null,loadingClass:"hidden",activityLoadCount:0,contentLoading:!1,loadedMap:{},responseMetaData:{},dataFetchUrl:"",dirty:!0})},tileLoadHandler:function(t){var e=this,i=t.getDOMNode(),a=$(i).attr("id");"undefined"==typeof e.state.loadedMap[a]&&(e.state.loadedMap[a]=!0,e.state.activityLoadCount++,e.state.recentList.push(i),e.state.activityLoadCount==e.state.activityMap.length&&($("#"+e.props.contentType).masonry("addItems",e.state.recentList),$("#"+e.props.contentType).masonry("reloadItems",e.state.recentList),setTimeout(function(){$("#"+e.props.contentType).masonry({isFitWidth:!0})},300)))},loadMoreActivities:function(t){var e=this;return null==e.state.dataFetchUrl?void $("#"+e.state.contentType+" .loadingGif").hide():void(e.state.contentLoading||(e.state.contentLoading=!0,Api.getData(e.state.dataFetchUrl,{},function(i){null==e.state.activityMap&&(e.state.activityMap=[]);for(var a=0;a<i.data.length;a++){var s=i.data[a],n=React.createElement(ProfileActivityCard,{onTileLoad:e.tileLoadHandler,activity:s});e.state.activityMap.push(n)}e.state.dirty=!0,$("#"+e.state.contentType+" .loadingGif").hide(),e.setState({dataFetchUrl:i.meta.next_url}),t&&t()})))},componentDidMount:function(){var t=this;t.state.dataFetchUrl="jiyoActivityFeed"==this.props.contentType?this.props.user.id==this.props.me.id?"/user/feed/":"/user/public-feed/"+this.props.user.id:"/user/community-feed/",JiyoEvent.subscribe("feed_reload",function(e){t.props.contentType==e&&null!=t.state.activityMap&&0!=t.state.dirty&&0!=t.state.activityMap.length&&(t.state.dirty=!1,$("#"+t.props.contentType).masonry({isFitWidth:!0}))}),JiyoEvent.subscribe("feed_item_delete",function(e){var i=e.actId,a=e.uuid;Api.postData("/user/delete-activity",{uuid:a},function(e){if(e.success){for(var a=0;a<t.state.activityMap.length;a++){var s=t.state.activityMap[a];if(s.props.activity.id==i){t.state.activityMap.splice(a,1);break}}$("#jiyoActivityFeed").masonry("remove",[$("#"+i)]),t.forceUpdate(function(e){$("#"+t.props.contentType).masonry({isFitWidth:!0})})}else alert(e.message)}),console.log("removing activity",e)}),t.loadMoreActivities(function(){0!=t.state.activityMap.length&&($("#"+t.props.contentType).masonry({isFitWidth:!0,isAnimated:!1,transitionDuration:0,animationOptions:{duration:750,easing:"linear",queue:!1}}),$("#"+t.props.contentType).masonry("on","layoutComplete",function(){t.state.contentLoading=!1,t.state.recentList=[],$("#"+t.props.contentType+" .activityTile.invisible").hide().removeClass("invisible").fadeIn()}))}),$(window).scroll(function(){null!=t.state.dataFetchUrl&&$(window).scrollTop()==$(document).height()-$(window).height()&&($("#"+t.state.contentType+" .loadingGif").show(),t.loadMoreActivities())})},childLoaded:function(t){$(t.getDOMNode()).removeClass("invisible")},getNoDataMessage:function(){var t=this.props.user.display_name+" hasn't added any bits to the Journey. It would be nice if you shared bits with your friend.";return this.props.me.id==this.props.user.id&&"jiyoActivityFeed"==this.props.contentType?React.createElement("div",{className:"col-md-9 col-lg-9 col-sm-12 col-xs-12 clearfix removePadding pull-right"},React.createElement(DownloadAppWidget,null)):this.props.me.id!==this.props.user.id?React.createElement("div",{className:"col-md-12 col-lg-12 col-sm-12 col-xs-12"},React.createElement("div",{className:"jumbotron"},React.createElement("h3",null,t))):React.createElement("div",{className:"col-md-12 col-lg-12 col-sm-12 col-xs-12"},React.createElement("div",{className:"col-md-3 col-lg-3 col-sm-3 col-xs-12"},React.createElement(RecommendUsers,{onTileLoad:this.childLoaded})),React.createElement("div",{className:"jumbotron col-md-9 col-lg-9 col-sm-9 col-xs-12"},React.createElement("h3",null,"Connect with community to see their journey on Jiyo")))},getMyDayWidget:function(){if(this.props.me.id!=this.props.user.id)return null;if("jiyoActivityFeed"!=this.props.contentType)return null;var t="activityTile";return this.state.activityMap&&0==this.state.activityMap.length&&(t="col-md-3 col-lg-3 col-xs-12 col-sm-12 myDayTileInitial activityTile"),React.createElement("div",{className:t,style:{margin:"0 17px 20px 17px"}},React.createElement("div",{className:"activty-body defaultPointer"},React.createElement(UserMyDayWidget,{me:this.props.me,user:this.props.user,allPendingTasks:"YES"})))},render:function(){var t=null,t=null,e="row";null==this.state.activityMap?t=null:0==this.state.activityMap.length?t=this.getNoDataMessage():(e="clearfix",t=this.state.activityMap);var i="hidden";return null==this.state.dataFetchUrl&&(i=""),React.createElement("div",null,React.createElement("div",{className:e,id:this.props.contentType},this.getMyDayWidget(),t),React.createElement("div",{className:"text-center"},React.createElement("img",{src:"/assets/img/loading.gif",className:"loadingGif",width:"30",height:"30",style:{display:"none"}}),React.createElement("p",{className:"loadNoMore "+i,style:{"padding-bottom":"20px"}},"Record your bits and continue your journey")))}});
var ProfileActivityModalPopup=React.createClass({displayName:"ProfileActivityModalPopup",getInitialState:function(){return{obj:null,childKey:null,errorMessage:null,item:{content:""}}},componentDidMount:function(){var e=this;JiyoEvent.subscribe("showPageModal",function(t){e.setState(t),$("#activityDetailModal").modal("show")}),JiyoEvent.subscribe("report_popup_open",function(e){$("#activityDetailModal").modal("hide")}),$("#activityDetailModal").on("hidden.bs.modal",function(t){e.setState({obj:null})})},render:function(){var e=(this.state.item,this.state.obj),t=null,a=[],c=[],l="",i=null;""!=e&&(l=l.text),this.state.childKey&&e&&(t=e[this.state.childKey]),t||(t={content_list:[]}),t.view_count=0;var o=!0;"media"==this.state.childKey?a.push(React.createElement("img",{className:"img-responsive",id:"userImage",onLoad:this.handleAssetLoad,onError:this.handleAssetError,src:t.cdn_url})):"task"==this.state.childKey&&(t.content_list.forEach(function(e){switch(e.type){case"image":""!=e.content&&(o=!1,c.push(React.createElement("div",{className:"imageContent"},React.createElement("img",{src:e.content,className:"img-responsive imgContentSrc",onLoad:this.handleAssetLoad,onError:this.handleAssetError}),React.createElement("br",null))));break;case"audio":""!=e.content&&(o=!1,c.push(React.createElement("div",{className:"audioVideoContent"},React.createElement("audio",{controls:"controls",style:{"max-width":"100%"}},React.createElement("source",{src:e.content,type:"audio/mpeg"}),"Your browser does not support the audio element."),React.createElement("br",null))));break;case"video":""!=e.content&&(o=!1,c.push(React.createElement("div",{className:"taskVideo audioVideoContent"},React.createElement("video",{controls:"controls",id:"taskVideo"},React.createElement("source",{src:e.content,type:"video/mp4"}),"Your browser does not support HTML5 video."),React.createElement("br",null))));break;case"text":""!=e.content&&(o=!1,c.push(React.createElement("div",{className:"cover-text"},e.content,React.createElement("br",null))));break;default:c.push(React.createElement("div",{className:"cover-image"}))}}),a.push(c));var n="Title",i="",s="comment Area";return null!=e&&(n=React.createElement(ActivityHeadingSection,{obj:e,textLimit:"100"}),s=React.createElement(ProfileActivityActionWidget,{obj:t,hideViewCount:"true"}),i=o?React.createElement("div",null,React.createElement(ActivityFeedbackSection,{obj:e,width:50,height:50})):React.createElement("div",null,React.createElement(ActivityFeedbackSection,{obj:e,width:30,height:30}))),React.createElement("div",{className:"modal fade JiyoDefaultModalWindow",id:"myModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"false",id:"activityDetailModal"},React.createElement("div",{className:"modal-dialog modal-lg"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close btn btn-link","data-dismiss":"modal","aria-label":"Close"},React.createElement("i",{className:"ion-ios-close-empty"})),React.createElement("span",{className:"modal-title"},React.createElement("div",{className:"taskHeader"},n))),React.createElement("div",{className:"modal-body row"},React.createElement("div",{className:"col-md-6"},a,i),React.createElement("div",{className:"col-md-6"},s)))))}});
var ProfileActivityPanel=React.createClass({displayName:"ProfileActivityPanel",activityLoad:function(){JiyoEvent.fire("feed_reload","jiyoActivityFeed")},communityLoad:function(){JiyoEvent.fire("feed_reload","jiyoCommunityFeed")},render:function(){return this.props.me.id!=this.props.user.id?React.createElement("div",{className:"col-md-12 col-sm-12 col-lg-12 col-xs-12"},React.createElement(ProfileActivityFeed,{contentType:"jiyoActivityFeed",me:this.props.me,user:this.props.user})):React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs jiyoProfileSubTab",role:"tablist",style:{}},React.createElement("li",{role:"presentation",className:"active someClass"},React.createElement("a",{href:"#home",id:"meLink",onClick:this.activityLoad,"aria-controls":"home",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"activityImage"}),"Me")),React.createElement("li",{role:"presentation",className:"someClass"},React.createElement("a",{href:"#profile",id:"weLink",onClick:this.communityLoad,"aria-controls":"profile",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"communityImage"}),"We"))),React.createElement("div",{className:"tab-content"},React.createElement("div",{role:"tabpanel",className:"tab-pane active",id:"home"},React.createElement(ProfileActivityFeed,{me:this.props.me,user:this.props.user,contentType:"jiyoActivityFeed"})),React.createElement("div",{role:"tabpanel",className:"tab-pane",id:"profile"},React.createElement(ProfileActivityFeed,{me:this.props.me,user:this.props.user,contentType:"jiyoCommunityFeed"}))))}});
var ActivityAuthorSection=React.createClass({displayName:"ActivityAuthorSection",mixins:[HandleAssetLoadMixin],render:function(){var e=this.props.obj;return React.createElement("div",null,React.createElement("div",{className:"taskText"},React.createElement("a",{href:"#"},e.text)),React.createElement("div",{className:"media-left"},React.createElement("img",{src:e.task.author.image})),React.createElement("div",{className:"media-body"},e.task.author.name))}}),ActivityHeadingSection=React.createClass({displayName:"ActivityHeadingSection",mixins:[HandleAssetLoadMixin],render:function(){var e=this.props.obj;null==e&&(e={},e.text="",e.task={},e.task.owner_info={},e.task.owner_info.name="",e.task.title=""),name="You",name=e.task.owner_info.name,imgClass="",paramObj.me.id==e.task.owner_info.id&&(name="You",imgClass="hidden");var a=React.createElement("img",{src:e.task.category_info.image,width:"15",height:"15"});return React.createElement("div",{className:"media"},React.createElement("div",{className:"media-left "+imgClass},React.createElement("a",{className:"media-left",href:"/user/profile/"+e.user_id},React.createElement("img",{src:e.task.owner_info.image,className:"img-100px-circle"}))),React.createElement("div",{className:"media-body"},React.createElement("div",{className:"completedLine"},React.createElement("span",{className:"fontstyle16pxNormal"},name)," ",React.createElement("span",{className:"fontstyleGrey12"},"Completed")),React.createElement("div",{className:"iconLine"},React.createElement("span",{style:{marginRight:"5px"}},a),React.createElement("span",{className:"fontstyleGrey12"},React.createElement("span",{style:{display:"inline-table"}},React.createElement("a",{href:e.task.task_url,className:"taskUrl"},React.createElement(TextEllipsis,{text:e.task.title,maxlimit:this.props.textLimit}))))),React.createElement("div",{className:"headertimeLine"},React.createElement("span",{className:"headertime"},jiyoFromNow(e.utc)))))}}),ActivityFeedbackSection=React.createClass({displayName:"ActivityFeedbackSection",mixins:[HandleAssetLoadMixin],render:function(){var e=this.props.obj;null==e&&(e={},e.task={},e.task.task_feedback="");var a=(this.props.activity,""),t="",s="";switch(e.task.task_feedback){case"0":t=React.createElement("span",{className:"hateFeedback",style:{width:this.props.width,height:this.props.height}}),s=React.createElement("span",null,"Hate"),a=e.task.feedback_color;break;case"1":t=React.createElement("span",{className:"sadFeedback",style:{width:this.props.width,height:this.props.height}}),s=React.createElement("span",null,"Sad"),a=e.task.feedback_color;break;case"2":t=React.createElement("span",{className:"neutralFeedback",style:{width:this.props.width,height:this.props.height}}),s=React.createElement("span",null,"Neutral"),a=e.task.feedback_color;break;case"3":t=React.createElement("span",{className:"happyFeedback",style:{width:this.props.width,height:this.props.height}}),s=React.createElement("span",null,"Happy"),a=e.task.feedback_color;break;case"4":t=React.createElement("span",{className:"loveFeedback",style:{width:this.props.width,height:this.props.height}}),s=React.createElement("span",null,"Love"),a=e.task.feedback_color;break;default:t=React.createElement("span",{className:"happyFeedback",style:{width:this.props.width,height:this.props.height}}),s=React.createElement("span",null,"Happy"),a=e.task.feedback_color}var c="",i=3;return 30==this.props.width&&(c="hidden",i=0),React.createElement("div",{className:"feedbackEmotion",style:{backgroundColor:a}},React.createElement("div",{className:"media"},React.createElement("div",{className:"media-left"},t),React.createElement("div",{className:"media-body "},React.createElement("span",{className:"task_feedbackText "+c},s,React.createElement("br",null)),React.createElement("span",{className:"feebackMsg",style:{top:i+"px"}},e.task.feedback_message))," "))}});
var ProfileActivityActionWidget=React.createClass({displayName:"ProfileActivityActionWidget",getInitialState:function(){return{errorMessage:null}},componentDidMount:function(){var e=this;JiyoEvent.subscribe("comment_count_change",function(t){e.props.obj.comment_count=t.count,e.forceUpdate()})},render:function(){var e=this.props.obj;"undefined"==typeof e.comment_count&&(e.comment_count=0);var t="hidden";return null!=this.state.errorMessage&&(t=""),React.createElement("div",{id:"acitivityInteractionComponent"},React.createElement("div",{className:"articlesSocialMediaIcons"},React.createElement("span",{className:"articlesSocialMediaIconsSpace20 pointer",style:{display:"inline-table"},title:"Likes"},React.createElement(ContentLikeUnlike,{obj:e})),React.createElement("span",{title:"Comments"},React.createElement("a",{href:"#"},React.createElement("span",{className:"articlesSocialMediaIconsSpace5 commentImg icon16",title:"Comments"})),React.createElement("span",{className:"commentCount"},e.comment_count))),React.createElement("div",{className:"commentsPanel arrow_box"},React.createElement(ContentCommentWidget,{obj:e})))}});
var ProfileActivityTaskCard=React.createClass({displayName:"ProfileActivityTaskCard",mixins:[HandleAssetLoadMixin],handleTaskClick:function(){return JiyoEvent.fire("showPageModal",{obj:this.props.activity,childKey:"task"}),!0},renderVideo:function(e){return React.createElement("div",{className:"play-container"},React.createElement("div",{className:"play"},React.createElement("img",{height:"40",width:"40",src:"/assets/img/svg/home_play_icon.svg"})),React.createElement("img",{onLoad:this.props.onTileLoad,onError:this.props.onTileLoad,className:"img-responsive",src:e.preview}))},renderAudio:function(e){var t=280,a=152*t/645;return React.createElement("div",{className:"play-container audio text-center",style:{padding:"10px 0px"}},React.createElement("div",{className:"play"},React.createElement("img",{height:"40",width:"40",src:"/assets/img/svg/home_play_icon.svg"})),React.createElement("img",{onLoad:this.props.onTileLoad,onError:this.props.onTileLoad,src:"/assets/img/ui/task_audio.png",style:{width:t+"px",height:a+"px"}}))},renderImage:function(e){return React.createElement("div",null,React.createElement("div",{className:"cover-image"},React.createElement("img",{onLoad:this.props.onTileLoad,onError:this.props.onTileLoad,src:e.content,className:"img-responsive"})))},componentDidMount:function(){var e=this;JiyoEvent.subscribe("comment_count_change",function(t){t.uuid==e.props.activity.task.uuid&&(e.props.activity.task.comment_count=t.count,e.forceUpdate())})},deleteActivity:function(e,t){confirm("Do you really want to remove this bit?")&&JiyoEvent.fire("feed_item_delete",{actId:t,uuid:e})},render:function(){var e=this,t=this.props.activity,a=[],i=[],n=[],c=null,s=this.props.activity;"completed"==t.action_type&&i.push(React.createElement("div",{className:"taskHeader"},React.createElement(ActivityHeadingSection,{obj:s,textLimit:"30"}))),n.push(React.createElement("div",null,React.createElement(ActivityAuthorSection,{obj:s}))),feedbackUI=null;var o=!0,l=!1;t.task.content_list.forEach(function(e){var t={url:e.content};switch(e.type){case"image":""!=e.content&&(o=!1,a.push(this.renderImage(e)),l=!0);break;case"audio":""!=e.content&&(o=!1,a.push(this.renderAudio(t)),l=!0);break;case"video":""!=e.content&&(o=!1,a.push(this.renderVideo(e)),l=!0);break;case"text":""!=e.content&&(o=!1,a.push(React.createElement("div",{className:"cover-image",style:{margin:"10px"}},e.content)))}},this),l||setTimeout(function(){e.props.onTileLoad()},25),c=o?React.createElement("div",null,React.createElement(ActivityFeedbackSection,{obj:s,width:50,height:50})):React.createElement("div",null,React.createElement(ActivityFeedbackSection,{obj:s,width:30,height:30}));var r="";return t.user_id!=paramObj.me.id&&(r="hidden"),React.createElement("div",null,React.createElement("div",{className:"panel-heading defaultPointer"}," ",i," "),React.createElement("div",{className:"panel-body",onClick:this.handleTaskClick},a,c),React.createElement("div",{className:"panel-footer",style:{position:"relative",cursor:"default"}},React.createElement("div",{className:"articlesSocialMediaIcons"},React.createElement("span",{className:"articlesSocialMediaIconsSpace20",style:{display:"inline-table",cursor:"pointer"},title:"Likes"},React.createElement(ContentLikeUnlike,{obj:s.task})),React.createElement("span",{title:"Comments"},React.createElement("span",{className:"articlesSocialMediaIconsSpace5 commentImg icon16",title:"Comments"}),React.createElement("span",{style:{"vertical-align":"middle","font-size":"13px"}},s.task.comment_count)),React.createElement("div",{className:r+" dropup  pull-right"},React.createElement("a",{className:"btn btn-link dropdown-toggle",title:"Delete Activity","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu dropdown-menu-right",style:{position:"absolute"},"aria-labelledby":"dropdownMenu2"},React.createElement("li",null,React.createElement("button",{className:"btn btn-link",onClick:this.deleteActivity.bind(null,t.act_uuid,t.id)},"Delete Bit Feedback")))))))}});
var ProfileTaskCard=React.createClass({displayName:"ProfileTaskCard",mixins:[ServerPostMixin],getInitialState:function(){return{showFull:!1,program:{my_day:null,myDayFetchProgress:!0}}},handleTaskClick:function(e){JiyoEvent.fire("showPageTaskModal",{task_data:this.props.task})},sendToTaskClick:function(e){JiyoEvent.fire("showPageSendTaskModal",{send_task_data:this.props.task})},componentDidMount:function(){},render:function(){var e={},a=this.props.task,t=a.scheduled_at,s=moment.utc(t,"yyyy-mm-dd HH:mm:ss").toDate(),n=(moment().diff(s),a.description,a.status),c=a.time_status,l="fontstyleNormal13",r=moment(s).format("hh:mm a"),m=a.sender,i="",o="";0==n||1==n||3==n?(c="past")?(e=React.createElement("span",{className:"alarmred icon16"}),l="fontstyleGrey13"):(c="future")?(e=React.createElement("span",{className:"alarmGrey icon16"}),l="fontstyleGrey13"):(e=React.createElement("span",{className:"alarmBlue icon16"}),l="fontstyleGrey13"):2==n?e=React.createElement("span",{className:"alarmReject icon16"}):4==n?e=React.createElement("span",{className:"alarmGreen icon16"}):5==n&&(e=React.createElement("span",{className:"alarmred icon16"})),statusIcon=React.createElement("span",{className:a.category.image_key}),"future"==c&&(statusIcon=React.createElement("span",{className:a.category.image_key}));var d="",p="";null==m?(i="",d="hidden",p=0):(i=m.name,o=m.id,p=-43);var u=a.share_url;return(a.status<4&&paramObj.me.id<30||gAppConfig.envVal<gAppConfig.ENV_PROD)&&(u="/user/give-feedback/"+a.id),React.createElement("div",{className:"jiyo-task-item clearfix"},React.createElement("span",{className:"statusIcons defaultPointer"},statusIcon),React.createElement("a",{href:u,className:"statusText"},React.createElement("span",{className:l},React.createElement("span",{className:"taskNameEllipsis"},React.createElement(TextEllipsis,{text:a.title,maxlimit:"20"})))),React.createElement("div",{className:d+" sharedBitContent"},React.createElement("a",{href:"/user/profile/"+o,className:"primaryColor"},i)," shared a bit"),React.createElement("span",{className:"pull-right defaultPointer",style:{"margin-top":p+"px"}},React.createElement("span",{className:"text-center bellAlign"},e),React.createElement("br",null),React.createElement("span",{className:"fontstyle9px text-center"},r)),React.createElement("div",{className:"subdivider"}),React.createElement("div",{className:"height20"}))}});
var TaskDetailComponent=React.createClass({displayName:"TaskDetailComponent",getInitialState:function(){return{task_data:null}},componentDidMount:function(){var e=this;JiyoEvent.subscribe("showPageTaskModal",function(t){e.setState(t),$("#taskDetailModal").modal("show")})},render:function(){var e={};e=this.state.task_data;var t="",a=[];null!=e&&(t=e.title,a=e.content,a.type=e.type);var s=[],n=[];return a.forEach(function(e){switch(e.type){case"image":n.push(React.createElement("div",{className:"col-md-6"},React.createElement("img",{src:e.content,className:"img-responsive",onLoad:this.handleImageLoad,onError:this.handleImageError,style:{width:"100%"}}),React.createElement("br",null)));break;case"audio":n.push(React.createElement("div",{className:"col-md-6"},React.createElement("audio",{controls:"controls",style:{width:"100%"}},React.createElement("source",{src:e.content,type:"audio/mpeg"}),"Your browser does not support the audio element."),React.createElement("br",null)));break;case"video":n.push(React.createElement("div",{className:"col-md-6 cover-image js-video [vimeo, widescreen]"},React.createElement("video",{controls:"controls",width:"436",height:"300"},React.createElement("source",{src:e.content,type:"video/mp4"}),"Your browser does not support HTML5 video."),React.createElement("br",null)));break;case"text":n.push(React.createElement("div",{className:"col-md-6"},e.content,React.createElement("br",null)));break;default:n.push(React.createElement("div",null,"We haven’t got anything to work with as yet!"))}}),s.push(n),React.createElement("div",{className:"modal fade lens-modal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"false",id:"taskDetailModal"},React.createElement("button",{type:"button",className:"close lens-modal-close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"X")),React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("h4",{className:"modal-title"},t)),React.createElement("div",{className:"modal-body row"},React.createElement("div",null,s))))}}),SendTaskDetailComponent=React.createClass({displayName:"SendTaskDetailComponent",mixins:[ServerPostMixin],getInitialState:function(){return{send_task_data:null,friends:[],dataFetched:!1}},sendhandleClick:function(e){var t=$("li.select2-search-choice div").map(function(){return void 0!=$(this).attr("id")?$(this).attr("id"):void 0}).get();return t=t.join(","),0==t.length?void alert("Please select at least one user to send task"):void Api.postData("/user/send-task",{task_id:e,friend_list:t},function(e){e.success?(alert("Your request sent successfully"),$(".select2-container").select2("val",""),$("#SendTaskDetailModal").modal("hide")):(alert("Failed to process your request"),$(".select2-container").select2("val",""),$("#SendTaskDetailModal").modal("hide"))})},resethandleClick:function(){$(".select2-container").select2("val","")},fetchUserData:function(e){var t=this;Api.getData(e,{user_id:this.props.user.id},function(e){if(e.data){var a=t.state;a.friends=e.data,a.friends&&(a.dataFetched=!0,t.setState(a))}})},componentDidMount:function(){var e=this;e.fetchUserData("/community/user-friends"),JiyoEvent.subscribe("showPageSendTaskModal",function(t){e.setState(t),$("#SendTaskDetailModal").modal("show"),$(".js-source-states-2").select2()})},render:function(){var e={};e=this.state.send_task_data;var t=this,a=[],s=0;t.state.friends.forEach(function(e){s++,a.push(React.createElement("option",{value:e.id},e.display_name))}),0==a.length&&(a=React.createElement("div",null,"No Results"));var n="",i="";return t.state.item&&(n=t.state.item.title,i=t.state.item.id),React.createElement("div",{className:"modal fade lens-modal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"false",id:"SendTaskDetailModal"},React.createElement("button",{type:"button",className:"close lens-modal-close","data-dismiss":"modal","aria-label":"Close"},React.createElement("span",{"aria-hidden":"true"},"X")),React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("h4",{className:"modal-title"},n)),React.createElement("div",{className:"modal-body row"},React.createElement("div",null,React.createElement("h5",{className:"m-t-md"},"Select Users")),React.createElement("div",{className:"hr-line-dashed"}),React.createElement("div",null,React.createElement("select",{className:"js-source-states-2",multiple:"multiple",style:{width:"100%"}},a)),React.createElement("div",{className:"hr-line-dashed"}),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"pull-right"},React.createElement("button",{type:"reset",onClick:this.resethandleClick,className:"btn btn-default",style:{"margin-right":"5px"}},"Reset"),React.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.sendhandleClick.bind(null,i)},"Send"))))))}}),UserMyDayWidget=React.createClass({displayName:"UserMyDayWidget",mixins:[ServerPostMixin],getDefaultProps:function(){return{allPendingTasks:"NO"}},getInitialState:function(){return{program:{my_day:null,myDayFetchProgress:!0},activityClass:""}},taskProgressUpdate:function(e){$(e.target).siblings(".alert").html("Completed "+e.target.value+"%")},componentDidMount:function(){var e=this.state,t=this;"YES"==this.props.allPendingTasks?Api.getData("/user/pending-tasks/"+moment(new Date).format("YYYY-MM-DD"),{},function(a){e.program.my_day=a.data,e.program.myDayFetchProgress=!1,t.setState(e),t.props.loadCallback&&t.props.loadCallback(t)}):Api.getData("/user/task-history/"+moment(new Date).format("YYYY-MM-DD"),{},function(a){e.program.my_day=a.data,e.program.myDayFetchProgress=!1,t.setState(e),t.props.loadCallback&&t.props.loadCallback(t)})},fetchNextDay:function(e){var t=this.state.program.my_day.date,a=this.state,s=this;a.program.myDayFetchProgress=!0,s.setState(a),Api.getData("/user/task-history/"+moment(t).add(1,"d").format("YYYY-MM-DD"),{},function(e){a.program.my_day=e.data,a.program.my_day.date=e.meta.date,a.program.myDayFetchProgress=!1,s.setState(a)}),$("#taskNotificationPopup").addClass("open")},fetchPreviousDay:function(){var e=this.state.program.my_day.date,t=this.state,a=this;t.program.myDayFetchProgress=!0,a.setState(t),Api.getData("/user/task-history/"+moment(e).add(-1,"d").format("YYYY-MM-DD"),{},function(e){t.program.my_day=e.data,t.program.my_day.date=e.meta.date,t.program.myDayFetchProgress=!1,a.setState(t)}),$("#taskNotificationPopup").addClass("open")},renderMyDay:function(){var e=this.state,t="",a=!1,s=!1;if(this.state.program.myDayFetchProgress?(a=!0,s=!0):t+=" invisible",e.program.my_day&&(null==e.program.my_day.prev_day&&(s=!0),null==e.program.my_day.next_day&&(a=!0)),null==e.program.my_day)return React.createElement(LoadingIcon,null);var n=[];0==e.program.my_day.length?n=React.createElement("div",{style:{padding:"20px"}},"We haven’t got anything to work with as yet!"):e.program.my_day.forEach(function(e){n.push(React.createElement(ProfileTaskCard,{task:e}))});var i="",l="",c=moment(e.program.my_day.date).format("DD-MM-YYYY");return moment(e.program.my_day.date).format("DD-MM-YYYY")==moment().format("DD-MM-YYYY")&&(c="Today",i="invisible"),"YES"==this.props.allPendingTasks&&(c="Bits"),React.createElement("div",null,React.createElement("div",{className:"pull-left "+l},React.createElement("div",{className:"my_day_left_arrow",onClick:this.fetchPreviousDay})),React.createElement("img",{src:"/assets/img/loading.gif",className:t,style:{width:"30px"}}),React.createElement("span",{className:"fontstyle16pxBold"},React.createElement("span",{className:"mydayBlack icon20"})," ",c),React.createElement("div",{className:"pull-right "+i},React.createElement("div",{className:"my_day_right_arrow",onClick:this.fetchNextDay})),React.createElement("div",{className:"divider"}),React.createElement("div",{className:"task-list-container"},n))},render:function(){var e=this,t="",a=!1,s=!1;return this.state.program.myDayFetchProgress?(a=!0,s=!0):t+=" invisible",this.state.program.my_day&&(null==this.state.program.my_day.prev_day&&(s=!0),null==this.state.program.my_day.next_day&&(a=!0)),React.createElement("div",{id:"me-program-my-day"},React.createElement("div",{id:"my-day-body"},e.renderMyDay()))}}),UserTaskNoticationUpdater=React.createClass({displayName:"UserTaskNoticationUpdater",getInitialState:function(){return{count:0,task_popup:!1,notifications:null,filterType:"all",activeClass:""}},fetchNotificationCount:function(){var e=this;Api.getData("/community/notification-count",{},function(t){e.setState({count:t.data})})},updateNotifications:function(){var e=this;Api.getData("/community/notifications",{},function(t){e.setState({notifications:t.data}),JiyoEvent.fire("update_notification",t.data.length)})},handleTaskNotificationClick:function(e){var t=!this.state.task_popup;this.setState({task_popup:t}),e.stopPropagation(),console.log("have to open the popup"),$("#taskNotificationPopup").hasClass("open")&&$(".taskNotificationDiv").addClass("active"),$("body").click(function(){$(".taskNotificationDiv").find(".active")&&$(".taskNotificationDiv").removeClass("active")})},componentDidMount:function(){this.updateNotifications();var e=this;setInterval(function(){e.fetchNotificationCount()},3e4),e.fetchNotificationCount(),JiyoEvent.subscribe("update_notification",function(t){t?e.setState({count:t}):e.fetchNotificationCount()}),JiyoEvent.subscribe("user_2_user_connection",function(){e.fetchNotificationCount()}),JiyoEvent.subscribe("notification_click",function(){})},renderTaskNotification:function(e){var t=moment.utc(e.task_utc,"X").toDate();return t=moment(t).format("HH:mm"),React.createElement("div",{className:"media taskRequest"},React.createElement("div",{className:"pull-right"},React.createElement("span",{className:"time-info"},t)),React.createElement("div",{className:"pull-left "},React.createElement("div",{className:"text-center task-number"},React.createElement("span",null,"Task"),React.createElement("br",null),React.createElement("span",null,e.task_number))),React.createElement("div",{className:"media-heading fontStyle15 tasktext-heading"},React.createElement("a",{href:"/user/profile#"+e.task_id},e.title)),React.createElement("div",{className:"media-body fontStyle22 taskText-body"},e.brief))},filterNotifications:function(e){this.setState({filterType:e})},render:function(){var e=this;if(null==e.state.notifications)return React.createElement("img",{src:""});for(var t=e.state.notifications,a=[],s=[],n=[],i=0,l=0;l<t.length;l++){var c=t[l],o=null,r=s,m=this.state.filterType;"all"==m&&(m=c.type),"task_notification"==c.type&&(o=this.renderTaskNotification(c),r=n,i++),c.type===m&&(r.length<3&&r.push(React.createElement("li",{className:"list-group-item"},o)),a.push(React.createElement("li",{className:"list-group-item col-md-6"},o)))}var d={task_notification:"Tasks ("+i+")"},u=[],e=this;for(var p in d){var h=d[p];cls="",this.state.filterType==p&&(cls="active"),u.push(React.createElement("button",{className:"btn btn-link custom-notification "+cls,onClick:this.filterNotifications.bind(null,p)},h))}var y="";0==n.length&&(y="hidden");var f="";return 0==e.state.count&&(f="hidden"),React.createElement("span",null,React.createElement("div",null,React.createElement("li",{id:"taskNotificationPopup",className:"dropdown"},React.createElement("a",{"data-toggle":"dropdown",title:"My Day",className:"dropdown-toggle",onClick:e.handleTaskNotificationClick,href:"#","aria-expanded":"false"},React.createElement("div",{className:"taskNotificationDiv",onClick:e.handleTaskNotificationClick}),React.createElement("p",{className:f+" speech"},i)),React.createElement("ul",{className:"dropdown-menu task_popup"},React.createElement("li",null,React.createElement("div",{className:"topArrow"})),React.createElement("li",null,React.createElement("ul",{className:"sub-task-content"},React.createElement("li",{className:""},React.createElement(UserMyDayWidget,{me:this.props.me,user:this.props.user}))))))))}});
function ArticleForm(){var e=null;this.init=function(){e=$("#form-edit-article"),$editor=e.find("#editor"),e.submit(function(){console.log($editor.cleanHtml()),$("#inp_article_body").val($editor.cleanHtml())}),$editor.wysiwyg({upload:{url:"/story/upload-image-to-gallery",max_size:524288e3,data:{},extensions:"gif|jpg|jpeg|png|bmp",success:function(e){if(console.log(e),!e.success)return!1;if(e.data.media_id){var t=$("#media-"+e.data.data_media_id);t.attr("data-uploaded-media",e.data.content_url),t.attr("data-media-id",e.data.media_id),t.attr("src",e.data.content_url)}}}})}}var ProfileStoryCreateModal=React.createClass({displayName:"ProfileStoryCreateModal",mixins:[ServerPostMixin],componentDidMount:function(){var e=this,t=new ArticleForm;t.init(),JiyoEvent.subscribe("showBeingCreateModal",function(t){t?($("#story_modal_title").val(t.title),$("#editor").html(t.html_content),$("#story_id").val(t.id)):e.clearStoryModalInputs(),$("#WellBeingCreateModalID").modal("show")})},handleStorySubmit:function(e){$("#wellbeing_story_response").removeClass().addClass("hidden");var t=$("#form-edit-article").serializeToObject();t.content=$("#editor").html(),t.status=e;var a="/story/create/";return""!=t.story_id&&(a="/story/update/"+t.story_id),Api.postData(a,t,function(t){t.success?("DRAFT"==e?$("#story_publish_button").attr("disabled","disabled"):"PUBLISHED"==e&&$("#story_draft_button").attr("disabled","disabled"),$("#wellbeing_story_response").html(t.message),$("#wellbeing_story_response").removeClass().addClass("alert alert-success form-alert-message"),setTimeout(function(){$("#WellBeingCreateModalID").modal("hide"),$("#title").val(""),$("#editor").html(""),$("#wellbeing_story_response").html(""),JiyoEvent.fire("reload_stories","TRASH"),JiyoEvent.fire("reload_stories","PUBLISHED"),JiyoEvent.fire("reload_stories","DRAFT")},2e3),JiyoEvent.fire("reload_stories","TRASH"),JiyoEvent.fire("reload_stories","PUBLISHED"),JiyoEvent.fire("reload_stories","DRAFT")):($("#wellbeing_story_response").html(t.message),$("#wellbeing_story_response").removeClass().addClass("alert alert-warning form-alert-message"))}),!1},clearStoryModalInputs:function(){$("#story_modal_title").val(""),$("#story_id").val(""),$("#editor").html(""),$("#story_publish_button").removeAttr("disabled"),$("#story_draft_button").removeAttr("disabled"),$("#wellbeing_story_response").html(""),$("#wellbeing_story_response").removeClass()},render:function(){return React.createElement("div",{className:"modal fade JiyoDefaultModalWindow",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"false",id:"WellBeingCreateModalID"},React.createElement("div",{className:"modal-dialog modal-lg-channel"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",onClick:this.clearStoryModalInputs,className:"close btn btn-link",style:{outline:"0px"},"data-dismiss":"modal","aria-label":"Close"},React.createElement("i",{className:"ion-ios-close-empty",style:{"":"none",fontSize:"42px","line-height":"42px"}})),React.createElement("span",{className:"modal-title"},React.createElement("div",null,"Write a Wellbeing Story"))),React.createElement("div",{className:"modal-body clearfix"},React.createElement("div",{id:"wellbeing_story_response"}),React.createElement("form",{id:"form-edit-article",role:"form",name:"storySubmitForm",method:"post"},React.createElement("div",{className:"form-group"},React.createElement("label",{"for":"title"},"Story Title"),React.createElement("input",{type:"text",name:"title",className:"form-control",id:"story_modal_title",placeholder:"Title"}),React.createElement("input",{type:"hidden",id:"story_id",name:"story_id"})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Story"),React.createElement("div",{className:"article-content"},React.createElement("div",{className:"btn-toolbar","data-role":"editor-toolbar","data-target":"#editor"},React.createElement("div",{className:"btn-group"},React.createElement("a",{className:"btn dropdown-toggle","data-toggle":"dropdown",title:"Font"},React.createElement("i",{className:"fa fa-font"}),React.createElement("b",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Serif",style:{"font-family":"Serif"}},"Serif")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Sans",style:{"font-family":"Sans"}},"Sans")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Arial",style:{"font-family":"Arial"}},"Arial")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Arial Black",style:{"font-family":"Arial Black"}},"Arial Black")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Courier",style:{"font-family":"Courier"}},"Courier")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Courier New",style:{"font-family":"Courier New"}},"Courier New")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Comic Sans MS",style:{"font-family":"Comic Sans MS"}},"Comic Sans MS")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Helvetica",style:{"font-family":"Helvetica"}},"Helvetica")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Impact",style:{"font-family":"Impact"}},"Impact")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Lucida Grande",style:{"font-family":"Lucida Grande"}},"Lucida Grande")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Lucida Sans",style:{"font-family":"Lucida Sans"}},"Lucida Sans")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Tahoma",style:{"font-family":"Tahoma"}},"Tahoma")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Times",style:{"font-family":"Times"}},"Times")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Times New Roman",style:{"font-family":"Times New Roman"}},"Times New Roman")),React.createElement("li",null,React.createElement("a",{"data-edit":"fontName Verdana",style:{"font-family":"Verdana"}},"Verdana")))),React.createElement("div",{className:"btn-group"},React.createElement("a",{className:"btn dropdown-toggle","data-toggle":"dropdown",title:"Font Size"},React.createElement("i",{className:"fa fa-text-height"})," ",React.createElement("b",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{"data-edit":"fontSize 5"},React.createElement("span",{size:"5"},"Huge"))),React.createElement("li",null,React.createElement("a",{"data-edit":"fontSize 3"},React.createElement("span",{size:"3"},"Normal"))),React.createElement("li",null,React.createElement("a",{"data-edit":"fontSize 1"},React.createElement("span",{size:"1"},"Small"))))),React.createElement("div",{className:"btn-group",role:"group"},React.createElement("a",{className:"btn","data-edit":"bold",title:"Bold (Ctrl/Cmd+B)"},React.createElement("i",{className:"fa fa-bold"})),React.createElement("a",{className:"btn","data-edit":"italic",title:"Italic (Ctrl/Cmd+I)"},React.createElement("i",{className:"fa fa-italic"})),React.createElement("a",{className:"btn","data-edit":"strikethrough",title:"Strikethrough"},React.createElement("i",{className:"fa fa-strikethrough"})),React.createElement("a",{className:"btn","data-edit":"underline",title:"Underline (Ctrl/Cmd+U)"},React.createElement("i",{className:"fa fa-underline"}))),React.createElement("div",{className:"btn-group"},React.createElement("a",{className:"btn","data-edit":"insertunorderedlist",title:"Bullet list"},React.createElement("i",{className:"fa fa-list-ul"})),React.createElement("a",{className:"btn","data-edit":"insertorderedlist",title:"Number list"},React.createElement("i",{className:"fa fa-list-ol"})),React.createElement("a",{className:"btn","data-edit":"outdent",title:"Reduce indent (Shift+Tab)"},React.createElement("i",{className:"fa fa-indent"})),React.createElement("a",{className:"btn","data-edit":"indent",title:"Indent (Tab)"},React.createElement("i",{className:"fa fa-outdent"}))),React.createElement("div",{className:"btn-group"},React.createElement("a",{className:"btn","data-edit":"justifyleft",title:"Align Left (Ctrl/Cmd+L)"},React.createElement("i",{className:"fa fa-align-left"})),React.createElement("a",{className:"btn","data-edit":"justifycenter",title:"Center (Ctrl/Cmd+E)"},React.createElement("i",{className:"fa fa-align-center"})),React.createElement("a",{className:"btn","data-edit":"justifyright",title:"Align Right (Ctrl/Cmd+R)"},React.createElement("i",{className:"fa fa-align-right"})),React.createElement("a",{className:"btn","data-edit":"justifyfull",title:"Justify (Ctrl/Cmd+J)"},React.createElement("i",{className:"fa fa-align-justify"}))),React.createElement("div",{className:"btn-group"},React.createElement("a",{className:"btn",title:"Insert picture (or just drag & drop)"},React.createElement("label",{htmlFor:"inp_insert_media"},React.createElement("i",{className:"fa fa-file-image-o"}))),React.createElement("input",{type:"file","data-role":"magic-overlay",id:"inp_insert_media","data-edit":"insertImage",style:{display:"none"}})),React.createElement("div",{className:"btn-group"},React.createElement("a",{className:"btn","data-edit":"undo",title:"Undo (Ctrl/Cmd+Z)"},React.createElement("i",{className:"fa fa-undo"})),React.createElement("a",{className:"btn","data-edit":"redo",title:"Redo (Ctrl/Cmd+Y)"},React.createElement("i",{className:"fa fa-repeat"}))),React.createElement("input",{type:"text","data-edit":"inserttext",id:"voiceBtn","x-webkit-speech":""})),React.createElement("div",{id:"editor",className:"editor editorTextArea"}),React.createElement("input",{type:"hidden",name:"content",id:"inp_article_body"}))),React.createElement("div",{className:"height20"}),React.createElement("div",{className:"pull-right"},React.createElement("button",{id:"story_publish_button",className:"btn btn-default",onClick:this.handleStorySubmit.bind(null,"PUBLISHED"),style:{"margin-right":"5px"}},"Publish"),React.createElement("button",{id:"story_draft_button",onClick:this.handleStorySubmit.bind(null,"DRAFT"),className:"btn btn-default"},"Save as Draft")))))))}});
var ProfileStoryCard=React.createClass({displayName:"ProfileStoryCard",mixins:[ServerPostMixin,HandleAssetLoadMixin],handleStoryEdit:function(e){Api.getData("/story/view/"+e+{},function(e){JiyoEvent.fire("showBeingCreateModal",e.data)})},deleteStory:function(e){return confirm("Are you sure you want to delete this story?")&&Api.getData("/story/update-status/"+e+"/TRASH",{},function(e){e.success?(JiyoEvent.fire("reload_stories","TRASH"),JiyoEvent.fire("reload_stories","PUBLISHED"),JiyoEvent.fire("reload_stories","DRAFT")):alert("Remove or Delete story an unsuccessful")}),!1},componentDidUpdate:function(){var e=$("#story_"+this.props.story.id+" .contentImamge");if(0!=e.length){var t=e[0].completed;console.log("Status : ",t),t&&this.props.onTileLoad&&this.props.onTileLoad()}},renderContentSection:function(){var e=this.props.story;return[React.createElement("div",{className:"panel-heading"},React.createElement("div",{className:"media clearfix"},React.createElement("div",{className:"media-body"},React.createElement("a",{className:"articlesTextCus",href:e.url},React.createElement("strong",null,React.createElement(TextEllipsis,{text:e.title,maxlimit:"32"})))))),React.createElement("div",{className:"panel-image midImage"},React.createElement("a",{href:e.url},React.createElement("img",{src:e.image,className:"contentImage img-responsive",onLoad:this.handleImageLoad,onError:this.handleImageError})))]},renderDraft:function(){var e=this.props.story;return void 0==e?React.createElement("div",null):React.createElement("div",{className:"custom-panel"},this.renderContentSection(),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"pull-right"},React.createElement("a",{title:"Edit",className:"pull-right pointer",onClick:this.handleStoryEdit.bind(null,e.id),style:{"margin-left":"10px"}},React.createElement("img",{alt:"Edit",src:"/assets/img/svg/edit_icon.svg",style:{height:"20px",width:"20px"}})),React.createElement("a",{title:"Remove",className:"pull-right",href:"#",onClick:this.deleteStory.bind(null,e.id)},React.createElement("img",{alt:"Remove",src:"/assets/img/svg/div_close.svg",style:{height:"20px",width:"20px"}})))))},renderTrash:function(){var e=this.props.story;return void 0==e?React.createElement("div",null):React.createElement("div",{className:"custom-panel"},this.renderContentSection(),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"pull-right"},React.createElement("a",{title:"Edit",className:"pointer pull-right",onClick:this.handleStoryEdit.bind(null,e.id)},React.createElement("img",{alt:"Edit",src:"/assets/img/svg/edit_icon.svg",style:{height:"20px",width:"20px"}})))))},renderPublished:function(){var e=this.props.story;if(void 0==e)return React.createElement("div",null,"Something is wrong");var t="";t=UserStoryViewsManager.hasViewedStory(e.uuid)?React.createElement("img",{height:"16",className:"articlesSocialMediaIconsSpace5",width:"16",src:"/assets/img/svg/home_view_green.svg",alt:"Views"}):React.createElement("img",{height:"16",className:"articlesSocialMediaIconsSpace5",width:"16",src:"/assets/img/svg/home_view_grey.svg",alt:"Views"});var a="";return paramObj.me.id!=paramObj.user.id&&(a="hidden"),React.createElement("div",{className:"custom-panel"},this.renderContentSection(),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"articlesSocialMediaIcons pull-left"},React.createElement("span",{className:"articlesSocialMediaIconsSpace20",title:"Views"},t,React.createElement("span",{className:"articleViewCount"},e.view_count)),React.createElement("span",{className:"articlesSocialMediaIconsSpace20 pointer",style:{display:"inline-table"},title:"Likes"},React.createElement(ContentLikeUnlike,{obj:e})),React.createElement("span",{title:"Comments",className:"pointer"},React.createElement("a",{href:e.url+"#comments"},React.createElement("img",{height:"16",className:"articlesSocialMediaIconsSpace5",width:"16",src:"/assets/img/svg/home_chatbubble_grey.svg",alt:"Comments"})),React.createElement("span",{className:"fontstyleNormal13",style:{verticalAlign:"middle"}},e.comment_count))),React.createElement("div",{className:"pull-right "+a},React.createElement("a",{title:"Edit",className:"pointer pull-right "+a,onClick:this.handleStoryEdit.bind(null,e.id),style:{"margin-left":"10px"}},React.createElement("img",{alt:"Edit",src:"/assets/img/svg/edit_icon.svg",style:{height:"20px",width:"20px"}})),React.createElement("a",{title:"Remove",className:"pull-right "+a,href:"#",onClick:this.deleteStory.bind(null,e.id)},React.createElement("img",{alt:"Remove",src:"/assets/img/svg/div_close.svg",style:{height:"20px",width:"20px"}})))))},render:function(){var e=null;return e="DRAFT"==this.props.story.status?this.renderDraft():"TRASH"==this.props.story.status?this.renderTrash():this.renderPublished(),React.createElement("div",{id:"story_"+this.props.story.id,className:"storyCard invisible",style:{width:"300px"}},React.createElement("div",{className:"content animate-panel"},e))}});
var ProfileStoryLoader=React.createClass({displayName:"ProfileStoryLoader",mixins:[ServerPostMixin],getInitialState:function(){return{storyList:null,page:0,loadedCount:0,noMoreData:!1}},getDefaultProps:function(){return{url:"/story/list/DRAFT",type:"DRAFT",emptyText:"No stories in Draft."}},tileLoaded:function(){var t=this;this.state.loadedCount++,console.log(this.props.type," tile loaded",this.state.loadedCount," - ",this.state.storyList.length),this.state.storyList.length>this.state.loadedCount||(console.log("Re rendering masonry for : ",this.props.type),$("#storyFeed-"+t.props.type).masonry({itemSelector:".storyCard",isFitWidth:!0}),$("#storyFeed-"+t.props.type+" .storyCard").removeClass("invisible"))},loadStoryList:function(){{var t=this;t.state.page}t.state.storyList=[],t.state.loadedCount=0,Api.getData(t.props.url,{},function(e){for(var o=[],s=0;s<e.data.length;s++){var r=e.data[s];o.push(React.createElement(ProfileStoryCard,{onTileLoad:t.tileLoaded,story:r}))}console.log("List ",t.props.type,o),t.setState({storyList:o})})},componentDidMount:function(){var t=this;JiyoEvent.subscribe("reload_stories",function(e){e==t.props.type&&($("#storyFeed-"+t.props.type).masonry("destroy"),t.setState({storyList:null},function(){t.loadStoryList()}))}),JiyoEvent.subscribe("forcelayout_stories",function(e){null!=t.state.storyList&&0!=t.state.storyList.length&&(console.log("running layout"),$("#storyFeed-"+t.props.type).masonry({itemSelector:".storyCard",isFitWidth:!0}))}),t.loadStoryList()},render:function(){var t=this;if(null==t.state.storyList)return React.createElement("div",{className:"text-center loading-container"},React.createElement(LoadingIcon,null));var e="";return 0==t.state.storyList.length&&(e=React.createElement("div",{className:"jumbotron"},React.createElement("h4",null,t.props.emptyText))),t.state.storyList.length>0&&$("#storyFeed-"+t.props.type).masonry({itemSelector:".storyCard",columnWidth:300,isFitWidth:!0}),React.createElement("div",{id:"storyFeed-"+this.props.type,style:{margin:"auto"}},e,t.state.storyList)}});
var ProfileStoryPanel=React.createClass({displayName:"ProfileStoryPanel",mixins:[ServerPostMixin],handleCreateStoryClick:function(){JiyoEvent.fire("showBeingCreateModal")},componentDidMount:function(){$(".wellBeingSubTab li a").on("shown.bs.tab",function(e){JiyoEvent.fire("forcelayout_stories")})},render:function(){var e="";return paramObj.me.id!=paramObj.user.id?React.createElement(ProfileStoryLoader,{type:"PUBLISHED",url:"/user/stories/"+paramObj.user.id,emptyText:"No stories published."}):React.createElement("div",null,React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs wellBeingSubTab "+e,role:"tablist",style:{}},React.createElement("li",{role:"presentation",className:"active"},React.createElement("a",{href:"#publishedImage","aria-controls":"publishedImage",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"publishedImage"}),"Published")),React.createElement("li",{role:"presentation"},React.createElement("a",{href:"#draftImage","aria-controls":"draftImage",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"draftImage"}),"Draft")),React.createElement("li",{role:"presentation"},React.createElement("a",{href:"#trashImage","aria-controls":"trashImage",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"trashImage"}),"Trash")),React.createElement("li",{className:"writeAStoryButton"},React.createElement("button",{type:"button",onClick:this.handleCreateStoryClick,className:"btn btn-default"},"Write a Story"))),React.createElement("div",{className:"tab-content"},React.createElement("div",{role:"tabpanel",className:"tab-pane active",id:"publishedImage"},React.createElement(ProfileStoryLoader,{type:"PUBLISHED",url:"/user/stories/",emptyText:"No published stories."})),React.createElement("div",{role:"tabpanel",className:"tab-pane",id:"draftImage"},React.createElement(ProfileStoryLoader,{type:"DRAFT",url:"/story/list/DRAFT"})),React.createElement("div",{role:"tabpanel",className:"tab-pane",id:"trashImage"},React.createElement(ProfileStoryLoader,{type:"TRASH",url:"/story/list/TRASH",emptyText:"No stories in trash."})))),React.createElement("div",null,React.createElement(ProfileStoryCreateModal,null)))}});
var ProfileInsightsPanel=React.createClass({displayName:"ProfileInsightsPanel",getInitialState:function(){return{insightsData:null}},renderCharts:function(){var e=this;e.renderSteps(React.findDOMNode(e.refs.steps)),e.renderSleep(React.findDOMNode(e.refs.sleep)),e.renderActivity(React.findDOMNode(e.refs.calories)),e.renderAchievements(React.findDOMNode(e.refs.achievements)),e.renderCoherence(React.findDOMNode(e.refs.coherence))},initData:function(){var e=this;$(window).resize(function(){e.renderCharts()}),Api.getData("/user/insights2",{},function(t){e.setState({insightsData:t.data},function(){e.renderCharts()})})},componentDidMount:function(){var e=this;gChartReady?e.initData():JiyoEvent.subscribe("charts_ready",function(){e.initData()})},renderSteps:function(e){if(e){for(var t=[["Date","Steps"]],a=this.state.insightsData.steps,i=0;i<a.length;i++){var n=a[i];t.push([moment(1e3*n.tm).format("YYYY-MM-DD"),n.val])}var s=new google.visualization.arrayToDataTable(t),r={chart:{title:"Steps Per Day"},legend:{position:"none"},series:{0:{axis:"date"},1:{axis:"steps"}},axes:{y:{date:{label:"Steps"},steps:{side:"right"}}}},o=new google.charts.Bar(e);o.draw(s,r),$(e).parent().removeClass("invisible")}},renderSleep:function(e){if(e){for(var t=this.state.insightsData.sleep,a=[["Date","Hours"]],i=0;i<t.length;i++){var n=t[i];a.push([moment(1e3*n.tm).format("YYYY-MM-DD"),Math.round(n.val/60*100)/100])}var s=new google.visualization.arrayToDataTable(a),r={chart:{title:"Sleep"},legend:{position:"none"},series:{0:{axis:"date"},1:{axis:"sleep"}},axes:{y:{date:{label:"Hours"},sleep:{side:"right"}}}},o=new google.charts.Bar(e);o.draw(s,r),$(e).parent().removeClass("invisible")}},renderActivity:function(e){if(e){for(var t=this.state.insightsData.calories,a=[["Date","Calories"]],i=0;i<t.length;i++){var n=t[i];a.push([moment(1e3*n.tm).format("YYYY-MM-DD"),n.val])}var s=new google.visualization.arrayToDataTable(a),r={chart:{title:"Calories"},legend:{position:"none"},series:{0:{axis:"date"},1:{axis:"calories"}},axes:{y:{date:{label:"calories"},calories:{side:"right"}}}},o=new google.charts.Bar(e);o.draw(s,r),$(e).parent().removeClass("invisible")}},renderAchievements:function(e){if(e){for(var t=this.state.insightsData.achievements,a=[["Date","Achievements"]],i=0;i<t.length;i++){var n=t[i];a.push([moment(1e3*n.tm).format("YYYY-MM-DD"),n.val])}var s=new google.visualization.arrayToDataTable(a),r={chart:{title:"Achievements"},curveType:"function",legend:{position:"none"}},o=new google.charts.Line(e);o.draw(s,r),$(e).parent().removeClass("invisible")}},renderCoherence:function(e){if(e){for(var t=this.state.insightsData.coherence,a=[["Date","Coherence"]],i=0;i<t.length;i++){var n=t[i];a.push([moment(1e3*n.tm).format("YYYY-MM-DD"),n.val])}var s=new google.visualization.arrayToDataTable(a),r={chart:{title:"Coherence"},curveType:"function",legend:{position:"none"}},o=new google.charts.Line(e);o.draw(s,r),$(e).parent().removeClass("invisible")}},render:function(){var e=this,t=paramObj.me.id;if(void 0!=paramObj.uid&&(t=paramObj.uid),null==e.state.insightsData)return React.createElement("div",{className:"text-center loading-container"},React.createElement(LoadingIcon,null));var a=e.state.insightsData,i=[];for(var n in a)0!=a[n].length&&i.push(React.createElement("div",{id:n,className:"chart-container invisible col-md-6 col-lg-6 col-xs-12 col-sm-12"},React.createElement("div",{className:"chart",ref:n})));return 0==i.length&&i.push(React.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12 mobileWebSwitch"},React.createElement("div",{className:"web",style:{lineHeight:"30px"}},React.createElement(DownloadAppWidget,{message:"Download the app here, add devices to be able to see your insights here."})),React.createElement("div",{className:"jumbotron mobile",style:{lineHeight:"30px"}},React.createElement("h3",null,"In sometime your insights will be seen here.")))),React.createElement("div",{className:"row"},i)}});
var ProfileConnectButton=React.createClass({displayName:"ProfileConnectButton",getInitialState:function(){return{dataAvailable:!1}},componentDidMount:function(){this.props.user.id!=this.props.me.id&&(this.state.dataAvailable=!0,this.handleRequest("/community/is-connected"))},handleRequest:function(e){var t=this;return t.state.dataAvailable?(t.setState({dataAvailable:!1}),void Api.postData(e,{user_id:t.props.user.id},function(n){var s=t.state;n&&n.data&&(s.response=n.data),s.dataAvailable=!0,t.setState(s),"/community/is-connected"!=e&&JiyoEvent.fire("user_2_user_connection")})):!1},sendFriendRequest:function(){this.handleRequest("/community/connect-with-user")},unFriendRequest:function(){this.handleRequest("/community/disconnect-with-user")},acceptFriendRequest:function(){this.handleRequest("/community/accept-connect-request")},rejectRequest:function(){this.handleRequest("/community/reject-connect-request")},cancelRequest:function(){this.handleRequest("/community/cancel-connect-request")},followUser:function(){this.handleRequest("/community/follow-user")},unfollowUser:function(){this.handleRequest("/community/unfollow-user")},render:function(){if(this.props.user.id==this.props.me.id)return React.createElement("span",{className:"hidden"},"myself here");if("USER"!=this.props.me.type)return React.createElement("span",{className:"hidden"},"You are an author");var e=React.createElement("span",null),t=null,n="btn btn-sm  btnAlign orangeBtn",s="btn btn-sm  btnAlign orangeBtn",a="btn btn-sm btnAlign orangeBtn";if(this.state.dataAvailable){var i=this.state.response;"USER"==this.props.user.type&&(2==i.friend.status?t=React.createElement("button",{onClick:this.sendFriendRequest,className:n,style:{position:"relative",left:"-36px","border-top-right-radius":"4px","border-bottom-right-radius":"4px"}},"Send Request"):0==i.friend.status&&(i.friend.user_id==this.props.me.id?(t=React.createElement("button",{className:a,style:{margin:"10px","pointer-events":"none"}},"Awaiting Response"),e=React.createElement("button",{className:s,onClick:this.cancelRequest},"Cancel Request")):(t=React.createElement("button",{className:n,onClick:this.acceptFriendRequest,style:{margin:"10px"}},"Accept Friend Request"),e=React.createElement("button",{className:s,onClick:this.rejectRequest},"Reject Request"))))}else t=React.createElement("span",{className:"throbber",style:{"margin-top":"-50px","margin-left":"-65px"}});return React.createElement("div",{className:"btn-group",style:{margin:"2px -77px"}},t,e)}});
var ProfileConnectionsPanel=React.createClass({displayName:"ProfileConnectionsPanel",getInitialState:function(){return{searchString:"",filterType:"FRIENDS",friends:null,dataFetched:!1,friend_request:null}},fetchUserData:function(e){var t=this;Api.getData(e,{user_id:this.props.user.id},function(e){if(e.data){var a=t.state;e.meta.friend&&(a.friends=e.data),e.meta.friend_request&&(a.friend_request=e.data),null!=a.friend_request&&null!=a.friends&&(a.dataFetched=!0),t.setState(a)}})},setSearchString:function(e){this.setState({searchString:e.target.value})},match:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())>=0},componentDidMount:function(){var e=this;JiyoEvent.subscribe("user_2_user_connection",function(){e.fetchUserData("/community/user-friends"),e.props.user.id==e.props.me.id&&e.fetchUserData("/community/notifications/friend_request")}),this.props.user.id==this.props.me.id?e.fetchUserData("/community/notifications/friend_request"):e.state.friend_request=[],e.fetchUserData("/community/user-friends"),"FriendRequest"==this.props.activeTab&&e.setState({filterType:"FRIEND_REQUESTS"})},filterConnections:function(e){this.setState({filterType:e})},makeVisible:function(e){$(e.getDOMNode()).removeClass("invisible")},render:function(){var e=this,t=[],a={FRIENDS:"Friends",FRIEND_REQUESTS:"Friends Request"},n=[],e=this;if(!this.state.dataFetched)return React.createElement("div",{className:"text-center"},React.createElement(LoadingIcon,null));"USER"==this.props.user.type&&("FRIENDS"==e.state.filterType&&e.state.friends.forEach(function(a){e.match(a.display_name,e.state.searchString)&&t.push(React.createElement(UserTeaserBlock,{user:a}))}),"FRIEND_REQUESTS"==e.state.filterType&&e.state.friend_request.forEach(function(a){a.display_name=a.user_name,e.match(a.display_name,e.state.searchString)&&t.push(React.createElement(Friendrequest,{user:a}))}));for(var r in a){var s=a[r];cls="",this.state.filterType==r&&(cls="active"),this.props.me.id!=this.props.user.id&&"Friends Request"==s&&(cls="hidden"),"Friends"==s&&(friendId="friendId",friendIcon="friendIcon"),"Friends Request"==s&&(friendId="friendRequetId",friendIcon="friendsRequestIcon"),n.push(React.createElement("button",{className:"btn btn-link custom-connection "+cls,id:friendId,onClick:this.filterConnections.bind(null,r)},React.createElement("span",{className:friendIcon}),React.createElement("span",{style:{"margin-left":"24px"}},s)))}var i="No Results";return 0==t.length&&(e.state.searchString?i="We don't have anyone by that name as yet.":"FRIENDS"==e.state.filterType?i="Look for  your friends on Jiyo and start building new friendships  today":"FRIEND_REQUESTS"==e.state.filterType&&(i="No friend requests"),t=React.createElement("div",{style:{padding:"15px"}},i)),React.createElement("div",{className:"connectionPanel"},React.createElement("ul",{className:"nav nav-tabs",role:"tablist",style:{backgroundColor:"#fff","border-radius":"6px",padding:"4px"}},React.createElement("li",{role:"presentation",className:"active friendsTabClass",style:{"text-align":"center !important","float":"inherit"}},n),React.createElement("li",{style:{height:"0","float":"right !important"}},React.createElement("input",{type:"text",placeholder:"Search Friends",onChange:this.setSearchString,style:{marginTop:"-34px"},value:this.state.searchString,className:"form-control"}),React.createElement("span",{className:"glyphicon glyphicon-search connection-search-icon pull-right",style:{top:"-24px",right:"7px",color:"#ff9933"}}))),React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-9"},t),React.createElement("div",{className:"col-lg-3"},React.createElement(SocialFollow,{onTileLoad:e.childLoaded}),React.createElement(InviteFriends,{me:e.props.me,onTileLoad:e.childLoaded}),React.createElement(RecommendUsers,{onTileLoad:e.childLoaded})))))}});
var UserProfileComponent=React.createClass({displayName:"UserProfileComponent",componentDidMount:function(){var e=this;JiyoEvent.subscribe("make_profile_tab_active",function(t){e.setTabs()}),e.setTabs()},setTabs:function(){$("#profile_sub_tabs .tab").addClass("hidden"),$("#profile_sub_tabs #"+paramObj.activeTab).removeClass("hidden")},componentWillUnmount:function(){JiyoEvent.removeSubscribers("make_profile_tab_active")},render:function(){return paramObj.me.id==paramObj.user.id,React.createElement("div",{className:"user-profile-component"},React.createElement("div",{className:"profile-picture text-center",style:{background:"url("+paramObj.user.cover_image_url+");"}},React.createElement("div",{id:"userProfileImage"},React.createElement("img",{title:"Profile Photo",id:"user_profile_image",className:"img-circle",src:paramObj.user.profile_image_url})),React.createElement("div",{style:{position:"absolute",bottom:"-8px",right:"47%"}},React.createElement(ProfileConnectButton,{user:paramObj.user,me:paramObj.me})),React.createElement("div",{className:"stats-label text-color",style:{marginTop:"4px"}},React.createElement("span",{className:"font-extra-bold font-uppercase",style:{color:"white",fontSize:"20px"}},paramObj.user.display_name)),React.createElement("div",{className:"fontstyle18",style:{marginTop:"2px"}},React.createElement(ProfileStatusUpdater,{user:paramObj.user,me:paramObj.me}))),React.createElement("div",{className:"text-center btn-link-container"},React.createElement("div",{className:"btn-group",role:"group",id:"profile_tab_buttons","aria-label":"Justified button group"},React.createElement("a",{href:"#profile/"+paramObj.user.screen_name+"/journey",className:"btn btn-link btn-link-group",id:"btnActivity",role:"button"},React.createElement("div",{className:"btnActivity"}),React.createElement("div",{className:"btnTextactivity"},"Journey")),React.createElement("a",{href:"#profile/"+paramObj.user.screen_name+"/insights",className:"btn btn-link btn-link-group",id:"btnInsights",role:"button"},React.createElement("div",{className:"btnInsights"}),React.createElement("div",{className:"btnTextinsights"},"Insights")),React.createElement("a",{href:"#profile/"+paramObj.user.screen_name+"/connections",className:"btn btn-link btn-link-group",id:"btnFriends",role:"button"},React.createElement("div",{className:"btnFriends"}),React.createElement("div",{className:"btnTextfriends"},"Connections")),React.createElement("a",{href:"#profile/"+paramObj.user.screen_name+"/story",className:"btn btn-link btn-link-group",id:"btnwellBeingStory",role:"button"},React.createElement("div",{className:"btnwellBeingStory"}),React.createElement("div",{className:"btnTextwellBeingStory"},"Wellbeing Story")))),React.createElement("div",{id:"profile_sub_tabs"},React.createElement("div",{id:"journey",className:"tab"},React.createElement(ProfileActivityPanel,{me:paramObj.me,user:paramObj.user})),React.createElement("div",{id:"insights",className:"hidden tab"},React.createElement(ProfileInsightsPanel,{me:paramObj.me,user:paramObj.user})),React.createElement("div",{id:"connections",className:"hidden tab"},React.createElement(ProfileConnectionsPanel,{me:paramObj.me,user:paramObj.user})),React.createElement("div",{id:"story",className:"hidden tab"},React.createElement(ProfileStoryPanel,{me:paramObj.me,user:paramObj.user}))))}});
var ProfileStatusUpdater=React.createClass({displayName:"ProfileStatusUpdater",mixins:[ServerPostMixin],getInitialState:function(){return{inputVisible:"hidden",addStatus:"",statusVisible:"",statusError:"hidden"}},showStatusForm:function(){this.setState({inputVisible:"",addStatus:"hidden",statusVisible:"hidden"})},handleFormSubmit:function(t){var e=$("#userStatusUpdateForm").serializeToObject(),s=this;""==$.trim(e.status_text)?s.setState({statusError:""}):Api.postData("/user/update-status",e,function(t){s.props.me=t.data,s.props.user=t.data,s.setState({inputVisible:"hidden",addStatus:"",statusError:"hidden",statusVisible:""}),JiyoEvent.fire("update_activity")}),this.stopEvent(t)},componentDidMount:function(){$("#formTextItem").val(this.props.user.public_status)},render:function(){var t="";if(this.props.me.id!=this.props.user.id)return""==this.props.me.public_status||null==this.props.me.public_status?React.createElement("div",{className:"publicStatus",style:{background:"none"},arguments:!0},this.props.user.public_status):React.createElement("div",{className:""},this.props.user.public_status);(""==this.props.me.public_status||null==this.props.me.public_status)&&(t="What's on your mind?");var e=null,s=this.props.user.public_status;return s&&""!=s&&(s=""+s),this.state.changeStatus="hidden",(""==s||null==s)&&(this.state.changeStatus="",this.state.addStatus="hidden",s=t),"hidden"!=this.state.inputVisible&&(this.state.changeStatus="hidden"),e=this.props.me.id==this.props.user.id?React.createElement("form",{id:"userStatusUpdateForm",onSubmit:this.handleFormSubmit,className:"form-inline"},React.createElement("div",{className:"addStatusDiv"},React.createElement("a",{href:"#",className:this.state.addStatus+"",onClick:this.showStatusForm}," ",React.createElement("span",{className:this.state.statusVisible+" statusVisible addStatus"},React.createElement("strong",null,s))),React.createElement("div",{className:this.state.inputVisible+" input-group col-md-3 col-sm-3 col-xs-10 col-lg-4 statusUpdateInput"},React.createElement("input",{id:"formTextItem",type:"text",name:"status_text",ref:"nameInput",className:"form-control input-sm",placeholder:"Add Status Message",maxLength:"100"}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-primary btn-sm orangeBtn"}," Save"))),React.createElement("a",{href:"#",className:this.state.changeStatus+" changeStatus statusVisible addStatus btn btn-link",onClick:this.showStatusForm},t)),React.createElement("span",{className:this.state.statusError+" alert alert-error"},"Status message can not be empty")):React.createElement("span",{className:this.state.statusVisible},s)}});
var SettingsChangePassword=React.createClass({displayName:"SettingsChangePassword",mixins:[ServerPostMixin],getInitialState:function(){return{errorMessage:"",msgUpdatePassword:"",stateUpdateInfo:"",msgUpdatePassword:"",stateUpdatePassword:"",errorMessages:{password:"",password_confirmation:""}}},componentDidMount:function(){var e=this;$("#manageDeviceMenu").addClass("active"),$("#settingMenu a").click(function(){$("#settingMenu li").removeClass("active"),$(this).parent().addClass("active"),$(".tabContent").addClass("hidden");var a=$(this).data("page");$("#"+a).removeClass("hidden"),e.state.errorMessages.password="",e.state.errorMessages.password_confirmation="",e.setState({msgUpdateInfo:null,stateUpdateInfo:"hidden"})}),$("#close").click(function(){return this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode),!1})},handlePasswordChange:function(e){var a=$("#password_edit_form").serializeToObject(),t=this;return this.postData("/user/update-password",a,function(e){var a=e.response;a.success?(e.stateUpdatePassword="alert alert-success",e.msgUpdatePassword=a.message):e.stateUpdatePassword="hidden",t.setState(e)}),this.stopEvent(e)},render:function(){{var e=this.state.errorMessages;this.props.me}return React.createElement("div",{className:"row"},React.createElement("div",{className:"text-center btn-link-container",id:"settingMenu"}),React.createElement("div",{className:"settingContent"},React.createElement("div",{className:"row"},React.createElement("h3",{style:{marginBottom:"20px",display:"block"}},"Change Password"),React.createElement("span",{className:"text-mute"},"You can update your password here"),React.createElement("form",{id:"password_edit_form",onSubmit:this.handlePasswordChange,role:"form",style:{marginTop:"20px"}},React.createElement("div",{className:this.state.stateUpdatePassword},this.state.msgUpdatePassword),React.createElement("div",{className:"col-lg-6"},React.createElement("label",{"for":"password",className:"col-sm-4 control-label"},"Password :"),React.createElement("div",{className:"col-sm-8"},React.createElement(HtmlFormGroupPassword,{name:"password",type:"password",errorMsg:e.password,placeholder:"********"}))),React.createElement("div",{className:"col-lg-6"},React.createElement("label",{"for":"password_confirmation",className:"col-sm-4 control-label"},"Confirm Password :"),React.createElement("div",{className:"col-sm-8"},React.createElement(HtmlFormGroupPassword,{name:"password_confirmation",type:"password",placeholder:"********"}))),React.createElement("input",{type:"hidden",name:"_token",value:gAppConfig.CSRFToken}),React.createElement("button",{className:"btn orangeBtn pull-right",type:"submit"},"Save Changes")))))}});
var SettingsDeviceManager=React.createClass({displayName:"SettingsDeviceManager",mixins:[ServerPostMixin],getInitialState:function(){return{providerMap:[]}},componentDidMount:function(){var e=this;Api.getData("/user/oauth-status",{},function(t){e.setState({providerMap:t.data})})},removeDevice:function(e){var t=this;Api.getData(e,{},function(e){t.setState({providerMap:e.data})})},render:function(){for(var e=(this.state.errorMessages,[]),t="",a=this.state.providerMap,c=0;c<a.length;c++){var n=a[c];1==n.status&&(t=n.connected),e.push(n.status?React.createElement("div",{className:"devicemap col-md-6 col-sm-6 col-lg-3 col-xs-12"},React.createElement("div",{className:"media whiteContent"},React.createElement("div",{className:"media-left",href:"#"},React.createElement("img",{src:n.banner_image})),React.createElement("div",{className:"media-body"},React.createElement("a",{className:"whiteContentText",href:"#"},React.createElement("span",{className:"connectDisconnectImg connectImg"}),t))),React.createElement("div",{className:"deviceHover"},React.createElement("a",{className:"deviceMapText",href:"#",onClick:this.removeDevice.bind(null,n.remove_url)},React.createElement("span",{className:"connectDisconnectImg disconnectImg"}),n.disconnect))):React.createElement("div",{className:"devicemap col-md-6 col-sm-6 col-lg-3 col-xs-12"},React.createElement("div",{className:"media whiteContent"},React.createElement("div",{className:"media-left"},React.createElement("img",{src:n.banner_image})),React.createElement("div",{className:"media-body"},React.createElement("a",{className:"whiteContentText",href:n.url,target:"_blank"},n.connect))),React.createElement("div",{className:"deviceHover"},React.createElement("a",{className:"deviceMapText",href:n.url,target:"_blank"},React.createElement("span",{className:"connectDisconnectImg connectImg"}),n.connect)," ")))}this.props.me;return React.createElement("div",{className:"row"},React.createElement("div",{className:"text-center btn-link-container",id:"settingMenu"}),React.createElement("div",{className:"settingContent"},React.createElement("div",{className:"row"},React.createElement("h3",null,"Connect Devices"),React.createElement("span",null,"Select Apps/Devices from where you want Jiyo to get it’s activity data from."),React.createElement("div",{id:"page1",className:"deviceManager"},e))))}});
var SettingsGeneral=React.createClass({displayName:"SettingsGeneral",mixins:[ServerPostMixin],getInitialState:function(){return{errorMessage:"",mailId:{},errorMessages:{mailId:{}}}},componentDidMount:function(){var e=this;Api.getData("/user/profile-info/"+this.props.user.id,{},function(t){e.setState({mailId:t.data.user.email})})},handleInfoChange:function(e){var t=$("#info_edit_form").serializeToObject(),a=this;return this.postData("/user/update-info",t,function(e){var n=e.response;n.success?(a.props.me=n.data,e.stateUpdateInfo="alert alert-success",e.msgUpdateInfo=n.message):(e.stateUpdateInfo="hidden",a.props.me=t),a.setState(e)}),this.stopEvent(e)},render:function(){var e=this.state.errorMessages,t=this.props.me;return React.createElement("div",{className:"row"},React.createElement("div",{className:"text-center btn-link-container",id:"settingMenu"}),React.createElement("div",{className:"settingContent"},React.createElement("div",{className:"row"},React.createElement("h3",null,"Profile Details"),React.createElement("span",null,"You can update your name"),React.createElement("form",{id:"info_edit_form",onSubmit:this.handleInfoChange,role:"form"},React.createElement("div",{className:this.state.stateUpdateInfo},this.state.msgUpdateInfo),React.createElement("div",{className:"col-lg-6"},React.createElement("label",{"for":"display_name",className:"col-sm-2 control-label"},"Name :"),React.createElement("div",{className:"col-sm-10"},React.createElement(HtmlFormGroupText,{name:"display_name",placeholder:"Name",errorMsg:e.display_name,val:t.display_name})),React.createElement("div",null,React.createElement("a",{href:"#",onClick:this.handleChangePassword},"Change Password")),React.createElement("input",{type:"hidden",name:"local_time",value:moment().format("YY-MM-DD HH:mm:ss")})),React.createElement("div",{className:"col-lg-6"},React.createElement("label",{"for":"emailId",className:"col-sm-2 control-label"},"Email ID :"),React.createElement("div",{className:"col-sm-10",style:{"padding-top":"24px"}},this.state.mailId)),React.createElement("input",{type:"hidden",name:"_token",value:gAppConfig.CSRFToken}),React.createElement("button",{className:"btn orangeBtn text-center",type:"submit",style:{"margin-left":"45%"}},"Save Changes")))))}});
var SettingsPrivacyManager=React.createClass({displayName:"SettingsPrivacyManager",mixins:[ServerPostMixin],getInitialState:function(){return{errorMessage:"",msgUpdatePassword:"",stateUpdateInfo:"",msgUpdatePassword:"",stateUpdatePassword:"",stateUpdatePrvcySetngs:"",msgUpdatePrvcySetngs:"",settings:null,errorMessages:{display_name:"",screen_name:"",bio:"",password:"",password_confirmation:""}}},componentDidMount:function(){var e=this;$("#manageDeviceMenu").addClass("active"),$("#settingMenu a").click(function(){$("#settingMenu li").removeClass("active"),$(this).parent().addClass("active"),$(".tabContent").addClass("hidden");var t=$(this).data("page");$("#"+t).removeClass("hidden"),e.state.errorMessages.screen_name="",e.state.errorMessages.display_name="",e.state.errorMessages.bio="",e.state.errorMessages.password="",e.state.errorMessages.password_confirmation="",e.setState({msgUpdateInfo:null,stateUpdateInfo:"hidden"})}),$("#close").click(function(){return this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode),!1}),Api.getData("/user/privacy-settings/",{},function(t){e.setState({settings:t.data})})},handleInfoChange:function(e){var t=$("#info_edit_form").serializeToObject(),a=this;return this.postData("/user/update-info",t,function(e){var s=e.response;s.success?(a.props.me=s.data,e.stateUpdateInfo="alert alert-success",e.msgUpdateInfo=s.message):(e.stateUpdateInfo="hidden",a.props.me=t),a.setState(e)}),this.stopEvent(e)},handleSettingsChange:function(e){var t=$("#settings_edit_form").serializeToObject(),a=this;return this.postData("/user/privacy-settings",t,function(e){var t=e.response;t.success?(e.stateUpdatePrvcySetngs="alert alert-success",e.msgUpdatePrvcySetngs="Settings successfully saved"):e.stateUpdatePrvcySetngs="hidden",a.setState(e)}),this.stopEvent(e)},render:function(){var e=(this.state.errorMessages,this.props.me,this.state.settings),t={everyone:"Everyone",friends:"Friends",me:"Me"},a=[],s=0;for(var n in t)s=0,null!=e&&n==e.settings_insights&&(s=1),a.push(React.createElement("option",{selected:s,value:n},t[n]));var r={everyone:"Everyone",friends:"Friends",me:"Me"},c=[],i=0;for(var n in r)i=0,null!=e&&n==e.settings_activity_feed&&(i=1),c.push(React.createElement("option",{selected:i,value:n},t[n]));return React.createElement("div",{className:"row"},React.createElement("div",{className:"text-center btn-link-container",id:"settingMenu"}),React.createElement("div",{className:"settingContent"},React.createElement("div",{className:"row"},React.createElement("div",{className:"setting-section"},React.createElement("h3",null,"Settings"),React.createElement("form",{id:"settings_edit_form",onSubmit:this.handleSettingsChange,role:"form"},React.createElement("div",{className:this.state.stateUpdatePrvcySetngs},this.state.msgUpdatePrvcySetngs),React.createElement("div",{className:"privacy_sec"},React.createElement("span",null,"Privacy"),React.createElement("div",{className:"secHeader"},React.createElement("img",{src:"",alt:""})),React.createElement("div",null,"Set who gets to see your Jiyo updates."),React.createElement("div",{className:"col-lg-6"},React.createElement("label",{"for":"activity_feed",className:"col-sm-4 control-label"},"Activity Feed :"),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{name:"settings_activity_feed",className:"form-control"},c))),React.createElement("div",{className:"col-lg-6"},React.createElement("label",{"for":"insights",className:"col-sm-4 control-label"},"Insights:"),React.createElement("div",{className:"col-sm-8"},React.createElement("select",{name:"settings_insights",className:"form-control"},a)))),React.createElement("div",null,React.createElement("input",{type:"hidden",name:"_token",value:gAppConfig.CSRFToken}),React.createElement("button",{className:"btn orangeBtn pull-right",type:"submit"},"Save Changes")))))))}});
var ChatWidget=React.createClass({displayName:"ChatWidget",mixins:[ServerPostMixin],getInitialState:function(){return{clientId:null,accessToken:null,friendList:[]}},initChats:function(){var e=this,t={client_id:this.state.clientId,mode:"sandbox",access_token:this.state.accessToken,invalid_token:function(e){}};Moxtra.init(t);var i={iframe:!0,tagid4iframe:"chat_timelineview",iframewidth:"350px",iframeheight:"650px",request_view_binder:function(e){console.log("Request to view binder Id: "+e.binder_id)},view_binder:function(e){console.log("View binder Id: "+e.binder_id)},start_timeline:function(e){console.log("TimelineView started session Id: "+e.session_id)},receive_feed:function(t){e.showChatWidow(t.binder_id,t.title)},error:function(e){}};Moxtra.timelineView(i)},showChatWidow:function(e){var t=this,i="chat_user_"+e;if(0===$("#"+i).length){$("#chat_container").html(""),0==$("#"+i).length&&($("#chat_friend_list").removeClass("hidden"),$("#chat_container").removeClass("hidden"),$("#chat_container").append('<div class="user-chat"><div class="clearfix user-chat-header"><a class="pull-right" ><i class="ion-close"></i><a></div><div id="'+i+'"></div></div>'));var a={binder_id:e,iframe:!0,iframewidth:"450px",iframeheight:"330px",tagid4iframe:i,access_token:t.state.accessToken,autostart_note:!1,request_note:function(e){console.log("Note start request")},start_chat:function(e){console.log("ChatView started session Id: "+e.session_id,e),$("#"+i+" div").css({border:"none","box-shadow":"none"})},request_view_member:function(e){console.log("view member: user id: "+e.user_id+" binder id: "+e.binder_id)},publish_feed:function(e){console.log("publish feeds: "+e.message+" binder id: "+e.binder_id)},receive_feed:function(e){console.log("receive feeds: "+e.message+" binder id: "+e.binder_id)},error:function(e){console.log("Chat error code: "+e.error_code+" error message: "+e.error_message)}};Moxtra.chatView(a)}},startChatWithUser:function(e){var t=this;Api.getData("/community/start-chat/"+e,{},function(e){t.showChatWidow(e.data.binder_id,e.data.name)})},componentDidMount:function(){var e=this;"undefined"!=typeof Moxtra&&(Api.getData("/community/chat-token",function(t){return t.success?void Api.getData("/community/user-friends",function(i){e.setState({clientId:t.data.client_id,accessToken:t.data.access_token,friendList:i.data}),e.initChats()}):void console.log("failed to get the token")}),$("body").on("click",".user-chat-header a",function(){$(this).parent().parent().remove()}))},toggleChat:function(){$("#chat_friend_list").toggleClass("hidden"),$("#chat_friend_list").hasClass("hidden")?$("#chat_container").addClass("hidden"):$("#chat_container").removeClass("hidden")},childLoaded:function(e){$(e.getDOMNode()).removeClass("invisible")},render:function(){var e=this;if(null==e.state.clientId)return React.createElement("div",null);for(var t=[],i=0;i<e.state.friendList.length;i++){var a=e.state.friendList[i];t.push(React.createElement("div",{className:"chat-block",onClick:this.startChatWithUser.bind(null,a.id)},React.createElement("img",{src:a.profile_image_url}),React.createElement("span",{className:"chat-name"},a.display_name)))}return 0==t.length&&t.push(React.createElement("h6",{className:"text-center"},"You dont have any connections")),React.createElement("div",null,React.createElement("div",{id:"chat_timelineview",className:"hidden"}),React.createElement("div",{id:"chat_timeline"}),React.createElement("div",{className:"pull-right"},React.createElement("div",{id:"chatHeader",onClick:this.toggleChat,className:"chat-header"},"Chat"),React.createElement("div",{id:"chat_friend_list",className:"hidden"},t)),React.createElement("div",{id:"chat_container",className:"pull-right"}))}});
var InviteFriends=React.createClass({displayName:"InviteFriends",mixins:[ServerPostMixin],getInitialState:function(){return{message:"",errorMessage:null}},componentDidMount:function(){var e=this;this.props.onTileLoad&&this.props.onTileLoad(e),e.forceUpdate()},handleInviteFriendSubmit:function(e){var t=this,a=$("#inviteFriendsForm").serializeToObject();return t.setState({errorMessage:null}),$("#inviteFriendSubmit").attr("disabled","disabled"),Api.postData("/community/invite-friends-via-email/",a,function(e){e.success?(alert("Thank you for inviting your friend(s)"),$("#exampleInputEmail1").val(""),$("#messageTextArea").val($("#messageTextArea").text()),$("#jiyoDiscoverContent").masonry({isFitWidth:!0})):(t.setState({errorMessage:e.message}),$("#jiyoDiscoverContent").masonry({isFitWidth:!0})),$("#inviteFriendSubmit").removeAttr("disabled")}),this.stopEvent(e)},facebookHandleClick:function(){FB.ui({method:"send",link:"http://www.jiyo.com"})},render:function(){var e=this,t=e.props.me.first_name;(""==t||null==t)&&(t=e.props.me.display_name);var a=null;e.state.message&&(a=React.createElement("div",{className:"alert alert-success",role:"alert"},e.state.message));var n=React.createElement("div",null,React.createElement("a",{onClick:this.facebookHandleClick,className:"btn btn-block btn-social btn-facebook",style:{position:"relative",top:"96px"}},React.createElement("i",{className:"fa fa-facebook"})," ",React.createElement("span",{className:"text-center",style:{display:"block"}},"Invite Facebook Friends"))),l=null,i=253;return this.state.errorMessage&&(l=React.createElement("div",{className:"text-danger text-center",style:{padding:"10px"}},this.state.errorMessage),i=287),React.createElement("div",{className:"InviteFriendsPanel InvitePanelForConnection custom-panel"},React.createElement("div",{className:"content"},React.createElement("div",{className:"artilce-teaser-panel"},React.createElement("div",{style:{padding:"0 0 5px 0"}},React.createElement("h4",{className:"text-center",style:{"margin-bottom":"18px"}},"Get your friends into the community! "),React.createElement("hr",{style:{margin:"0"}})),React.createElement("div",{className:"panel-body",style:{padding:"0px"}},React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs inviteFriends-tab",role:"tablist"},React.createElement("li",{role:"mail",className:"active"},React.createElement("a",{href:"#mail",title:"mail","aria-controls":"mail",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"mail-icon"}))),React.createElement("li",{role:"facebook"},React.createElement("a",{href:"#facebook",title:"facebook","aria-controls":"facebook",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"facebook-icon"}))),React.createElement("li",{role:"google"},React.createElement("a",{href:"#google-tab",title:"Google","aria-controls":"google",role:"tab","data-toggle":"tab",style:{border:"0 none",backgroundColor:"transparent"}},React.createElement("span",{className:"google-icon"})))),React.createElement("div",{className:"tab-content"},React.createElement("div",{role:"tabpanel",className:"tab-pane active",id:"mail",style:{height:i+"px"}},React.createElement("div",null,l),React.createElement("form",{id:"inviteFriendsForm",onSubmit:e.handleInviteFriendSubmit,className:"clearfix"},React.createElement("div",{className:"form-group required",style:{"margin-bottom":"0px"}},React.createElement("label",{"for":"exampleInputEmail1"},"Email ID:"),React.createElement("input",{name:"email_ids",className:"form-control",id:"exampleInputEmail1",placeholder:""})),React.createElement("small",{style:{color:"#0066cc",marginBottom:"10px"}},"Add as many email ids as you'd like"),React.createElement("div",{className:"form-group",style:{marginTop:"15px"}},React.createElement("label",{"for":"messageTextArea"},"Message:"),React.createElement("textarea",{name:"message",onKeyUp:e.updateMessageCharactersCount,id:"messageTextArea",className:"form-control",rows:"3"},t+" wants you be a part of their journey on Jiyo. See you there!")),React.createElement("div",{className:"clearfix text-center"},React.createElement("button",{id:"inviteFriendSubmit",className:"btn orangeBtn"},"Invite"),React.createElement("div",{className:"height10"})))),React.createElement("div",{role:"tabpanel",className:"tab-pane",id:"facebook",style:{height:i+"px"}},n),React.createElement("div",{role:"tabpanel",className:"tab-pane",id:"google-tab",style:{height:i+"px"}},React.createElement(GoogleInvitePanel,null))))))))}}),GoogleInvitePanel=React.createClass({displayName:"GoogleInvitePanel",getInitialState:function(){return{contactList:null,accessToken:null}},componentDidMount:function(){},loadContacts:function(){},handleAuth:function(){var e=this,t={client_id:"553186704884-e2oe337fff0lckjluh4j8s85ia75fnah.apps.googleusercontent.com",scope:["https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/plus.login"]};gapi.auth.authorize(t,function(t){var a=gapi.auth.getToken().access_token;$.getJSON("https://www.google.com/m8/feeds/contacts/default/full/?access_token="+a+"&alt=json&v=3.0&max-results=200&callback=?",function(t){for(var n=[],l=0;l<t.feed.entry.length;l++){for(var i=t.feed.entry[l],s=null,c=0;c<i.link.length;c++)if(-1!=i.link[c].type.indexOf("image")&&"undefined"!=typeof i.link[c].gd$etag){s=i.link[c].href;break}if("undefined"!=typeof i.gd$email&&0!=i.gd$email.length){null!=s?s+="&access_token="+a:s="/assets/img/profile_default.png";var o=i.gd$email[0].address;if("undefined"!=typeof i.gd$name){var r=i.gd$name;"undefined"!=typeof r.gd$fullName?o=r.gd$fullName.$t:"undefined"!=typeof r.gd$givenName&&(o=r.gd$givenName.$t)}n.push({email:i.gd$email[0].address,image:s,name:o})}}n=_.shuffle(n),e.setState({contactList:n})})})},onSendClick:function(e,t){console.log("Email ",e);var a=this,n={email_ids:e,message:paramObj.me.display_name+" wants you be a part of their journey on Jiyo. see you there!"};a.removeMe(e),Api.postData("/community/invite-friends-via-email/",n,function(e){alert(e.success?"Thank you for inviting your friend(s)":e.message)})},removeMe:function(e){for(var t=0;t<this.state.contactList.length;t++)this.state.contactList[t].email==e&&this.state.contactList.splice(t,1);this.forceUpdate()},renderUser:function(e){return React.createElement("div",{className:"friendRequestTab"},React.createElement("div",{className:"faceBookFriendRequestTeaser"},React.createElement("div",{className:"media"},React.createElement("div",{className:"pull-right",style:{" margin-top":"10px"}},React.createElement("button",{title:"Send invite",onClick:this.onSendClick.bind(null,e.email),className:"btn btn-primary accept-button"}),React.createElement("button",{title:"Remove",onClick:this.removeMe.bind(null,e.email),className:"btn btn-primary reject-button"})),React.createElement("div",{className:"pull-left"},React.createElement("img",{className:"media-object media-middle img-circle",src:e.image,alt:"",width:"35",height:"35"})),React.createElement("div",{className:"media-heading"},React.createElement("p",null,React.createElement("span",null,React.createElement("h5",{style:{" margin-top":"-6px"}},React.createElement(TextEllipsis,{text:e.name,maxlimit:"16"}))))))))},render:function(){if(null==this.state.contactList)return React.createElement("div",null,React.createElement("a",{onClick:this.handleAuth,className:"btn btn-block btn-social btn-google-plus",style:{position:"relative",top:"96px"}},React.createElement("i",{className:"fa fa-google"}),React.createElement("span",{className:"text-center",style:{display:"block"}},"Invite Gmail Contacts")));var e=[];if(this.state.contactList){for(var t=0,a=this.state.contactList.length-1;a>=0&&t++<4;a--){var n=this.state.contactList[a];e.push(this.renderUser(n))}0==this.state.contactList.length&&e.push(React.createElement("h4",{className:"text-center"},"No more contacts "))}return React.createElement("div",null,e)}});
var RecommendUsers=React.createClass({displayName:"RecommendUsers",mixins:[ServerPostMixin],getInitialState:function(){return{recommendedList:null,count:0,activeTab:0}},removeUser:function(e){for(var t=this,a=0;t.state.recommendedList.length;a++)if(t.state.recommendedList[a].id==e){t.state.recommendedList.splice(a,1);break}4==t.state.recommendedList.length&&t.loadRecommendations(),t.forceUpdate()},acceptUserRequest:function(e){var t=this;Api.postData("/community/connect-with-user",{user_id:e},function(){t.removeUser(e)})},rejectUserRequest:function(e){var t=this;Api.getData("/community/remove-recommendation/"+e,{},function(){t.removeUser(e)})},loadRecommendations:function(){var e=this;Api.getData("/community/community-recommendation",{},function(t){null==e.state.recommendedList&&(e.props.onTileLoad(e),e.state.recommendedList=[]);for(var a=0;a<t.data.length;a++)e.state.recommendedList.push(t.data[a]);e.forceUpdate()})},componentDidMount:function(){var e=this;e.loadRecommendations(),$("#recommendedUserCarousel").on("slide.bs.carousel",function(t){e.state.activeTab=$(t.relatedTarget).index()})},renderUser:function(e){var t=e.first_name;return null==t&&(t=e.display_name),React.createElement("div",{className:"text-center itemDiv "+e.id,style:{width:"50%","float":"left"}},React.createElement("button",{className:"deleteUser",type:"button",onClick:this.rejectUserRequest.bind(null,e.id)},"×"),React.createElement("div",{style:{marginTop:"-22px"}},React.createElement("a",{href:"/user/profile/"+e.id},React.createElement("img",{src:e.profile_image_url,className:"img-70px-circle"}))),React.createElement("div",{className:"textellipsis"},React.createElement("a",{href:"/user/profile/"+e.id},t)),React.createElement("div",{className:"clearfix"},React.createElement("button",{className:"btn btn-primary btn-sm orangeBtn",onClick:this.acceptUserRequest.bind(null,e.id)},React.createElement("span",{className:"addFriendImg"}),React.createElement("span",null,"Add Friend"))))},render:function(){var e=this,t=[],a=e.state.recommendedList;if(a)if(0==a.length)t.push(React.createElement("div",{className:"text-center recommendationDiv"},"No More users "));else{var r=0;a.length<=2*e.state.activeTab&&(e.state.activeTab=0);for(var n=0;n<a.length;n+=2){var c=a[n],s="";r==e.state.activeTab&&(s="active tm_"+(new Date).getTime());var i=e.renderUser(c),l=null;if(n+1<a.length){var m=a[n+1];l=e.renderUser(m)}t.push(React.createElement("div",{className:"item "+s},i,l)),r++}}return React.createElement("div",{className:"recommendedUsers custom-panel"},React.createElement("div",{className:"content clearfix"},React.createElement("div",{className:"artilce-teaser-panel"},React.createElement("div",null,React.createElement("h4",{className:"text-center"},"People similar to You")),React.createElement("hr",null),React.createElement("div",{id:"recommendedUserCarousel",className:"carousel slide","data-interval":"false","data-wrap":"false"},React.createElement("div",{className:"carousel-inner"},t,React.createElement("a",{id:"corouselLeftBtn",className:"left carousel-control",href:"#recommendedUserCarousel",role:"button","data-slide":"prev"},"‹"),React.createElement("a",{id:"corouselRightBtn",className:"right carousel-control",href:"#recommendedUserCarousel",role:"button","data-slide":"next"},"›"))))))}});
var RecommendUsersList=React.createClass({displayName:"RecommendUsersList",mixins:[ServerPostMixin],getInitialState:function(){return{recommendedList:null,count:0,activeTab:0}},removeUser:function(e){for(var t=this,a=0;t.state.recommendedList.length;a++)if(t.state.recommendedList[a].id==e){t.state.recommendedList.splice(a,1);break}4==t.state.recommendedList.length&&t.loadRecommendations(),t.forceUpdate()},acceptUserRequest:function(e){var t=this;Api.postData("/community/connect-with-user",{user_id:e},function(){t.removeUser(e)})},rejectUserRequest:function(e){var t=this;Api.getData("/community/remove-recommendation/"+e,{},function(){t.removeUser(e)})},loadRecommendations:function(){var e=this;Api.getData("/community/community-recommendation",{},function(t){null==e.state.recommendedList&&(e.props.onTileLoad?e.props.onTileLoad(e):$(e.getDOMNode()).removeClass("invisible"),e.state.recommendedList=[]);for(var a=0;a<t.data.length;a++)e.state.recommendedList.push(t.data[a]);e.forceUpdate()})},componentDidMount:function(){var e=this;e.loadRecommendations(),$("#recommendedUserCarousel").on("slide.bs.carousel",function(t){e.state.activeTab=$(t.relatedTarget).index()})},renderUserList:function(e){var t=e.first_name;return null==t&&(t=e.display_name),React.createElement("div",{className:"media"},React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"/user/profile/"+e.id},React.createElement("img",{className:"media-object media-middle img-circle ",src:e.profile_image_url,alt:e.profile_image_url,width:"35",height:"35"}))),React.createElement("div",{className:"pull-right"},React.createElement("button",{title:"Add Friend",className:"btn btn-primary accept-user-btn",onClick:this.acceptUserRequest.bind(null,e.id)}),React.createElement("button",{title:"Remove",className:"btn btn-primary reject-user-btn",onClick:this.rejectUserRequest.bind(null,e.id)})),React.createElement("div",{className:"media-heading"},React.createElement("p",null,React.createElement("span",null,React.createElement("a",{href:"/user/profile/"+e.id,className:"fontstyle13px"},t," ")),React.createElement("br",null))))},showMoreRecommendUsers:function(){},render:function(){var e=this,t=[],a=e.state.recommendedList,n="";if(a)if(0==a.length)t.push(React.createElement("div",{className:"text-center recommendationDiv",style:{marginBottom:"10px"}},"No More users "));else for(var r=0;5>r;r++){var c=a[r],i=e.renderUserList(c);t.push(React.createElement("li",{className:"list-group-item"},i))}return React.createElement("div",{className:"userRecommendationTile invisible"},React.createElement("div",{className:"recommendedUsersList clearfix custom-panel"},React.createElement("div",{className:"content clearfix"},React.createElement("div",{className:"artilce-teaser-panel"},React.createElement("div",null,React.createElement("h4",{className:"text-center"},"People similar to You")),React.createElement("hr",null),React.createElement("ul",{className:"recommededRequest"},t),n))))}});
var UniversalSearchAssist=React.createClass({displayName:"UniversalSearchAssist",componentDidMount:function(){var e=0,a=0;$("#navbar_univesal_search input.form-control").typeahead({hint:!1,highlight:!0,minLength:1},{name:"articles",displayKey:"article",source:function(e,i){("article"==$("#search_param").val().toLowerCase()||"all"==$("#search_param").val().toLowerCase())&&Api.getData("/community/article-search",{q:e},function(e){a=e.data.length,i(e.data)})},templates:{empty:['<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',"Sorry, we can't find what you're looking for.","</div>"].join("\n"),header:function(){return'<div class="tt-header clearfix"><div  class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="fontstyleNormal14"><img src="/assets/img/svg/search-article_activ.svg" width="24" height="24" style="margin-top:-5px"/><h4 style="display: inline-flex; padding-left: 10px; vertical-align: middle;">Articles</h4><hr style="margin:0;"></hr></div></div></div>'},footer:function(){return'<div class="clearfix" ></div>'},suggestion:_.template('<div class="clearfix" ><div class="col-sm-12 pull-right ttsuggestion"><div class="media" style="margin-top:10px;"><a class="media-left media-middle" href="#"><img class="img-cirlce" src="{{author_image}}" width="30" height="30"/></a><div class="media-body"><div class="author_name fontstyle2 media-top pointer"><div>{{title}}</div>By: {{author_name}}</div></div></div></div></div>')}},{name:"people",displayKey:"name",source:function(a,i){("people"==$("#search_param").val().toLowerCase()||"all"==$("#search_param").val().toLowerCase())&&Api.getData("/community/user-search",{q:a},function(a){e=a.data.length,i(a.data)})},updater:function(e){$("a.hc").filter(function(a){return $(this).text()===e})},templates:{empty:['<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">',"We don't have anyone by that name as yet.","</div>"].join("\n"),header:function(){return'<div class="tt-header clearfix"><div  class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="fontstyleNormal14"><img src="/assets/img/svg/search-people_activ.svg" width="24" height="24" style="margin-top:-5px"/><h4 style="display: inline-flex; padding-left: 10px; vertical-align: middle;">People</h4><hr style="margin:0;"></hr></div></div></div>'},footer:function(){return'<div class="clearfix" ><div class="height20"></div></div>'},suggestion:_.template('<div class="clearfix"><div class="col-sm-12 pull-right ttsuggestion"><div class="media" style="margin-top:10px;"><a class="media-left  media-middle" href="#"><img class="img-cirlce" src="{{profile_image_url}}" width="30" height="30"/></a><div class="media-body" style="vertical-align: middle;"><div class="display_name fontstyle2 media-top"><div class="pointer">{{display_name}}</div></div></div></div></div></div>')}}),$("#navbar_univesal_search input.form-control").bind("typeahead:selected",function(e,a,i){document.location.href="articles"==i?a.url:"/user/profile/"+a.id})},render:function(){return React.createElement("div",{className:"input-group input-group-sm input-group-xs searchToggle",style:{width:"100%"}},React.createElement("input",{type:"text",style:{height:"34px"},name:"q",id:"header_search_bar",className:"form-control",autocomplete:"off",spellcheck:"false",placeholder:"Search","aria-describedby":"sizing-addon3"}))}});
var UserNotificationComponent=React.createClass({displayName:"UserNotificationComponent",getInitialState:function(){return{searchString:"",filterType:"all",notifications:null}},updateNotifications:function(){var e=this;Api.getData("/community/notifications",{},function(t){e.setState({notifications:t.data}),JiyoEvent.fire("update_notification",t.data.length)})},componentDidMount:function(){this.updateNotifications()},acceptFriendRequest:function(e){var t=this;Api.postData("/community/accept-connect-request",{user_id:e},function(){t.updateNotifications()})},rejectFriendRequest:function(e){var t=this;Api.postData("/community/reject-connect-request",{user_id:e},function(){t.updateNotifications()})},renderFriendRequest:function(e){var t=moment.utc(e.tm_utc,"X").toDate();return t=moment(t).format("HH:mm"),React.createElement("div",{className:"media friendRequest"},React.createElement("div",{className:"pull-right",style:{display:"inline-flex"}},React.createElement("span",{className:"time-info friendsRequesttimeInfo"},t),React.createElement("button",{title:"Accept",className:"btn btn-primary accept-button",onClick:this.acceptFriendRequest.bind(null,e.user_id)}),React.createElement("button",{title:"Reject",className:"btn btn-primary reject-button",onClick:this.rejectFriendRequest.bind(null,e.user_id)})),React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"#"},React.createElement("img",{className:"media-object media-middle img-circle",src:e.user_image,alt:e.user_name}))),React.createElement("div",{className:"media-heading fontStyle15"},React.createElement("a",{href:"#"},e.user_name," ")))},renderTaskNotification:function(e){var t=moment.utc(e.task_utc,"X").toDate();return t=moment(t).format("HH:mm"),React.createElement("div",{className:"media taskRequest"},React.createElement("div",{className:"pull-right",style:{display:"inline-flex"}},React.createElement("span",{className:"time-info"},t)),React.createElement("div",{className:"pull-left "},React.createElement("div",{className:"text-center task-number"},React.createElement("span",null,"Task"),React.createElement("br",null),React.createElement("span",null,e.task_number))),React.createElement("div",{className:"media-heading fontStyle15 tasktext-heading"},React.createElement("a",{href:"/user/profile#"+e.task_id},e.title)),React.createElement("div",{className:"media-body fontStyle22 taskText-body"},e.brief))},renderArticle:function(e){return React.createElement("div",{className:"media articleRequest"},React.createElement("div",{className:"pull-right",style:{display:"inline-flex"}},React.createElement("span",{className:"time-info"},e.user_time)),React.createElement("div",{className:"pull-left"},React.createElement("a",{href:"/user/profile/"+e.author_id},React.createElement("img",{className:"media-object img-circle media-middle",alt:e.author_image,src:e.author_image,width:"48",height:"48"}))),React.createElement("div",{className:"media-heading fontStyle15"}," ",React.createElement("a",{href:e.url},e.title)," "),React.createElement("div",{className:"media-body fontStyle16"},"By:",React.createElement("span",null,e.author_name)))},filterNotifications:function(e){this.setState({filterType:e})},setSearchString:function(e){this.setState({searchString:e.target.value})},match:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())>=0},render:function(){var e=this;if(null==e.state.notifications)return React.createElement(LoadingIcon,null);for(var t=e.state.notifications,a=[],i=[],n=[],c=[],l=0,s=0,r=0,m=0;m<t.length;m++){var o=t[m],u=null,d=n,f=this.state.filterType;"all"==f&&(f=o.type),"article_publish"==o.type?(e.match(o.title,e.state.searchString)||(o=""),u=this.renderArticle(o),r++):"friend_request"==o.type?(e.match(o.user_name,e.state.searchString)||(o=""),u=this.renderFriendRequest(o),d=i,l++):"task_notification"==o.type&&(e.match(o.title,e.state.searchString)||(o=""),u=this.renderTaskNotification(o),d=c,s++),o.type===f&&(d.length<3&&d.push(React.createElement("li",{className:"list-group-item",style:{padding:"0"}},u)),a.push(React.createElement("li",{className:"list-group-item col-md-6"},u)))}0==a.length&&a.push(React.createElement("div",{className:"jumbotron",style:{"margin-left":"15px"}},React.createElement("p",null,"You dont have any notifications.")));var h={all:"All Notifications ("+t.length+")",friend_request:"Friend Requests ("+l+")",task_notification:"Tasks ("+s+")"},p=[],e=this;for(var R in h){var N=h[R];cls="",this.state.filterType==R&&(cls="active"),p.push(React.createElement("button",{className:"btn btn-default btn-responsive "+cls,onClick:this.filterNotifications.bind(null,R)},N))}var E="",v="",g="";return 0==n.length&&(g="hidden"),0==c.length&&(v="hidden"),0==i.length&&(E="hidden"),React.createElement("div",{className:"content"},React.createElement("div",{className:"row"},React.createElement("div",{className:"notificationCus"},React.createElement("h4",{className:"fontstyle5"}),React.createElement("div",{className:"panel"},React.createElement("div",{className:"panel-heading",id:"notificationTab"},React.createElement("div",{className:"btn-group"},p)),React.createElement("div",{className:" panel-body UserNotificationComponent "},React.createElement("div",{id:"allNotifications"},React.createElement("ul",{className:"list-group col-md-12 notification-list"},a))))," ")," "))}});
var CommunityLeaderBoard=React.createClass({displayName:"CommunityLeaderBoard",getInitialState:function(){return{loading:!0,userList:[],timeFilter:"hr_24"}},renderUser:function(e){return React.createElement("div",{className:"clearfix",style:{padding:"8px;4px;","border-bottom":"solid 1px #eee"}},React.createElement("img",{alt:"logo",className:"img-circle img-small pull-left",style:{width:"50px",height:"50px","margin-right":"10px"},src:e.image}),React.createElement("div",{className:"m-t-sm pull-left"},React.createElement("strong",null,React.createElement("a",{target:"_blank",href:"/user/profile/"+e.id},e.display_name)),React.createElement("p",null,e.completed)))},renderInfo:function(){return React.createElement("div",{className:"col-md-3"},React.createElement("div",{className:"hpanel hbgred"},React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"text-center"},React.createElement("h3",null,"Title text"),React.createElement("p",{className:"text-big font-light"},"0,43"),React.createElement("small",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry.")))))},componentDidMount:function(){this.handleFilter(this.state.timeFilter)},handleFilter:function(e){var t=this;this.state.timeFilter=e,this.setState({loading:!0}),Api.getData(this.props.dataSource+"/"+t.state.timeFilter,{},function(a){a.meta.title&&(t.props.title=a.meta.title),t.setState({userList:a.data,timeFilter:e,loading:!1})})},render:function(){var e=[],t=this;this.state.userList.forEach(function(a){e.push(t.renderUser(a))});var a={hr_24:"24 Hours",yesterday:"Yesterday",last_7:"7 Days",allTime:"All Time"},l=null;return this.state.loading&&(l=React.createElement(LoadingIcon,null)),React.createElement("div",{className:"panel panel-success"},React.createElement("div",{className:"panel-heading"},React.createElement("h5",null,this.props.title," ",React.createElement("div",{className:"pull-right"},l))),React.createElement("div",{className:"panel-content"},React.createElement("div",{className:"clearfix"},React.createElement("div",{className:"pull-right",style:{margin:"4px"}},React.createElement(ButtonSelectionMap,{buttonMap:a,selected:this.state.timeFilter,handleClick:this.handleFilter}))),React.createElement("div",{className:"clearfix"},e)))}});
var DownloadAppWidget=React.createClass({displayName:"DownloadAppWidget",getDefaultProps:function(){return{message:"Download the app here and begin your journey."}},render:function(){return React.createElement("div",{className:"jumbotron",style:{padding:"20px 30px"}},React.createElement("div",{style:{marginTop:"22px"}},React.createElement("h4",{style:{margin:"30px 0px"}},this.props.message),React.createElement("a",{href:"https://itunes.apple.com/in/app/jiyo/id1012604543?mt=8",target:"_blank",style:{marginRight:"10px"}},React.createElement("img",{src:"/assets/img/banners/appstore-download.png",alt:"appStore",width:"177",height:"56"})),React.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.bmm.jiyo&hl=en",target:"_blank",style:{marginRight:"10px"}},React.createElement("img",{src:"/assets/img/banners/playstore_in.png",alt:"PlayStore",width:"177",height:"56"}))))}});
var ProfileRouteController=Backbone.Router.extend({routes:{connections:"loadConnections",friendRequest:"friendRequest",wellBeingStory:"loadWellBeingStory",insights:"loadInsights",activity:"loadActivity","*path":"loadActivity"},loadActivity:function(){checkAndRender("ProfileActivityPanel",paramObj,"jiyo_content_area"),$("#profile_tab_buttons a").removeClass("active"),$("#btnActivity").addClass("active")},loadConnections:function(){paramObj.activeTab="connections",checkAndRender("ProfileConnectionsPanel",paramObj,"jiyo_content_area"),$("#profile_tab_buttons a").removeClass("active"),$("#btnFriends").addClass("active")},loadInsights:function(){checkAndRender("ProfileInsightsPanel",paramObj,"jiyo_content_area"),$("#profile_tab_buttons a").removeClass("active"),$("#btnInsights").addClass("active")},friendRequest:function(){paramObj.activeTab="FriendRequest",checkAndRender("ProfileConnectionsPanel",paramObj,"jiyo_content_area"),$("#profile_tab_buttons a").removeClass("active"),$("#btnFriends").addClass("active")},loadWellBeingStory:function(){paramObj.activeTab="wellBeingStory",checkAndRender("ProfileStoryPanel",paramObj,"jiyo_content_area"),$("#profile_tab_buttons a").removeClass("active"),$("#btnwellBeingStory").addClass("active")}});
function trackPage(e,t){ga("send","pageview",{page:e,title:t})}var JiyoRouteController=Backbone.Router.extend({routes:{"quiz/:id":"attemptBulkAssessment","quiz-result/:id":"showBulkAssessmentResult","assessment-result/:id":"showAssessmentResult",discover:"loadDiscover",plus:"loadJiyoPlus",insights:"getInsights","profile/:id/:action":"getPublicProfile",profile:"getPublicProfile","profile/:id":"getPublicProfile",settings:"loadSettings","change-password":"changePassword",editProfile:"editProfile","settings-general":"editProfile","manage-devices":"loadDevices","user/:action":"changeSettings",community:"loadCommunity","*path":"defaultRoute"},editProfile:function(){trackPage("/settings-profile","Edit Profile"),checkAndRender("SettingsGeneral",paramObj,"jiyo_content_area")},loadDevices:function(){checkAndRender("SettingsDeviceManager",paramObj,"jiyo_content_area")},changePassword:function(){trackPage("/change-password","Change Password"),checkAndRender("SettingsChangePassword",paramObj,"jiyo_content_area")},loadSettings:function(){trackPage("/settings","Settings"),checkAndRender("SettingsPrivacyManager",paramObj,"jiyo_content_area")},getPublicProfile:function(e,t){e||(e=paramObj.me.id);var a=this;return t||(t="journey"),paramObj.user.id!=e&&paramObj.user.screen_name!=e||!JiyoEvent.haveSubscribers("make_profile_tab_active")?(checkAndRender("LoadingIndicator",paramObj,"jiyo_content_area"),void Api.getData("/user/profile-data/"+e,function(e){paramObj=e.data,paramObj.activeTab=t,a.navigate("/profile/"+e.data.user.screen_name+"/"+t),checkAndRender("UserProfileComponent",paramObj,"jiyo_content_area")})):(paramObj.activeTab=t,void JiyoEvent.fire("make_profile_tab_active"))},loadJiyoPlus:function(){checkAndRender("LoadingIndicator",paramObj,"jiyo_content_area"),checkAndRender("JiyoPlusChannelLoader",paramObj,"jiyo_content_area"),trackPage("/plus","Jiyo Plus")},loadCommunity:function(){checkAndRender("CommunityLeaderBoard",{title:"Task Completion Leader Board",dataSource:"/jiyo/leader-board"},"jiyo_content_area")},loadNotifications:function(e){checkAndRender("UserNotificationComponent",paramObj,"jiyo_content_area")},getInsights:function(){checkAndRender("ProfileInsightsPanel",paramObj,"jiyo_content_area")},loadDiscover:function(){checkAndRender("DiscoverContentLoader",paramObj,"jiyo_content_area"),trackPage("/discover","Discover")},showAssessmentResult:function(e){Api.getData("/qna/attempt-result/"+e,{},function(e){checkAndRender("HtmlDoshaResult",{data:e.data},"jiyo_content_area")})},listAssessments:function(){checkAndRender("LoadingIcon",{},"jiyo_content_area"),Api.getData("/qna/assessment-list",{},function(e){checkAndRender("HtmlListGroup",{items:e.data,baseUrl:"#assessment/"},"jiyo_content_area")})},showBulkAssessmentResult:function(e){Api.getData("/qna/attempt-result/"+e,{},function(e){"Invalid attempt Id"!=e.message?($("#jiyo_content_area").removeClass("invalidattempt"),checkAndRender("AssessmentDoshaResult",{data:e.data},"jiyo_content_area")):$("#jiyo_content_area").addClass("invalidattempt").html("Invalid attempt")}),trackPage("/quiz-result","Dosha Quiz Result")},attemptBulkAssessment:function(e){var t=this;checkAndRender("LoadingIcon",{},"jiyo_content_area"),Api.getData("/qna/attempt-assessment/"+e,{},function(e){return 0==e.success?void checkAndRender("HtmlH2Msg",{text:e.message},"jiyo_content_area"):void Api.getData("/qna/bulk-assessment-questions/"+e.data.attempt.id,{},function(e){t.attemptId=e.data.attempt.id,t.attempt=e.data.attempt,t.question=e.data.questions,checkAndRender("AssessmentQuestionObject",{question:e.data.questions,attempt:t.attempt,parent:t},"jiyo_content_area")})}),trackPage("/quiz/1","Dosha Quiz")},defaultRoute:function(){"/user/insights"==gAppConfig.path?checkAndRender("ProfileInsightsPanel",paramObj,"jiyo_content_area"):this.navigate("#discover",{trigger:!0})}});