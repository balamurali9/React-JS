function refreshOGFB(){$.post("https://graph.facebook.com/?id="+encodeURIComponent(document.location.href)+"&scrape=true").done(function(e){console.log(e)})}function trackEvent(e,t,n,o){o||(o=1),n||(n=""),t||(t=""),ga("send","event",e,t,n,o)}function handleStageImageLoad(e){var t=(e.width+"_"+e.height,{h:$(e).parent().height(),w:$(e).parent().width()}),n=t.w/t.h,o=e.width/e.height;n>o?$(e).css("width","100%"):$(e).css("height","100%"),$(e).removeClass("hidden")}function getQueryStringValue(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function checkAndRenderComponent(e,t,n,o){if(gJsxRenderedParents[n]=e,AppLogger.log("Retrying to render "+e+" .."),"undefined"==typeof window[e])return void setTimeout(function(){gJsxRenderedParents[n]==e&&checkAndRender(e,t,n,o)},500);var i=React.render(React.createElement(window[e],t),document.getElementById(n));o&&o(i)}function jiyoFromNow(e){var t=new Date(1e3*e),n=new Date(1e3*moment().format("X")),o=Math.floor((n-t)/1e3),i=Math.floor(o/60),r=Math.floor(i/60),a=Math.floor(r/24);return dateStr=moment(1e3*e).format("MMM DD, YYYY"),1>=o?"1 second ago":60>o?o+" seconds ago":1==i?i+" minute ago":60>i?i+" minutes ago":1==r?r+" hour ago":24>r?r+" hours ago":1==a?a+" day ago":7>a?a+" days ago":a>=7?moment(1e3*e).format("MMM DD, YYYY"):dateStr}var HandleAssetLoadMixin={handleImageLoad:function(){this.props.onTileLoad(this)},handleImageError:function(){this.props.onTileLoad(this)}};$.fn.serializeToObject=function(){var e=$(this).serializeArray(),t={};return _.reduce(e,function(e,t){return e[t.name]=t.value,e},t),t},"undefined"==typeof window.console&&(window.console={log:function(){}}),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},$.ajaxPrefilter(function(e){e.beforeSend||(e.beforeSend=function(e){e.setRequestHeader("JIYO-DEVICE-WIDTH",window.screen.width),"undefined"!=typeof gAuth&&e.setRequestHeader("JIYO-ACCESS-TOKEN",gAuth.token)})});var Api={makeRequest:function(e,t){$("#top_error_panel").addClass("hidden"),$.ajax(e).done(function(e){t&&t(e),$("#topErrorMessageArea").addClass("hidden")}).fail(function(e){$("#top_error_panel").html("An Unexpected error occured").removeClass("hidden")}).error(function(e){401==e.status&&(document.location.href="/home"),0==e.status&&0==e.readyState&&$("#topErrorMessageArea").text("Unable to reach server, Please check your network connection ..").removeClass("hidden")})},postData:function(e,t,n){"function"==typeof t&&(n=t,t={}),t._token=gAppConfig.CSRFToken,this.makeRequest({url:e,type:"POST",data:t},n)},postJSON:function(e,t,n){this.makeRequest({url:e,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)},n)},deleteData:function(e,t,n){t._token=gCSRFToken,this.makeRequest({url:e,type:"DELETE",data:t},n)},getData:function(e,t,n){"function"==typeof t&&(n=t,t={}),this.makeRequest({url:e,type:"GET",data:t},n)}},JiyoEvent={subscribers:{},unsubscribe:function(e,t){"undefined"==typeof this.subscribers[e]},haveSubscribers:function(e){return"undefined"==typeof this.subscribers[e]?!1:this.subscribers[e].length>0},removeSubscribers:function(e){"undefined"!=typeof this.subscribers[e]&&(this.subscribers[e]=[])},subscribe:function(e,t){"undefined"==typeof this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e].push(t)},fire:function(e,t){var n=this.subscribers[e];if(n)for(var o=0;o<n.length;o++)n[o]&&n[o](t)}},Strings={programSelect:{},facetProgress:{title:"Facet Information"}},ServerPostMixin={stopEvent:function(e){return e.preventDefault(),e.stopPropagation(),!1},postData:function(e,t,n){var o=this,i=o.state;for(var r in i.errorMessages)i.errorMessages[r]=null;Api.postData(e,t,function(e){if(i.response=e,e.success)return void(n&&n(i));var t=e.data;for(var o in t){var r=t[o];i.errorMessages[o]=r}n&&(i.response=e,n(i))})}},gJsxRenderedParents={},AppLogger={log:function(){gAppConfig.debugEnabled&&console.log.apply(console,arguments)}},UserViewsManager={viewedObjects:{},hasViewed:function(e){return 1==this.viewedObjects[e]},init:function(){var e=this;JiyoEvent.subscribe("app_init",function(t){Api.getData("/content/user-article-views",{},function(t){e.viewedObjects=t.data})})}},UserStoryViewsManager={viewedStoryObjects:{},hasViewedStory:function(e){return 1==this.viewedStoryObjects[e]},init:function(){var e=this;JiyoEvent.subscribe("app_init",function(t){Api.getData("/content/user-story-views",{},function(t){e.viewedStoryObjects=t.data})})}};UserViewsManager.init(),UserStoryViewsManager.init();var UserLikesManager={likedObjects:[],like:function(e,t){var n=this;Api.getData("/content/like/"+e,{},function(t){1==t.data.meLiked&&(n.likedObjects.push(e),t.data.uuid=e,JiyoEvent.fire("object_like",t.data))})},unlike:function(e){var t=this;Api.getData("/content/unlike/"+e,{},function(n){0==n.data.meLiked&&(t.likedObjects=_.without(t.likedObjects,e),n.data.uuid=e,JiyoEvent.fire("object_unlike",n.data))})},init:function(){var e=this;JiyoEvent.subscribe("app_init",function(t){Api.getData("/content/user-likes",{},function(t){e.likedObjects=t.data,e.likedObjects.forEach(function(e){JiyoEvent.fire("object_like",{uuid:e})})})})},hasLiked:function(e){for(var t=0;t<this.likedObjects.length;t++)if(this.likedObjects[t]==e)return!0;return!1}};UserLikesManager.init(),$(function(){for(;gInitializerList.length;){var e=gInitializerList.pop();e()}}),$(document).ready(function(){for($(".facebookBtn").click(function(){ga("send","event","button","facebook_connect","click")}),$(".googleplusBtn").click(function(){ga("send","event","button","google_connect","click")}),$(".ga_logout").click(function(){ga("send","event","button","logout","click")});gComponentsToRender.length;){var e=gComponentsToRender.pop();checkAndRenderComponent(e.viewController,e.params,e.container,e.cb)}0!=$("#imageCropForm").length&&($("#imageCropForm").submit(function(e){var t=$("#imageCropForm").serializeToObject();return console.log(t),Api.postData("/user/profile-image",t,function(e){$("#user_profile_image").attr("src",e.data.cdn_url),$("#profileImageCropModal").modal("hide"),JiyoEvent.fire("update_activity"),$("#profileImagePreview").cropper("destroy")}),e.preventDefault(),e.stopPropagation(),!1}),$("form#imageCropForm .modal-header .close").on("click",function(){return $("#profileImageCropModal").modal("hide"),$("#profileImagePreview").cropper("destroy"),!1}),$("#profileImagePreview").on("load",function(){-1==$(this).attr("src").indexOf("loading.gif")&&($("#profileImageBusyState").addClass("hidden"),$("#profileImageCropModal").modal("show"),$("#profileImagePreview").cropper({aspectRatio:1,height:200,done:function(e){$("#crop_media_x").val(e.x),$("#crop_media_y").val(e.y),$("#crop_media_width").val(e.width),$("#crop_media_height").val(e.height)}}))}),$("#profileimage_upload").fileupload({url:"/user/upload?_token={{ csrf_token() }}",dataType:"json",done:function(e,t){var n=t.response();return 0==n.result.success?($("#profileImageBusyState").addClass("hidden"),alert(n.result.message),!1):($("#crop_media_id").val(n.result.data.id),void $("#profileImagePreview").attr("src",n.result.data.cdn_url))},start:function(){$("#profileImageBusyState").removeClass("hidden")},add:function(e,t){var n=t.files[0].name.split(".").pop(),o="jpeg,jpg,png,gif";return n=n.toLowerCase(),o.indexOf(n)<0?(alert("Are you sure this is an image file?"),!1):void t.submit()}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"),$("#coverimage_upload").fileupload({url:"/user/upload?_token={{ csrf_token() }}",dataType:"json",done:function(e,t){var n=t.response();return 0==n.result.success?($("#coverImageBusyState").addClass("hidden"),alert(n.result.message),!1):($("#coverImageBusyState").addClass("hidden"),$(".profile-picture").css("background-image","url('"+n.result.data.cdn_url+"')"),void JiyoEvent.fire("update_activity"))},start:function(){$("#coverImageBusyState").removeClass("hidden")},add:function(e,t){var n=t.files[0].name.split(".").pop(),o="jpeg,jpg,png,gif";return n=n.toLowerCase(),o.indexOf(n)<0?(alert("Are you sure this is an image file?"),!1):void t.submit()}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"))});
var TextEllipsis=React.createClass({displayName:"TextEllipsis",render:function(){var e=this.props.maxlimit,t=this.props.text;return t.length>e&&t.length>2&&(t=t.substring(0,e-2)+"..."),React.createElement("div",null,t)}}),LoadingIcon=React.createClass({displayName:"LoadingIcon",render:function(){return React.createElement("img",{src:"/assets/img/loading.gif",className:"loading_gif"})}}),LoadingIndicator=React.createClass({displayName:"LoadingIndicator",render:function(){return React.createElement("div",{className:"text-center",style:{padding:"20px"}},React.createElement(LoadingIcon,null))}}),ValPropSetMixin={handleProps:function(e){$(this.refs.inputElement.getDOMNode()).val(e.val)},componentDidMount:function(){this.handleProps(this.props)},componentWillReceiveProps:function(e){this.handleProps(e)}},HtmlFormErrorMessage=React.createClass({displayName:"HtmlFormErrorMessage",render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e.errorMsg}})}}),HtmlFormGroupText=React.createClass({displayName:"HtmlFormGroupText",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="";var r=e.label;return e.placeholder&&(r=e.placeholder),React.createElement("div",{className:"form-group "+e.name},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{className:"form-control",id:e.name,ref:"inputElement",autocomplete:"off",placeholder:r,type:"text",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormColor=React.createClass({displayName:"HtmlFormColor",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{ref:"inputElement",className:"form-control",autocomplete:"off",id:e.name,type:"color",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormGroupPassword=React.createClass({displayName:"HtmlFormGroupPassword",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="";var r=e.label;return e.placeholder&&(r=e.placeholder),React.createElement("div",{className:"form-group "+e.name},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{ref:"inputElement",className:"form-control",autocomplete:"off",id:e.name,placeholder:r,type:"password",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormGroupTextArea=React.createClass({displayName:"HtmlFormGroupTextArea",mixins:[ValPropSetMixin],render:function(){var e=this.props,e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("textarea",{ref:"inputElement",rows:"5",className:"form-control",name:e.name,id:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlH1=React.createClass({displayName:"HtmlH1",render:function(){return React.createElement("h1",null,this.props.text)}}),HtmlH2Msg=React.createClass({displayName:"HtmlH2Msg",render:function(){return React.createElement("h2",{className:"text-center"},this.props.text)}}),HtmlFormSelect=React.createClass({displayName:"HtmlFormSelect",mixins:[ValPropSetMixin],render:function(){var e=this.props;return React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("select",{ref:"inputElement",name:e.name,id:e.name,className:"form-control"},e.items))}}),HtmlFormSelectOption=React.createClass({displayName:"HtmlFormSelectOption",render:function(){var e=this.props;return React.createElement("option",{value:e.value},e.label)}}),ButtonSelectionMap=React.createClass({displayName:"ButtonSelectionMap",render:function(){var e=[],t=this.props.buttonMap;for(var r in t){var a=t[r];e.push(r==this.props.selected?React.createElement("button",{onClick:this.props.handleClick.bind(null,r),className:"btn btn-xs btn-success"},a):React.createElement("button",{onClick:this.props.handleClick.bind(null,r),className:"btn btn-xs btn-primary"},a))}return React.createElement("div",{className:"btn-group"},e)}});
var AuthLoginForm=React.createClass({displayName:"AuthLoginForm",mixins:[ServerPostMixin],getInitialState:function(){return{errorMessage:"",inputError:"",errorMessages:{email:"",password:""}}},handleFormSubmit:function(e){var t=this,r=$("#login_form").serializeToObject();return ga("send","event","button","login","click"),t.postData("/auth/login",r,function(e){if(e.response&&e.response.success){var r=getQueryStringValue("url"),o=e.response;return void(document.location.href=""!=r?r:o.data["goto"]?o.data["goto"]:"/")}null!=e.errorMessages.email&&(e.errorMessages.password=e.errorMessages.email,e.errorMessages.email=null),t.setState(e)}),this.stopEvent(e)},componentDidMount:function(){var e=this;JiyoEvent.subscribe("clear_auth_ui",function(){e.state.errorMessages.email="",e.state.errorMessages.password="",e.setState({errorMessage:"hidden",inputError:"hidden"})}),navigator.userAgent.toLowerCase().indexOf("chrome")>=0&&setTimeout(function(){document.getElementById("email").autocomplete="off"},1)},clickForgotPassword:function(){showForm("forgot_password")},clickResgister:function(){showForm("register")},render:function(){var e=this.state.errorMessages;return React.createElement("form",{id:"login_form",onSubmit:this.handleFormSubmit,method:"POST",role:"form",autocomplete:"off"},React.createElement("input",{type:"hidden",name:"_token",value:this.props.token}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement(HtmlFormGroupText,{name:"email",placeholder:"Email Id",label:"",errorMsg:e.email,autocomplete:"off"})),React.createElement("div",{className:"form-group"},React.createElement(HtmlFormGroupPassword,{name:"password",placeholder:"Password",label:"",errorMsg:e.password})),React.createElement("div",{className:"form-group checkbox"},React.createElement("label",null,React.createElement("input",{type:"checkbox",className:"checkbox formCheckbox"}),"Keep me signed in"))),React.createElement("div",{className:"col-sm-4 col-sm-offset-1"},React.createElement("button",{type:"submit",className:"btn btn-success btn-login btn-md"},"Sign In"))))}});
var AuthRegisterForm=React.createClass({displayName:"AuthRegisterForm",mixins:[ServerPostMixin],getInitialState:function(){return{response:{success:!1},errorMessages:{email:"",name:"",password:"",password_confirmation:""}}},componentDidMount:function(){var e=this;JiyoEvent.subscribe("clear_auth_ui",function(){var a=e.state;a.errorMessages.email="",a.errorMessages.name="",a.errorMessages.password="",a.errorMessages.password_confirmation="",e.setState(a)}),navigator.userAgent.toLowerCase().indexOf("chrome")>=0&&setTimeout(function(){document.getElementById("email").autocomplete="off"},1)},handleFormSubmit:function(e){var a=this,t=$("#registration_form").serializeToObject();return a.postData("/auth/register",t,function(e){null!=e.errorMessages.name&&(e.errorMessages.email=e.errorMessages.name,e.errorMessages.name=null),null!=e.errorMessages.password&&(e.errorMessages.password_confirmation=e.errorMessages.password,e.errorMessages.password=null),a.setState(e)}),this.stopEvent(e)},limitNameChrs:function(e){var a=e.target.value.length;a>50&&(e.target.value=e.target.value.substring(0,50))},render:function(){var e=this.state.errorMessages,a="hidden";e.name&&""!=e.name?a="text-danger":e.name="";var t="";return t=this.state.response.success?React.createElement("div",{className:"alert alert-success"},this.state.response.message):React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"form-group name"},React.createElement("input",{onKeyUp:this.limitNameChrs,minlength:"2",className:"form-control",id:"name",ref:"inputElement",autocomplete:"off",placeholder:"Name",type:"text",name:"name"}),React.createElement("div",{className:a+"ion-alert-circled"},e.name)),React.createElement(HtmlFormGroupText,{name:"email",label:"",placeholder:"Email Id",errorMsg:e.email,autocomplete:"off"}),React.createElement(HtmlFormGroupPassword,{name:"password",placeholder:"Password",errorMsg:e.password}),React.createElement(HtmlFormGroupPassword,{name:"password_confirmation",placeholder:"Confirm Password",errorMsg:e.password_confirmation}),React.createElement("input",{type:"hidden",name:"_token",value:this.props.token})),React.createElement("div",{className:"col-sm-4 col-sm-offset-1"},React.createElement("div",{className:"form-group hidden g-recaptcha","data-sitekey":"6LdVzf8SAAAAALU9obc0tbXSnDEu6wiNCtMofrar"}),React.createElement("div",{className:"checkbox"}," By clicking 'Sign Up' you are agreeing that you have read and agreed to our",React.createElement("a",{href:"/page/tos",target:"_blank"}," Terms of Use ")," and ",React.createElement("a",{href:"/page/policy",target:"_blank"}," Privacy Policy ")),React.createElement("div",{className:"height20 hidden-sm hidden-md hidden-lg"}),React.createElement("button",{type:"submit",className:"btn btn-success btn-md"},"Sign Up"))),React.createElement("form",{id:"registration_form",onSubmit:this.handleFormSubmit,role:"form",autocomplete:"off"},t)}});
var AuthForgotPasswordForm=React.createClass({displayName:"AuthForgotPasswordForm",mixins:[ServerPostMixin],getInitialState:function(){return{response:{success:!1},errorMessages:{email:""}}},handleFormSubmit:function(e){var t=this,s=$("#forgot_password_form").serializeToObject();return t.postData("/auth/forgot-password",s,function(e){t.setState(e)}),this.stopEvent(e)},componentDidMount:function(){var e=this;JiyoEvent.subscribe("clear_auth_ui",function(){var t=e.state;t.errorMessages.email="",e.setState(t)}),navigator.userAgent.toLowerCase().indexOf("chrome")>=0&&setTimeout(function(){document.getElementById("email").autocomplete="off"},1)},render:function(){var e=this.state.errorMessages,t=React.createElement("div",null,React.createElement("div",{className:"height20"})," ",React.createElement("button",{type:"submit",className:"btn btn-success btn-md"},"Reset My Password"));return this.state.response.success&&(t=React.createElement("div",{className:"alert alert-success form-alert-message"},this.state.response.message)),React.createElement("form",{id:"forgot_password_form",action:"/auth/login",onSubmit:this.handleFormSubmit,role:"form"},React.createElement("div",{className:"forgotpasswordBox"},React.createElement("small",null,"Note: Let's get your password reset. Enter your email id you used when you signed up.")),React.createElement(HtmlFormGroupText,{name:"email",placeholder:"Email ID",errorMsg:e.email,autocomplete:"off"}),React.createElement("input",{type:"hidden",name:"_token",value:this.props.token}),t)}});
var AuthResetPasswordForm=React.createClass({displayName:"AuthResetPasswordForm",mixins:[ServerPostMixin],getInitialState:function(){return{response:{success:!1},errorMessages:{password:null,password_confirmation:null}}},componentDidMount:function(){var e=this;JiyoEvent.subscribe("clear_auth_ui",function(){var t=e.state;t.errorMessages.password="",t.errorMessages.password_confirmation="",e.setState(t)}),navigator.userAgent.toLowerCase().indexOf("chrome")>=0&&setTimeout(function(){document.getElementById("email").autocomplete="off"},1)},handleFormSubmit:function(e){var t=this,s=$("#reset_password_form").serializeToObject();return t.postData("/auth/reset-password",s,function(e){t.setState(e)}),this.stopEvent(e)},render:function(){var e=this,t=this.state.errorMessages,s="";return s=e.state.response.success?React.createElement("div",{className:"alert alert-success"},this.state.response.message):React.createElement("div",null,React.createElement(HtmlFormGroupPassword,{name:"password",label:"",placeholder:"Password",errorMsg:t.password}),React.createElement(HtmlFormGroupPassword,{name:"password_confirmation",placeholder:"Confirm Password",label:""}),React.createElement("input",{type:"hidden",name:"reset_token",value:this.props.reset_token}),React.createElement("input",{type:"hidden",name:"_token",value:this.props.token}),React.createElement("button",{type:"submit",className:"btn btn-success btn-sm",style:{"margin-top":"10px"}},"Submit")),React.createElement("form",{id:"reset_password_form",action:"/auth/reset-password",onSubmit:this.handleFormSubmit,role:"form"},s)}});