var TextEllipsis=React.createClass({displayName:"TextEllipsis",render:function(){var e=this.props.maxlimit,t=this.props.text;return t.length>e&&t.length>2&&(t=t.substring(0,e-2)+"..."),React.createElement("div",null,t)}}),LoadingIcon=React.createClass({displayName:"LoadingIcon",render:function(){return React.createElement("img",{src:"/assets/img/loading.gif",className:"loading_gif"})}}),LoadingIndicator=React.createClass({displayName:"LoadingIndicator",render:function(){return React.createElement("div",{className:"text-center",style:{padding:"20px"}},React.createElement(LoadingIcon,null))}}),ValPropSetMixin={handleProps:function(e){$(this.refs.inputElement.getDOMNode()).val(e.val)},componentDidMount:function(){this.handleProps(this.props)},componentWillReceiveProps:function(e){this.handleProps(e)}},HtmlFormErrorMessage=React.createClass({displayName:"HtmlFormErrorMessage",render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e.errorMsg}})}}),HtmlFormGroupText=React.createClass({displayName:"HtmlFormGroupText",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="";var r=e.label;return e.placeholder&&(r=e.placeholder),React.createElement("div",{className:"form-group "+e.name},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{className:"form-control",id:e.name,ref:"inputElement",autocomplete:"off",placeholder:r,type:"text",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormColor=React.createClass({displayName:"HtmlFormColor",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{ref:"inputElement",className:"form-control",autocomplete:"off",id:e.name,type:"color",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormGroupPassword=React.createClass({displayName:"HtmlFormGroupPassword",mixins:[ValPropSetMixin],render:function(){var e=this.props,t="hidden";e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="";var r=e.label;return e.placeholder&&(r=e.placeholder),React.createElement("div",{className:"form-group "+e.name},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("input",{ref:"inputElement",className:"form-control",autocomplete:"off",id:e.name,placeholder:r,type:"password",name:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlFormGroupTextArea=React.createClass({displayName:"HtmlFormGroupTextArea",mixins:[ValPropSetMixin],render:function(){var e=this.props,e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("textarea",{ref:"inputElement",rows:"5",className:"form-control",name:e.name,id:e.name}),React.createElement("div",{className:t},e.errorMsg))}}),HtmlH1=React.createClass({displayName:"HtmlH1",render:function(){return React.createElement("h1",null,this.props.text)}}),HtmlH2Msg=React.createClass({displayName:"HtmlH2Msg",render:function(){return React.createElement("h2",{className:"text-center"},this.props.text)}}),HtmlFormSelect=React.createClass({displayName:"HtmlFormSelect",mixins:[ValPropSetMixin],render:function(){var e=this.props;return React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("select",{ref:"inputElement",name:e.name,id:e.name,className:"form-control"},e.items))}}),HtmlFormSelectOption=React.createClass({displayName:"HtmlFormSelectOption",render:function(){var e=this.props;return React.createElement("option",{value:e.value},e.label)}}),ButtonSelectionMap=React.createClass({displayName:"ButtonSelectionMap",render:function(){var e=[],t=this.props.buttonMap;for(var r in t){var a=t[r];e.push(r==this.props.selected?React.createElement("button",{onClick:this.props.handleClick.bind(null,r),className:"btn btn-xs btn-success"},a):React.createElement("button",{onClick:this.props.handleClick.bind(null,r),className:"btn btn-xs btn-primary"},a))}return React.createElement("div",{className:"btn-group"},e)}});
var sync=Backbone.sync;Backbone.sync=function(e,t,a){a.beforeSend=function(e){e.setRequestHeader("X-XSRF-TOKEN",gAppConfig.EncToken)},sync(e,t,a)};var EditableRowMixin={handleFormSubmit:function(e){this.props.parent.handleFormSubmit(e,this.props.model)},prepareEdit:function(){this.props.parent.showModal(this.handleFormSubmit,this.props.model)},deleteItem:function(){var e=confirm("Do you really Want to Delete");e&&this.props.model.destroy({error:function(){alert("Error While Deleting")}})}},EditableCollectionMixin={getInitialState:function(){return{collection:null}},getDefaultProps:function(){return{submitHandler:this.handleFormSubmit}},setData:function(){},showModal:function(e,t){this.props.submitHandler=e,this.editModalRef.props.handleFormSubmit=e;var a=this.state;for(var n in a.errors)a.errors[n]=null;for(var n in a.obj)a.obj[n]=null;if(t)for(var n in a.obj)a.obj[n]=t.get(n);console.log("Object Status :",a.obj," , Model : ",t),this.setState(a),$("#edit_modal").modal("show")},handleFormSubmit:function(e,t){var a=this,n=a.state;for(var l in n.errors)n.errors[l]=null;if(t)for(var l in e)t.set(l,e[l]),n.obj[l]=e[l];else""==e.id&&delete e.id,t=a.state.collection.add(e);return n.obj=e,a.setState(n),t.save(null,{success:function(e,t){if(t.success)$("#edit_modal").modal("hide");else for(var l in t.data){var r=t.data[l].join(",");n.errors[l]=r}a.state.collection.fetch()},error:function(e){alert("Error While saving the data"),$("#edit_modal").modal("hide")}}),!1},componentDidMount:function(){var e=this,t=this.props.collection;t.on("sync",function(){console.log("Calling collection"),e.setState({collection:t}),e.forceUpdate()}),t.on("destroy",function(){e.forceUpdate()}),t.fetch({error:function(){alert("Unknown Error occured plz reload")}})},renderTable:function(e,t){var a=this;a.prepareEditModal();var n=null;if(a.state.collection){var n=[],l=0;a.state.collection.forEach(function(e){n.push(a.getRow(++l,e))})}return React.createElement("div",null,React.createElement(PanelTable,{title:e,rows:n,headers:t,addHandler:this.handleAddClick}),a.editModalRef)}},JiyoDataCollection=Backbone.Collection.extend({parse:function(e){return e.success||alert("An un expected error occured while fetching collection data"),e.data}}),GenericAutoComplete=React.createClass({displayName:"GenericAutoComplete",getDefaultProps:function(){return{displayKey:"display_text"}},componentWillMount:function(){this.componentId=this.props.name+"_"+(new Date).getTime()+"_"+Math.floor(1e5*Math.random())},handleProps:function(e){var t=this;e.val?($("#"+t.componentId+" .hiddenId").val(e.val),$("#"+t.componentId+" .searchbox").val(e.text)):($("#"+t.componentId+" .hiddenId").val(""),$("#"+t.componentId+" .searchbox").val(""))},componentWillReceiveProps:function(e){this.handleProps(e)},clearInput:function(){$("#"+this.componentId+" .hiddenId").val(""),$("#"+this.componentId+" .searchbox").val("")},componentDidMount:function(){function e(e,a){Api.getData(t.props.endPoint,{q:e},function(e){a(e.data)})}var t=this,t=this,a="#"+t.componentId+" input.searchbox";$(a).typeahead({hint:!0,highlight:!0,minLength:1},{name:"name",displayKey:t.props.displayKey,source:e}),$(a).bind("typeahead:selected",function(e,a,n){$("#"+t.componentId+" .hiddenId").val(a.id),t.props.onSelect&&t.props.onSelect(a)}),this.handleProps(this.props)},render:function(){var e=this.props,t="hidden";return e.errorMsg&&""!=e.errorMsg?t="text-danger":e.errorMsg="",React.createElement("div",{id:this.componentId,className:"form-group "},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("div",{className:"input-group"},React.createElement("input",{type:"text",className:"input-sm form-control searchbox",placeholder:e.label}),React.createElement("input",{type:"hidden",name:e.name,className:"hiddenId"}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{onClick:this.clearInput,type:"button",className:" btn btn-sm btn-warning"},"Ã—"))),React.createElement("div",{className:t},e.errorMsg))}}),ManageStageComponent=React.createClass({displayName:"ManageStageComponent",stopEvent:function(e){return e.preventDefault(),e.stopPropagation(),!1},getInitialState:function(){return{messageSuccess:null,messageError:null,obj:{row1_article0:null,row1_article1:null,row1_article2:null,row2_article0:null,row2_article1:null,row2_article2:null,row2_article3:null,row1_article0_title:null,row1_article1_title:null,row1_article2_title:null,row2_article0_title:null,row2_article1_title:null,row2_article2_title:null,row2_article3_title:null},errors:{row1_article0:null,row1_article1:null,row1_article2:null,row2_article0:null,row2_article1:null,row2_article2:null,row2_article3:null}}},setConfigData:function(e){var t=this,a=t.state;for(var n in a.errors)a.errors[n]=null;var l=$.parseJSON(e.json_data);console.log(l);for(var r={},c=0;c<l.row1.length;c++)r["row1_article"+c]=l.row1[c].id,r["row1_article"+c+"_title"]=l.row1[c].title;for(var c=0;c<l.row2.length;c++)r["row2_article"+c]=l.row2[c].id,r["row2_article"+c+"_title"]=l.row2[c].title;a.obj=r,t.setState(a),console.log(a)},handleFormSubmit:function(e){var t=$("#configSaverForm").serializeToObject();console.log(t);var a=this,n=a.state;a.setState({messageSuccess:null,messageError:null}),Api.postData("/backend/meta/save-stage-config",t,function(e){e.success?(a.setState({messageSuccess:e.message,messageError:null}),a.setConfigData(e.data)):(n.errors=e.data,n.messageSuccess=null,n.messageError=e.message,a.setState(n))}),this.stopEvent(e)},componentDidMount:function(){var e=this;Api.getData("/backend/meta/config-value",{key_name:this.props.stageKey},function(t){t.data&&e.setConfigData(t.data)})},render:function(){var e="alert alert-primary",t="panel panel-default";"jiyoStage.production"==this.props.stageKey&&(e="alert alert-success",t="panel panel-primary"),console.log(this.props);var a=this.state.errors,n=this.state.obj;console.log(a);var l=null;return this.state.messageError?l=React.createElement("div",{className:"alert alert-danger form-alert-message"},this.state.messageError):this.state.messageSuccess&&(l=React.createElement("div",{className:"alert alert-success form-alert-message"},this.state.messageSuccess)),React.createElement("form",{id:"configSaverForm",onSubmit:this.handleFormSubmit},React.createElement("div",{className:e,role:"alert"},React.createElement("b",{style:{"font-size":"24px"}},this.props.title)),React.createElement("input",{type:"hidden",name:"key_name",value:this.props.stageKey}),l,React.createElement("div",{className:t},React.createElement("div",{className:"panel-heading"},"Starge Row 1"),React.createElement("div",{className:"panel-body"},React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"First Article",name:"row1_article0",errorMsg:a.row1_article0,val:n.row1_article0,text:n.row1_article0_title}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Second Article",name:"row1_article1",errorMsg:a.row1_article1,val:n.row1_article1,text:n.row1_article1_title}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Third Article",name:"row1_article2",errorMsg:a.row1_article2,val:n.row1_article2,text:n.row1_article2_title}))),React.createElement("div",{className:t},React.createElement("div",{className:"panel-heading"},"Starge Row 2"),React.createElement("div",{className:"panel-body"},React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"First Article",name:"row2_article0",errorMsg:a.row2_article0,val:n.row2_article0,text:n.row2_article0_title}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Second Article",name:"row2_article1",errorMsg:a.row2_article1,val:n.row2_article1,text:n.row2_article1_title}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Third Article",name:"row2_article2",errorMsg:a.row2_article2,val:n.row2_article2,text:n.row2_article2_title}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Forth Article",name:"row2_article3",errorMsg:a.row2_article3,val:n.row2_article3,text:n.row2_article3_title}))),React.createElement("button",{className:"btn btn-primary"},"Save Chagnes"))}}),UserManagementComponet=React.createClass({displayName:"UserManagementComponet",getInitialState:function(){return{user:null}},activateUser:function(){var e=this;Api.postData("/backend/manage/activate-user",{user_id:this.state.user.id},function(t){console.log(t),e.setState({user:t.data})})},blockUser:function(){var e=this;Api.postData("/backend/manage/block-user",{user_id:this.state.user.id},function(t){console.log(t),e.setState({user:t.data})})},selectHandler:function(e){console.log(e),this.setState({user:e})},editUser:function(){},renderUserBlock:function(){if(null==this.state.user)return null;var e=this.state.user,t=[];return t.push(1==e.status?React.createElement("button",{className:"btn btn-danger btn-sm",onClick:this.blockUser},"Block"):React.createElement("button",{className:"btn btn-warning btn-sm",onClick:this.activateUser},"Activate")),React.createElement("table",{className:"table table-striped"},React.createElement("tr",null,React.createElement("td",null,"id"),React.createElement("td",null,e.id)),React.createElement("tr",null,React.createElement("td",null,"Name"),React.createElement("td",null,e.display_name)),React.createElement("tr",null,React.createElement("td",null,"Pic"),React.createElement("td",null,React.createElement("img",{src:"/page/p/"+e.id+"/W_50",style:{width:"50px"}}))),React.createElement("tr",null,React.createElement("td",null,"Email"),React.createElement("td",null,e.email)),React.createElement("tr",null,React.createElement("td",null,"Status"),React.createElement("td",null,e.status)),React.createElement("tr",null,React.createElement("td",null,"Device UUID"),React.createElement("td",null,e.device_uuid)),React.createElement("tr",null,React.createElement("td",{colSpan:"2"},t,React.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.editUser},"Edit"))))},render:function(){return React.createElement("div",null,React.createElement("h1",null,"Manage Users"),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/user-search",displayKey:"display_name",onSelect:this.selectHandler}),this.renderUserBlock())}}),BackendManagement=React.createClass({displayName:"BackendManagement",getInitialState:function(){return{data:[],message:""}},loadStats:function(){var e=this;Api.getData("/backend/meta/status/",{},function(t){e.setState({data:t.data})})},componentDidMount:function(){this.loadStats(),this.loadUserGrowth(),$(window).resize(function(){self.renderCharts()})},renderCharts:function(){for(var e=[["Date","Growth"]],t=this.state.userGrowthData,a=0;a<t.length;a++){var n=t[a];e.push([n.day,n.totalUsers])}var t=new google.visualization.arrayToDataTable(e),l={chart:{title:"User Growth"},legend:{position:"none"},series:{0:{axis:"date"},1:{axis:"count"}},axes:{y:{date:{label:"count"},count:{side:"right"}}}},l={chart:{title:"User Growth"},curveType:"function",legend:{position:"none"}},r=new google.charts.Line(document.getElementById("chart_container"));r.draw(t,l)},loadUserGrowth:function(){var e=this;Api.getData("/backend/meta/user-growth",{},function(t){e.state.userGrowthData=t.data,e.renderCharts()})},reloadGamification:function(){var e=this;e.setState({message:'<div class="alert alert-warning">Processing request ...</div>'}),Api.getData("/backend/meta/sync-gamification/",{},function(t){e.setState(t.success?{message:t.data}:{message:t.message})})},sendNewsletter:function(){var e=this;e.setState({message:'<div class="alert alert-warning">Processing request ...</div>'}),Api.getData("/backend/meta/send-newsletter/",{},function(t){e.setState(t.success?{message:t.data}:{message:t.message})})},loadData:function(e){var t=this;t.setState({message:'<div class="alert alert-warning">Processing request ...</div>'}),Api.getData("/backend/meta/sync-tasks/"+e,{},function(e){t.setState(e.success?{message:e.data}:{message:e.data}),t.loadStats()})},removeNotification:function(e){console.log("remove not"),$(e.target).addClass("hidden")},loadArticles:function(e){var t=this;t.setState({message:'<div class="alert alert-warning">Processing request ...</div>'}),Api.getData("/backend/meta/sync-articles/"+e,{},function(e){t.setState(e.success?{message:e.data}:{message:e.message}),t.loadStats()})},reloadChannels:function(){var e=this;e.setState({message:'<div class="alert alert-warning">Processing request ...</div>'}),Api.getData("/backend/meta/reload-channels/",{},function(t){if(t.success)e.setState({message:t.data});else{var a=t.message;t.data&&(a+=t.data),e.setState({message:a})}e.loadStats()})},render:function(){var e=[];return this.state.data.forEach(function(t){e.push(React.createElement("div",{className:"col-md-4 text-center"},React.createElement("div",{style:{background:t.color,margin:"4px",padding:"10px"}},React.createElement("h2",null,t.number),React.createElement("h4",null,t.description))))}),React.createElement("div",null,React.createElement("div",{className:"col-md-9 admin-container"},React.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message},onDoubleClick:this.removeNotification,style:{cursor:"pointer"}}),React.createElement("div",{style:{height:"200px"},className:"col-md-12",id:"chart_container"}),e),React.createElement("div",{className:"col-md-3"},React.createElement("div",{className:"panel panel-default "},React.createElement("div",{className:"panel-heading"},"Newsletter"),React.createElement("div",{className:"panel-body"},React.createElement("button",{onClick:this.sendNewsletter.bind(null),className:"btn btn-default btn-block"},"Send Newsletter")),React.createElement("div",{className:"panel-heading"},"Update Tasks"),React.createElement("div",{className:"panel-body"},React.createElement("button",{onClick:this.loadData.bind(null,"tasks"),className:"btn btn-primary btn-block"},"Mandanna Tasks"),React.createElement("button",{onClick:this.loadData.bind(null,"tasks-alyssa"),className:"btn btn-primary btn-block"},"Alyssa Tasks"),React.createElement("button",{onClick:this.loadData.bind(null,"tasks-sarah"),className:"btn btn-primary btn-block"},"Sarah Tasks"),React.createElement("button",{onClick:this.loadData.bind(null,"tasks-niran"),className:"btn btn-primary btn-block"},"Niran Tasks")),React.createElement("div",{className:"panel-heading"},"Update Articles"),React.createElement("div",{className:"panel-body"},React.createElement("button",{onClick:this.loadArticles.bind(null,"greatist"),className:"btn btn-default btn-block"},"Greatist "),React.createElement("button",{onClick:this.loadArticles.bind(null,"blog"),className:"btn btn-default btn-block"},"blog.jiyo.com "),React.createElement("button",{onClick:this.loadArticles.bind(null,"chopra"),className:"btn btn-default btn-block"},"Chopra Center"),React.createElement("button",{onClick:this.loadArticles.bind(null,"sonima"),className:"btn btn-default btn-block"},"Sonima")),React.createElement("div",{className:"panel-heading"},"Update Gamification"),React.createElement("div",{className:"panel-body"},React.createElement("button",{onClick:this.reloadGamification.bind(null,"game"),className:"btn btn-default btn-block"},"Gamification "),React.createElement("button",{onClick:this.reloadChannels.bind(null,"channels"),className:"btn btn-default btn-block"},"Channels ")),React.createElement("div",{className:"panel-heading"},"Useful Links"),React.createElement("div",{className:"panel-body"},React.createElement("a",{href:"/test/vimeo",target:"_blank",className:"btn btn-default btn-block"},"Vimeo Portfolio List")))))}}),UserManagementRow=React.createClass({displayName:"UserManagementRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;if(null==e)return null;var t=React.createElement("button",{className:"btn btn-danger btn-sm",onClick:this.blockUser},"Block");return 1!=e.get("status")&&(t=React.createElement("button",{className:"btn btn-warning btn-sm",onClick:this.activateUser},"Activate")),React.createElement("table",{className:"table table-striped"},React.createElement("tr",null,React.createElement("td",null,"Name"),React.createElement("td",null,e.get("display_name"))),React.createElement("tr",null,React.createElement("td",null,"Email"),React.createElement("td",null,e.get("email"))),React.createElement("tr",null,React.createElement("td",null,"Status"),React.createElement("td",null,e.get("status"))),React.createElement("tr",null,React.createElement("td",null,"Device UUID"),React.createElement("td",null,e.get("device_uuid"))),React.createElement("tr",null,React.createElement("td",{colSpan:"2"},t,React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"))))}}),UserManagementComponet1=React.createClass({displayName:"UserManagementComponet1",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/manage/user",{collection:e}},getInitialState:function(){return{errors:{id:null,display_name:null,email:null,status:null},obj:{id:null,display_name:null,email:null,status:null}}},selectHandler:function(e){console.log(e)},render:function(){var e=this,t=e.state.errors,a=e.state.obj,n=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"display_name",label:"Name",errorMsg:t.display_name,val:a.display_name}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:a.id}),React.createElement(HtmlFormGroupText,{name:"email",label:"Email",errorMsg:t.email,val:a.email}),React.createElement(HtmlFormGroupText,{name:"status",label:"Status",errorMsg:t.status,val:a.status}));return row=e.editModalRef=React.createElement(ModalForm,{title:"Manage User",formBody:n,handleFormSubmit:this.props.submitHandler}),React.createElement("div",null,React.createElement("h1",null,"Manage Users"),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/user-search",displayKey:"display_name",onSelect:this.selectHandler}),row,e.editModalRef)}}),PanelTable=React.createClass({displayName:"PanelTable",render:function(){var e=[];this.props.headers.forEach(function(t){e.push(React.createElement("th",null,t))});var t=null;t=null==this.props.rows?React.createElement("img",{src:"/assets/img/loading.gif"}):0==this.props.rows.length?React.createElement("div",{className:"panel-body"},"Empty"):React.createElement("table",{className:"table table-striped table-hover ",style:{"min-width":"800px"}},React.createElement("thead",null,React.createElement("tr",null,e)),React.createElement("tbody",null,this.props.rows));var a=null;return this.props.onFilter&&(a=React.createElement("span",null,React.createElement("input",{type:"text",placeholder:"filter",value:this.props.filterText,onChange:this.props.onFilter,className:"input-xs",style:{color:"#333"}}),"Â Â ")),React.createElement("div",{className:"panel panel-primary "},React.createElement("div",{className:"panel-heading"},this.props.title,React.createElement("div",{className:"pull-right"},a,React.createElement("button",{className:"btn btn-xs btn-info",onClick:this.props.addHandler},React.createElement("i",{className:"glyphicon glyphicon-plus"})))),React.createElement("div",{className:"panel-content",id:"table_container"},t))}}),HtmlImageUpload=React.createClass({displayName:"HtmlImageUpload",componentWillMount:function(){this.componentId="upload_id_"+(new Date).getTime()+"_"+Math.floor(1e6*Math.random())},handleProps:function(e){var t=this;e.val?($("#"+t.componentId+" .hiddenId").val(e.val),$("#"+t.componentId+" .preview_image").attr("src","/page/v/"+e.val),$("#"+t.componentId+" .preview_image").removeClass("hidden")):$("#"+t.componentId+" .preview_image").addClass("hidden")},componentWillReceiveProps:function(e){this.handleProps(e)},componentDidMount:function(){function e(e,t){Api.getData("/admin/media-search",{q:e},function(e){t(e.data)})}var t=this,a="#"+t.componentId+" input.searchbox";$(a).typeahead({hint:!0,highlight:!0,minLength:1},{name:"media",displayKey:"original_file_name",source:e}),$(a).bind("typeahead:selected",function(e,a,n){$("#"+t.componentId+" .hiddenId").val(a.id),$("#"+t.componentId+" .preview_image").attr("src","/page/v/"+a.id),$("#"+t.componentId+" .preview_image").removeClass("hidden")}),$("#"+t.componentId+" .file-input").fileupload({url:"/admin/upload?_token="+gCSRFToken,dataType:"json",done:function(e,a,n){var l=a.result.data.id;$("#"+t.componentId+" .hiddenId").val(l),$("#"+t.componentId+" .preview_image").attr("src","/page/v/"+l),$("#"+t.componentId+" .preview_image").removeClass("hidden")},start:function(){}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"),this.handleProps(this.props)},render:function(){var e=this.props;return React.createElement("div",{id:this.componentId,className:"image_upload_button form-group"},React.createElement("label",{className:"control-label",htmlFor:e.name},e.label),React.createElement("div",null,React.createElement("img",{className:"preview_image hidden"})),React.createElement("div",{className:"input-group"},React.createElement("input",{type:"text",className:"input-sm form-control searchbox",placeholder:e.label}),React.createElement("input",{type:"hidden",name:e.name,className:"hiddenId"}),React.createElement("span",{className:"input-group-btn"},React.createElement("label",{className:"btn btn-sm btn-primary"},e.label,React.createElement("input",{className:"file-input",type:"file",name:"media"})))))}}),FromArticleAutoComplete=React.createClass({displayName:"FromArticleAutoComplete",render:function(){return React.createElement("div",null)}}),HtmlPanel=React.createClass({displayName:"HtmlPanel",render:function(){return React.createElement("div",{className:"panel panel-primary "},React.createElement("div",{className:"panel-heading"},this.props.title),React.createElement("div",{className:"panel-content clearfix",id:"table_container"},this.props.content))}}),ManageModal=React.createClass({displayName:"ManageModal",handleFormSubmit:function(e){e.stopPropagation(),e.preventDefault();var t=$("#create_edit_form").serializeToObject();return $("#error_message").addClass("hidden"),this.props.handleFormSubmit(t)},closeModal:function(e){$(e.target).parents(".modal").modal("hide")},render:function(){return React.createElement("div",{id:"edit_modal",className:"modal fade"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content modal-lg"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"Ã—"),React.createElement("h4",{className:"modal-title"},this.props.title)),React.createElement("div",{className:"modal-body"}))))}}),ModalForm=React.createClass({displayName:"ModalForm",handleFormSubmit:function(e){e.stopPropagation(),e.preventDefault();var t=$("#create_edit_form").serializeToObject();return $("#error_message").addClass("hidden"),this.props.handleFormSubmit(t)},setSubmitHandler:function(e){this.props.handleFormSubmit=e},closeModal:function(e){$(e.target).parents(".modal").modal("hide")},render:function(){return React.createElement("div",{id:"edit_modal",className:"modal fade"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"Ã—"),React.createElement("h4",{className:"modal-title"},this.props.title)),React.createElement("form",{className:"modal-body",id:"create_edit_form",onSubmit:this.handleFormSubmit,action:"#"},this.props.formBody,React.createElement("div",{className:"clearfix"},React.createElement("div",{className:"text-danger  hidden",id:"error_message"}),React.createElement("button",{className:"btn btn-sm btn-primary pull-right",type:"submit"},"Submit"),React.createElement("button",{className:"btn btn-sm btn-default pull-right",type:"button",onClick:this.closeModal},"Cancel"))))))}}),HtmlListGroup=React.createClass({displayName:"HtmlListGroup",render:function(){var e=[],t=this;return this.props.items.forEach(function(a){var n=t.props.baseUrl+a.id;e.push(React.createElement("a",{href:n,className:"list-group-item"},React.createElement("h4",{className:"list-group-item-heading"},a.title),React.createElement("p",{className:"list-group-item-text"},a.description)))}),React.createElement("div",{className:"list-group"},e)}});
var HealthVitalRangeRow=React.createClass({displayName:"HealthVitalRangeRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model,t="Not Found";return this.props.buckets.forEach(function(a){e.get("user_bucket_id")==a.id&&(t=a.name)}),React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,t),React.createElement("td",null,e.get("min_accepted_value")),React.createElement("td",null,e.get("max_accepted_value")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),HealthVitalRangeTable=React.createClass({displayName:"HealthVitalRangeTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/meta/vital-range",{collection:e}},getInitialState:function(){return{errors:{id:null,user_bucket_id:null,health_vital_id:null,min_accepted_value:null,max_accepted_value:null},obj:{id:null,user_bucket_id:null,health_vital_id:null,min_accepted_value:null,max_accepted_value:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},componentWillMount:function(){this.props.collection.url="/backend/meta/vital-range/"+this.props.vital.id},render:function(){var e=null,t=this,a=t.state.obj,l=t.state.errors,n=[];this.props.buckets.forEach(function(e){n.push(React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id}))});var c=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:a.id}),React.createElement("input",{id:"health_vital_id",name:"health_vital_id",type:"hidden",value:a.health_vital_id}),React.createElement(HtmlFormSelect,{name:"user_bucket_id",label:"User Bucket Id",items:n,errorMsg:l.user_bucket_id,val:a.user_bucket_id}),React.createElement(HtmlFormGroupText,{name:"min_accepted_value",label:"Minimum Accepted Value",errorMsg:l.min_accepted_value,val:a.min_accepted_value}),React.createElement(HtmlFormGroupText,{name:"max_accepted_value",label:"Max Accepted Value",errorMsg:l.max_accepted_value,val:a.max_accepted_value}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage User Bucket Ranges for "+this.props.vital.name,formBody:c,handleFormSubmit:this.props.submitHandler}),t.state.collection){e=[];var i=0;t.state.collection.forEach(function(a){e.push(React.createElement(HealthVitalRangeRow,{model:a,index:++i,buckets:t.props.buckets,parent:t}))})}var r=React.createElement("span",null,"Manage User Bucket Ranges for - ",React.createElement("span",{className:"label label-success"},this.props.vital.name));return React.createElement("div",null,React.createElement(PanelTable,{title:r,rows:e,headers:["#","Bucket Name","Min Val","Max Val","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var HealthVitalRow=React.createClass({displayName:"HealthVitalRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("name")),React.createElement("td",null,e.get("provider_id")),React.createElement("td",null,e.get("system_id")),React.createElement("td",null,e.get("description")),React.createElement("td",null,e.get("unit_name")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("a",{className:"btn btn-warning btn-xs",href:"/admin/health-vital-ranges/"+e.get("id")},"Ranges"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),HealthVitalTable=React.createClass({displayName:"HealthVitalTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/meta/vital",{collection:e}},getInitialState:function(){return{errors:{id:null,name:null,description:null,provider_id:null,system_id:null,unit_name:null,min_accepted_value:null,max_accepted_value:null},obj:{id:null,name:null,description:null,provider_id:null,system_id:null,unit_name:null,min_accepted_value:null,max_accepted_value:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},render:function(){var e=null,t=this,a=t.state.obj,l=t.state.errors,n=[],r=[];this.props.unitNameList.forEach(function(e){n.push(React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id}))}),this.props.providerList.forEach(function(e){r.push(React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id}))});var i=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:a.id}),React.createElement(HtmlFormGroupText,{name:"name",label:"Name",errorMsg:l.name,val:a.name}),React.createElement(HtmlFormSelect,{name:"provider_id",label:"ProviderId",items:r,errorMsg:l.provider_id,val:a.provider_id}),React.createElement(HtmlFormGroupText,{name:"system_id",label:"SystemId",errorMsg:l.system_id,val:a.system_id}),React.createElement(HtmlFormGroupTextArea,{name:"description",label:"Description",errorMsg:l.description,val:a.description}),React.createElement(HtmlFormSelect,{name:"unit_name",label:"Unit Name",items:n,errorMsg:l.unit_name,val:a.unit_name}),React.createElement(HtmlFormGroupText,{name:"min_accepted_value",label:"Minimum Accepted Value",errorMsg:l.min_accepted_value,val:a.min_accepted_value}),React.createElement(HtmlFormGroupText,{name:"max_accepted_value",label:"Max Accepted Value",errorMsg:l.max_accepted_value,val:a.max_accepted_value}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage Program",formBody:i,handleFormSubmit:this.props.submitHandler}),t.state.collection){e=[];var c=0;t.state.collection.forEach(function(a){e.push(React.createElement(HealthVitalRow,{model:a,index:++c,buckets:t.props.buckets,parent:t}))})}return React.createElement("div",null,React.createElement(PanelTable,{title:"Manage Vitals ",rows:e,headers:["#","Name","Provider","SystemId","Description","Units","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var ProgramFacetRow=React.createClass({displayName:"ProgramFacetRow",mixins:[EditableRowMixin],render:function(){{var e=this.props.model;e.get("description").substr(0,100)}return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("title")),React.createElement("td",null,e.get("description")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{type:"button",className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("button",{type:"button",className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),ProgramsFacetTable=React.createClass({displayName:"ProgramsFacetTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return{collection:e}},getInitialState:function(){return{errors:{title:null,description:null,program_id:null,fill_color:null,logo_image:null,cover_image:null,ref_article_id:null,ref_article_title:null},obj:{id:null,title:null,description:null,program_id:null,fill_color:null,logo_image:null,cover_image:null,ref_article_id:null,ref_article_title:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},componentWillMount:function(){this.props.collection.url="/backend/programs/program-facet/"+this.props.program_id},render:function(){var e=null,t=this,l=t.state.errors,a=t.state.obj,r=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"title",label:"Title",val:a.title,errorMsg:l.title}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:a.id}),React.createElement("input",{id:"program_id",name:"program_id",type:"hidden",value:this.props.program_id,errorMsg:l.program_id}),React.createElement(HtmlFormGroupTextArea,{name:"description",label:"Description",val:a.description,errorMsg:l.description}),React.createElement(HtmlFormColor,{name:"fill_color",label:"Facet Color",val:a.fill_color,errorMsg:l.fill_color}),React.createElement(HtmlImageUpload,{name:"logo_image",label:"Upload Facet Logo",val:a.logo_image,errorMsg:l.logo_image}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Associate an article with the Facet ?",name:"ref_article_id",errorMsg:l.ref_article_id,val:a.ref_article_id,text:a.ref_article_title}),React.createElement(HtmlImageUpload,{name:"cover_image",label:"Upload Cover Image",val:a.cover_image,errorMsg:l.cover_image}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage Program Facet",formBody:r,handleFormSubmit:this.props.submitHandler}),t.state.collection){e=[];var i=0;t.state.collection.forEach(function(l){e.push(React.createElement(ProgramFacetRow,{model:l,index:++i,parent:t}))})}var n=React.createElement("span",null,"Progam Facets -  ",React.createElement("span",{className:"label label-success"},this.props.program_title));return React.createElement("div",null,React.createElement(PanelTable,{title:n,rows:e,headers:["#","Title ","Description","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var ProgramScheduleRow=React.createClass({displayName:"ProgramScheduleRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("day")),React.createElement("td",null,e.get("schedule_time")),React.createElement("td",null,e.get("task_title")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),ProgramSchedule=React.createClass({displayName:"ProgramSchedule",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return{collection:e}},componentWillMount:function(){var e=this.props;this.props.collection.url="/backend/programs/program-schedule/"+e.programId+"/"+e.bucketId},getInitialState:function(){return{errors:{id:null,program_id:null,user_bucket_id:null,day:null,schedule_time:null,task_id:null,task_variant_id:null,task_title:null},obj:{id:null,program_id:null,user_bucket_id:null,day:null,schedule_time:null,task_id:null,task_variant_id:null,task_title:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},render:function(){for(var e=null,t=this,a=t.props,l=t.state.errors,r=t.state.obj,n=[],c=[],i=0;24>i;i++){10>i&&(i="0"+i);var d=i+":00",o=d+":00";n.push(React.createElement(HtmlFormSelectOption,{label:d,value:o})),d=i+":30",o=d+":00",n.push(React.createElement(HtmlFormSelectOption,{label:d,value:o}))}for(var i=0;90>=i;i++){var m="Day "+i;c.push(React.createElement(HtmlFormSelectOption,{label:m,value:i}))}var s=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:r.id}),React.createElement("input",{id:"program_id",name:"program_id",type:"hidden",value:a.programId}),React.createElement("input",{id:"user_bucket_id",name:"user_bucket_id",type:"hidden",value:a.bucketId}),React.createElement(HtmlFormSelect,{label:"Select Day to Schedule",items:c,name:"day",val:r.day,errorMsg:l.day}),React.createElement(HtmlFormSelect,{label:"Select Time To Schedule",items:n,name:"schedule_time",val:r.schedule_time,errorMsg:l.schedule_time}),React.createElement(GenericAutoComplete,{endPoint:"/backend/programs/task-search/"+a.programId,label:"Select a Task",text:r.task_title,name:"task_variant_id",programId:a.programId,val:r.task_variant_id,errorMsg:l.task_variant_id}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage Program Schedule",formBody:s,handleFormSubmit:a.submitHandler}),console.log("State Col:",t.state.collection),t.state.collection){e=[];var i=0;t.state.collection.forEach(function(a){e.push(React.createElement(ProgramScheduleRow,{model:a,index:++i,parent:t}))})}var u=React.createElement("span",null,"Mange Schedule of ",React.createElement("span",{className:"label label-success"}," ",a.programTitle," "),"for Users ",React.createElement("span",{className:"label label-warning"}," ",a.bucketName));return React.createElement("div",null,React.createElement(PanelTable,{title:u,rows:e,headers:["#","Day","Time","Task","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var ProgramsRow=React.createClass({displayName:"ProgramsRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model,t="/admin/program-facets/"+e.get("id"),a="/admin/program-tasks/"+e.get("id"),l=[];return this.props.buckets.forEach(function(t){var a="/admin/program-schedule/"+e.get("id")+"/"+t.id;l.push(React.createElement("li",null,React.createElement("a",{href:a},t.name)))}),React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("title")),React.createElement("td",null,React.createElement("img",{className:"admin-logo",src:e.get("logo_image_url")})),React.createElement("td",null,e.get("namespace")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("a",{className:"btn btn-xs btn-success",href:t},"Facets"),React.createElement("a",{className:"btn btn-xs btn-warning",href:a},"Tasks"),React.createElement("div",{className:"btn-group"},React.createElement("button",{type:"button",className:"btn btn-xs btn-default dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},"Manage Schedule ",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},l)),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),ProgramsTable=React.createClass({displayName:"ProgramsTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/programs/program",{collection:e}},getInitialState:function(){return{errors:{title:null,namespace:null,description:null,logo_image:null,id:null},obj:{id:null,title:null,description:null,logo_image:null,namespace:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},render:function(){var e=null,t=this,a=t.state.errors,l=t.state.obj,n=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"title",label:"Title",errorMsg:a.title,val:l.title}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:l.id}),React.createElement(HtmlFormGroupText,{name:"namespace",label:"Namespace",errorMsg:a.namespace,val:l.namespace}),React.createElement(HtmlFormGroupTextArea,{name:"description",label:"Description",errorMsg:a.description,val:l.description}),React.createElement(HtmlImageUpload,{name:"logo_image",label:"Logo Image",errorMsg:a.logo_image,val:l.logo_image}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage Program",formBody:n,handleFormSubmit:this.props.submitHandler}),t.state.collection){var e=[],r=0;t.state.collection.forEach(function(a){e.push(React.createElement(ProgramsRow,{model:a,index:++r,buckets:t.props.buckets,parent:t}))})}return React.createElement("div",null,React.createElement(PanelTable,{title:"Programs",rows:e,headers:["#","Program Name","Logo","Namespace","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var TaskRow=React.createClass({displayName:"TaskRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model,t="/admin/task-variants/"+e.get("id"),l="/admin/task-impacts/"+e.get("id"),a=React.createElement("b",null,"No Article");e.get("article_id")>0&&(a=React.createElement("a",{target:"_blank",href:"/jiyo/article/"+e.get("article_id")},React.createElement("b",null,"View Article")));var n=React.createElement("div",{className:"label-success label"},"ACTIVE");return"INACTIVE"==e.get("status")&&(n=React.createElement("div",{className:"label-warning label"},"INACTIVE")),React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,"Title : "+e.get("title")," ",React.createElement("br",null),"Icon: ",React.createElement("img",{style:{height:"24px"},src:e.get("categoryInfo").image})," ",React.createElement("br",null),"Push Message : "," ",React.createElement("b",null,e.get("push_message")," "),React.createElement("br",null),"Category : ",React.createElement("b",null,e.get("category")),React.createElement("br",null),"Description : "+e.get("description")," ",React.createElement("br",null),"ref : "+e.get("ext_source")," ",React.createElement("br",null)),React.createElement("td",{className:"col-md-2"},"TaskId: "+e.get("id"),React.createElement("br",null),"Response: "+e.get("response_type"),React.createElement("br",null),e.get("allowed_start_time")," ",React.createElement("b",null," to "),e.get("allowed_end_time"),React.createElement("br",null),"Zone : "+e.get("allowed_zone"),React.createElement("br",null),e.get("status"),React.createElement("br",null),a," ",React.createElement("br",null),n),React.createElement("td",{className:"col-md-2"},React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary hidden btn-block edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("a",{className:"btn btn-xs btn-primary  btn-block",href:t},"Varaiants"),React.createElement("a",{className:"btn btn-xs btn-default  btn-block",href:l},"Impacts"),React.createElement("button",{className:"btn btn-xs btn-danger hidden  btn-block",onClick:this.deleteItem},"Delete"))))}}),TaskTable=React.createClass({displayName:"TaskTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return{collection:e,facets:[]}},getInitialState:function(){return{filterText:"",errors:{id:null,title:null,description:null,push_message:null,response_type:null,article_id:null,response_mode:null,article_id:null,ref_article_title:null,allowed_end_time:null,allowed_start_time:null,allowed_zone:null,status:null},obj:{id:null,title:null,description:null,push_message:null,response_type:null,article_id:null,response_mode:null,allowed_zone:null,allowed_start_time:null,allowed_end_time:null,article_id:null,ref_article_title:null,status:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},componentWillMount:function(){this.props.collection.url="/backend/tasks/task/"},componentDidMount:function(){},filter:function(e){this.setState({filterText:e.target.value})},render:function(){var e=null,t=this,l={},a={},n={};this.props.feedbackModes.forEach(function(e){n[e.id]=React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id})}),this.props.feedbackTypes.forEach(function(e){a[e.id]=React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id})});var r=t.state.obj,c={},i=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:r.id}),React.createElement("input",{id:"program_id",name:"program_id",type:"hidden",value:this.props.program_id}),React.createElement(HtmlFormGroupText,{name:"title",label:"Title",val:r.title}),React.createElement(HtmlFormGroupTextArea,{name:"description",label:"Description",val:r.description}),React.createElement(HtmlFormGroupTextArea,{name:"push_message",label:"Push Message",val:r.push_message}),React.createElement(HtmlFormSelect,{name:"program_facet_id",label:" Facet",items:l,val:r.program_facet_id}),React.createElement(HtmlFormSelect,{name:"response_type",label:"What feedback to collect on Task completion",items:a,val:r.response_type}),React.createElement(HtmlFormSelect,{name:"response_mode",label:"How to collect feedback for task",items:n,val:r.response_mode}),React.createElement(GenericAutoComplete,{endPoint:"/backend/meta/article-search/",label:"Associate an article with the task ?",name:"article_id",errorMsg:c.article_id,val:r.article_id,text:r.ref_article_title}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage Tasks",formBody:i,handleFormSubmit:this.props.submitHandler}),t.state.collection){e=[];var s=0,o=this.state.filterText.toLowerCase();t.state.collection.forEach(function(l){l.get("title").toLowerCase().indexOf(o)>=0?e.push(React.createElement(TaskRow,{model:l,index:++s,parent:t})):l.get("push_message").toLowerCase().indexOf(o)>=0?e.push(React.createElement(TaskRow,{model:l,index:++s,parent:t})):l.get("category").toLowerCase().indexOf(o)>=0&&e.push(React.createElement(TaskRow,{model:l,index:++s,parent:t}))})}var m=React.createElement("span",null,"Tasks - ",s);return React.createElement("div",null,React.createElement(PanelTable,{title:m,onFilter:this.filter,filterText:this.state.filterText,rows:e,headers:["#","Text","Info","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var TaskVaritantsRow=React.createClass({displayName:"TaskVaritantsRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("variant_type")),React.createElement("td",null,e.get("variant_value")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),TaskVariantsTable=React.createClass({displayName:"TaskVariantsTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/tasks/variant",{collection:e}},getInitialState:function(){return{errors:{id:null,task_id:null,variant_type:null,variant_value:null},obj:{id:null,task_id:null,variant_type:null,variant_value:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},componentWillMount:function(){this.props.collection.url="/backend/tasks/variant/"+this.props.task.id},render:function(){var e=this,t=null,a=e.state.obj,n=e.state.errors,l=[];this.props.variantTypes.forEach(function(e){l.push(React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id}))});var i=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:a.id}),React.createElement("input",{id:"task_id",name:"task_id",type:"hidden",value:a.task_id}),React.createElement(HtmlFormSelect,{id:"variant_type",name:"variant_type",label:"Variant On ",items:l,type:"hidden",val:a.variant_type}),React.createElement(HtmlFormGroupText,{name:"variant_value",label:"Value",errorMsg:n.variant_value,val:a.variant_value}));if(e.editModalRef=React.createElement(ModalForm,{title:"Manage Impacts for "+this.props.task.title,formBody:i,handleFormSubmit:this.props.submitHandler}),e.state.collection){t=[];var r=0;e.state.collection.forEach(function(a){t.push(React.createElement(TaskVaritantsRow,{model:a,index:++r,parent:e}))})}var s=React.createElement("span",null,"Manage Varitants for - ",React.createElement("span",{className:"label label-warning"},this.props.task.title));return React.createElement("div",null,React.createElement(PanelTable,{title:s,rows:t,headers:["#","Variant Type","Variant Value","Actions"],addHandler:this.handleAddClick}),e.editModalRef)}});
var TaskImpactsRow=React.createClass({displayName:"TaskImpactsRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("vital_name")),React.createElement("td",null,e.get("polarity")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),TaskImpactsTable=React.createClass({displayName:"TaskImpactsTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/tasks/impact",{collection:e}},getInitialState:function(){return{errors:{id:null,task_id:null,health_vital_id:null,polarity:null},obj:{id:null,task_id:null,health_vital_id:null,polarity:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},componentWillMount:function(){this.props.collection.url="/backend/tasks/impact/"+this.props.task.id},render:function(){var e=null,t=this,a=t.state.obj,l=t.state.errors,n=[];this.props.polarityList.forEach(function(e){n.push(React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id}))});var i=[];this.props.healthVitals.forEach(function(e){i.push(React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id}))});var r=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:a.id}),React.createElement("input",{id:"task_id",name:"task_id",type:"hidden",value:a.task_id}),React.createElement(HtmlFormSelect,{id:"health_vital_id",name:"health_vital_id",items:i,type:"hidden",val:a.health_vital_id}),React.createElement(HtmlFormSelect,{name:"polarity",label:"Polarity",items:n,errorMsg:l.polarity,val:a.polarity}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage Impacts for "+this.props.task.title,formBody:r,handleFormSubmit:this.props.submitHandler}),t.state.collection){e=[];var c=0;t.state.collection.forEach(function(a){e.push(React.createElement(TaskImpactsRow,{model:a,index:++c,parent:t}))})}var s=React.createElement("span",null,"Manage Impacts for - ",React.createElement("span",{className:"label label-success"},this.props.task.title));return React.createElement("div",null,React.createElement(PanelTable,{title:s,rows:e,headers:["#","Vital Name","Polarity","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var TopologyRow=React.createClass({displayName:"TopologyRow",mixins:[EditableRowMixin],renderEditForm:function(){this.props.parent.showModal(this.handleFormSubmit,this.props.model)},addChild:function(){this.props.addChild(this.model.get("parent_id"))},render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("term")),React.createElement("td",null,e.get("parent_id")),React.createElement("td",null,e.get("genre")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.renderEditForm},"Edit"),React.createElement("button",{className:"btn btn-xs btn-success",onClick:this.addChild},"Add child"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),TopologyTable=React.createClass({displayName:"TopologyTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/meta/topology",{collection:e}},getInitialState:function(){return{errors:{id:null,term:null,genre:null,description:null},obj:{id:null,term:null,genre:null,parent_id:null,description:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},addChild:function(e){this.showModal(this.handleFormSubmit)},render:function(){var e=null,t=0,l=this,a={},n=this.state.collection;a["null"]=[React.createElement(HtmlFormSelectOption,{label:"--",value:"NULL"})],this.state.collection&&(e=[],n.forEach(function(e){t++,a["item_"+e.id]=React.createElement(HtmlFormSelectOption,{label:e.get("term"),value:e.get("id")})}));var i=this.state.obj,r=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"term",label:"Term",val:i.term}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:i.id}),React.createElement(HtmlFormSelect,{name:"parent_id",label:"Parent",items:a,val:i.parent_id}),React.createElement(HtmlFormGroupText,{name:"genre",label:"Genre",val:i.genre}),React.createElement(HtmlFormGroupTextArea,{name:"description",label:"Description",val:i.description})),l=this;if(this.editModalRef=React.createElement(ModalForm,{title:"Manage Topology",formBody:r,handleFormSubmit:this.props.submitHandler}),a["null"]=[React.createElement("option",{value:"NULL"},"--")],this.state.collection){e=[];var l=this;n.forEach(function(a){t++,e.push(React.createElement(TopologyRow,{model:a,index:t,addChild:l.addChild,parent:l}))})}return React.createElement("div",null,React.createElement(PanelTable,{title:"Manage Topology",rows:e,headers:["#","Term","Parent_id","Genre","Actions"],addHandler:this.handleAddClick}),l.editModalRef)}});
var AssessmentsRow=React.createClass({displayName:"AssessmentsRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model,t="/admin/assessment-questions/"+e.get("id");return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("title")),React.createElement("td",null,e.get("status")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("a",{className:"btn btn-xs btn-success",href:t},"Questions"))))}}),AssessmentsTable=React.createClass({displayName:"AssessmentsTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/qna/assessment",{collection:e}},getInitialState:function(){return{errors:{title:null,description:null,status:null,id:null},obj:{id:null,title:null,status:null,description:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},prepareEditModal:function(){var e=this,t=e.state.errors,n=e.state.obj,s={},a=[{id:"PUBLISHED",name:"PUBLISHED"},{id:"DRAFT",name:"DRAFT"}];a.forEach(function(e){s[e.id]=React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id})});var l=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"title",label:"Title",errorMsg:t.title,val:n.title}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:n.id}),React.createElement(HtmlFormGroupTextArea,{name:"description",label:"Description",errorMsg:t.description,val:n.description}),React.createElement(HtmlFormSelect,{name:"status",label:"Status",items:s,val:n.status}));e.editModalRef=React.createElement(ModalForm,{title:"Manage Assessment",formBody:l,handleFormSubmit:this.props.submitHandler})},getRow:function(e,t){return React.createElement(AssessmentsRow,{model:t,index:e,parent:this})},render:function(){return this.renderTable("Assessments",["#","Assessment Title","Status","Actions"])}}),AssessmentQuestionsRow=React.createClass({displayName:"AssessmentQuestionsRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model,t="/admin/assessment-question-answers/"+e.get("id");return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("text")),React.createElement("td",null,e.get("display_order")),React.createElement("td",null,e.get("status")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("a",{className:"btn btn-xs btn-success",href:t},"Answers"))))}}),AssessmentQuestionsTable=React.createClass({displayName:"AssessmentQuestionsTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/qna/assessment-question/",{collection:e}},getInitialState:function(){return{errors:{text:null,status:null,display_order:null,id:null},obj:{id:null,text:null,status:null,display_order:null}}},componentWillMount:function(){this.props.collection.url="/qna/assessment-question/"+this.props.assessmentId},handleAddClick:function(){this.showModal(this.handleFormSubmit)},prepareEditModal:function(){var e=this,t=e.state.errors,n={},s=e.state.obj,a=[{id:"ACTIVE",name:"ACTIVE"},{id:"INACTIVE",name:"INACTIVE"}];a.forEach(function(e){n[e.id]=React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id})});var l=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"text",label:"Text",errorMsg:t.text,val:s.text}),React.createElement(HtmlFormGroupText,{name:"display_order",label:"Display Order",errorMsg:t.display_order,val:s.display_order}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:s.id}),React.createElement(HtmlFormSelect,{name:"status",label:"Status",items:n,val:s.status}));e.editModalRef=React.createElement(ModalForm,{title:"Manage Assessment Questions",formBody:l,handleFormSubmit:this.props.submitHandler})},getRow:function(e,t){return React.createElement(AssessmentQuestionsRow,{model:t,index:e,parent:this})},render:function(){return this.renderTable("Assessment Questions",["#","Question","Display Order","Status","Actions"])}}),AssessmentsQuestionAnswersRow=React.createClass({displayName:"AssessmentsQuestionAnswersRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("text")),React.createElement("td",null,e.get("points")),React.createElement("td",null,e.get("status")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"))))}}),AssessmentQuestionAnswersTable=React.createClass({displayName:"AssessmentQuestionAnswersTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/qna/assessment-question-answer/",{collection:e}},getInitialState:function(){return{errors:{text:null,points:null,status:null,id:null},obj:{id:null,text:null,status:null,points:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},componentWillMount:function(){this.props.collection.url="/qna/assessment-question-answer/"+this.props.questionId},prepareEditModal:function(){var e=this,t=e.state.errors,n=e.state.obj,s=[{id:"ACTIVE",name:"ACTIVE"},{id:"INACTIVE",name:"INACTIVE"}],a={};s.forEach(function(e){a[e.id]=React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id})});var l=React.createElement("div",null,React.createElement(HtmlFormGroupText,{name:"text",label:"Text",errorMsg:t.text,val:n.text}),React.createElement(HtmlFormGroupText,{name:"points",label:"Points",errorMsg:t.points,val:n.points}),React.createElement(HtmlFormSelect,{name:"status",label:"Status",items:a,val:n.status}),React.createElement("input",{id:"id",name:"id",type:"hidden",value:n.id}));e.editModalRef=React.createElement(ModalForm,{title:"Manage Assessment Question Answers",formBody:l,handleFormSubmit:this.props.submitHandler})},getRow:function(e,t){return React.createElement(AssessmentsQuestionAnswersRow,{model:t,index:e,parent:this})},render:function(){return this.renderTable("Assessment Question Answers",["#","Answer","Points","Status","Actions"])}});
var UserBucketRow=React.createClass({displayName:"UserBucketRow",mixins:[EditableRowMixin],render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("name")),React.createElement("td",null,e.get("rule_key")),React.createElement("td",null,React.createElement("div",{className:"table-btn-group"},React.createElement("button",{className:"btn btn-xs btn-primary edit_button",onClick:this.prepareEdit},"Edit"),React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.deleteItem},"Delete"))))}}),UserBucketTable=React.createClass({displayName:"UserBucketTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/meta/user-bucket",{collection:e}},getInitialState:function(){return{errors:{name:null,rule_key:null},obj:{id:null,name:null,rule_key:null}}},handleAddClick:function(){this.showModal(this.handleFormSubmit)},render:function(){var e=null,t=this,a={};this.props.rule_list.forEach(function(e){a[e.id]=React.createElement(HtmlFormSelectOption,{label:e.name,value:e.id})});var l=t.state.errors,n=t.state.obj,r=React.createElement("div",null,React.createElement("input",{id:"id",name:"id",type:"hidden",value:n.id}),React.createElement(HtmlFormGroupText,{name:"name",label:"Unique Name",errorMsg:l.name,val:n.name}),React.createElement(HtmlFormSelect,{name:"rule_key",label:"Rule",items:a,errorMsg:l.rule_key,val:n.rule_key}));if(t.editModalRef=React.createElement(ModalForm,{title:"Manage User Buckets",formBody:r,handleFormSubmit:this.props.submitHandler}),t.state.collection){e=[];var c=0;t.state.collection.forEach(function(a){e.push(React.createElement(UserBucketRow,{model:a,index:++c,parent:t}))})}var i="Mange User Buckets ";return React.createElement("div",null,React.createElement(PanelTable,{title:i,rows:e,headers:["#","Name","Rule Key","Actions"],addHandler:this.handleAddClick}),t.editModalRef)}});
var ReportAbuseCommentsRow=React.createClass({displayName:"ReportAbuseCommentsRow",mixins:[EditableRowMixin],moderateComment:function(e){var t=confirm("Do you really Want to Moderate Comment");if(t){var n=this;Api.postData("/backend/meta/moderate-comments/"+e,{},function(e){e.success&&n.props.model.destroy({error:function(){alert("Error While Moderating Comment")}})})}},render:function(){var e=this.props.model;return React.createElement("tr",null,React.createElement("td",null,this.props.index),React.createElement("td",null,e.get("comments").text),React.createElement("td",null,e.get("title")),React.createElement("td",null,e.get("type")),React.createElement("td",null,e.get("added_by")),React.createElement("td",null,e.get("moderation_type")),React.createElement("td",null,e.get("message")),React.createElement("td",null,e.get("reporter").display_name),React.createElement("td",null,React.createElement("button",{className:"btn btn-xs btn-danger",onClick:this.moderateComment.bind(null,e.get("comments").id)},"Moderate")))}}),ReportAbuseCommentsTable=React.createClass({displayName:"ReportAbuseCommentsTable",mixins:[EditableCollectionMixin],getDefaultProps:function(){var e=new JiyoDataCollection;return e.url="/backend/meta/report-abuse-comments",{collection:e}},getInitialState:function(){return{filterText:"",errors:{id:null,comments:null,title:null,type:null,added_by:null,moderation_type:null,message:null,reporter:null},obj:{id:null,comments:null,title:null,type:null,added_by:null,moderation_type:null,message:null,reporter:null}}},filter:function(e){this.setState({filterText:e.target.value})},render:function(){var e=null,t=0,n=this,l=this.state.collection,n=(this.state.obj,this);if(this.state.collection){var o=this.state.filterText.toLowerCase();e=[],l.forEach(function(l){l.get("comments").text.toLowerCase().indexOf(o)>=0?e.push(React.createElement(ReportAbuseCommentsRow,{model:l,index:++t,parent:n})):l.get("added_by").toLowerCase().indexOf(o)>=0?e.push(React.createElement(ReportAbuseCommentsRow,{model:l,index:++t,parent:n})):l.get("reporter").display_name.toLowerCase().indexOf(o)>=0?e.push(React.createElement(ReportAbuseCommentsRow,{model:l,index:++t,parent:n})):l.get("message").toLowerCase().indexOf(o)>=0?e.push(React.createElement(ReportAbuseCommentsRow,{model:l,index:++t,parent:n})):l.get("title").toLowerCase().indexOf(o)>=0?e.push(React.createElement(ReportAbuseCommentsRow,{model:l,index:++t,parent:n})):l.get("type").toLowerCase().indexOf(o)>=0&&e.push(React.createElement(ReportAbuseCommentsRow,{model:l,index:++t,parent:n}))})}return React.createElement("div",null,React.createElement(PanelTable,{onFilter:this.filter,filterText:this.state.filterText,title:"Report Abuse Comments",rows:e,headers:["#","Comments","Commented On","Type","Commented By","Moderation Type","Message","Reporter"]}))}});